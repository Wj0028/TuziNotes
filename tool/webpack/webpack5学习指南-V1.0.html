<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.61" />
    <meta name="theme" content="VuePress Theme Hope" />
    <link rel="icon" href="/images/Rab4.png"><title>Webpack æŒ‡å— | åƒå…”å­çš„é±¼é¦™è‚‰ä¸</title><meta name="description" content="åƒé±¼é¦™è‚‰ä¸çš„ğŸ‡ HOME">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/TuziNotes/assets/style-51c38b48.css" as="style"><link rel="stylesheet" href="/TuziNotes/assets/style-51c38b48.css">
    <link rel="modulepreload" href="/TuziNotes/assets/app-351592dd.js"><link rel="modulepreload" href="/TuziNotes/assets/framework-5fb02f36.js"><link rel="modulepreload" href="/TuziNotes/assets/webpack5å­¦ä¹ æŒ‡å—-V1.0.html-71f0aacc.js"><link rel="modulepreload" href="/TuziNotes/assets/webpack5å­¦ä¹ æŒ‡å—-V1.0.html-8b8bbee7.js"><link rel="prefetch" href="/TuziNotes/assets/index.html-c8d085a7.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/slides.html-d72e2dcb.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/index.html-cd3974cb.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/index.html-a3a9cd69.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/disable.html-52c6ee09.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/encrypt.html-ca7b69ee.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/markdown.html-3b7cbe61.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/page.html-a5149c82.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/index.html-0d8c8456.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/index.html-979001c3.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/index.html-caee4b5f.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/index.html-8c72884c.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/index.html-a23e1fb8.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/Basic.html-2d6c2aa0.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/Code.html-32d2a2b9.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/Job.html-df883502.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/index.html-e94705b0.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/Basic.html-be0ec75c.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/Code.html-17d47fa2.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/Job.html-dc06ac28.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/index.html-0d8cc955.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/Basic.html-405f2052.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/Code.html-a3a7273b.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/Job.html-ccd5ab73.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/index.html-14227943.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/Basic.html-143397f4.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/Code.html-3dc44c0d.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/Job.html-0f6a4a5a.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/index.html-f8c3887a.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/index.html-ad5b5098.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/ã€ŠReact18-hookså­¦ä¹ æŒ‡å—ã€‹.html-80768953.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/index.html-b6127ff7.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/TypeScript å­¦ä¹ æŒ‡å—-å¹²è´§ç‰ˆ.html-2b0a5330.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/typescript.html-a92c0847.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/index.html-b1b30598.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/Vue2.html-30030315.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/Vue3.html-4f45494f.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/vuex.html-bc984867.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/baz.html-9a60276a.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/index.html-27f80037.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/ray.html-1d21bc21.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/index.html-c1c45bbb.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/index.html-6106178f.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/404.html-81a48005.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/index.html-0f3e2e46.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/index.html-2f94500f.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/slides.html-84e7f1bf.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/index.html-39ff3b47.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/index.html-259903d9.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/disable.html-7ce3aac5.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/encrypt.html-072628b7.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/markdown.html-8b22c2d2.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/page.html-028be04c.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/index.html-725b5d9a.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/index.html-135e4114.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/index.html-23d8e300.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/index.html-fd6d2fe6.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/index.html-8318115b.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/Basic.html-16563ef7.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/Code.html-b932b3a2.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/Job.html-a47d196b.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/index.html-d3ac1333.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/Basic.html-88bde17a.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/Code.html-bba16727.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/Job.html-cac4657e.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/index.html-47f5e1d4.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/Basic.html-ceaefad0.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/Code.html-5112334b.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/Job.html-990395da.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/index.html-c336019e.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/Basic.html-304ec130.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/Code.html-d9c09eb5.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/Job.html-8927e0ea.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/index.html-57cdfa01.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/index.html-1d9adf83.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/ã€ŠReact18-hookså­¦ä¹ æŒ‡å—ã€‹.html-611918a0.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/index.html-a404ecb4.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/TypeScript å­¦ä¹ æŒ‡å—-å¹²è´§ç‰ˆ.html-d424c191.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/typescript.html-a9f3dc06.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/index.html-4e0d434f.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/Vue2.html-254e2988.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/Vue3.html-748444a2.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/vuex.html-029e5f07.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/baz.html-86a6f217.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/index.html-c1f52c04.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/ray.html-e4aa7cbf.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/index.html-d0282dbf.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/index.html-23225f30.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/404.html-4751c658.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/index.html-2b80b5dd.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/auto-ba5ecab5.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/flowchart-35969cab.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/mermaid.core-3db680d7.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/highlight.esm-a794bb63.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/markdown.esm-d92a2fc9.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/math.esm-70a288c8.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/notes.esm-224f94d9.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/reveal.esm-e5069ce0.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/search.esm-2c3fba7d.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/zoom.esm-b83b91d0.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/VuePlayground-75b0fa4e.js" as="script"><link rel="prefetch" href="/TuziNotes/assets/photoswipe.esm-6e6cbe40.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><!--[--><div class="theme-container has-toc"><!--[--><header class="navbar" id="navbar"><div class="navbar-start"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/TuziNotes/" class="brand"><img class="logo" src="/TuziNotes/images/Rab5.png" alt="åƒå…”å­çš„é±¼é¦™è‚‰ä¸"><!----><span class="site-name hide-in-pad">åƒå…”å­çš„é±¼é¦™è‚‰ä¸</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/TuziNotes/" class="nav-link" aria-label="Home"><span class="font-icon icon iconfont icon-home" style=""></span>Home<!----></a></div><div class="nav-item hide-in-mobile"><a href="/TuziNotes/Front/" class="nav-link" aria-label="å‰ç«¯"><span class="font-icon icon iconfont icon-note" style=""></span>å‰ç«¯<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Tool"><span class="title"><span class="font-icon icon iconfont icon-tool" style=""></span>Tool</span><span class="arrow"></span><ul class="nav-dropdown"></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Debug"><span class="title"><span class="font-icon icon iconfont icon-bug" style=""></span>Debug</span><span class="arrow"></span><ul class="nav-dropdown"></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="èµ„æº"><span class="title"><span class="font-icon icon iconfont icon-link" style=""></span>èµ„æº</span><span class="arrow"></span><ul class="nav-dropdown"></ul></button></div></div></nav><!--[--><!----><!--]--></div><div class="navbar-end"><!--[--><!----><!--]--><!----><div class="nav-item"><a class="repo-link" href="https://github.com/Wj0028/TuziNotes.git" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><!----><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside class="sidebar" id="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable active"><span class="font-icon icon iconfont icon-Webpack" style=""></span><span class="title">Webpack ä½“ç³»</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="Webpack æŒ‡å—"><span class="font-icon icon iconfont icon-webpack" style=""></span>Webpack æŒ‡å—<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_0-1-å­¦ä¹ å‰æ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="0.1 å­¦ä¹ å‰æ"><!---->0.1 å­¦ä¹ å‰æ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_0-2-æˆè¯¾æ–¹å¼" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="0.2 æˆè¯¾æ–¹å¼"><!---->0.2 æˆè¯¾æ–¹å¼<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_0-3-è¯¾ç¨‹å—ä¼—" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="0.3 è¯¾ç¨‹å—ä¼—"><!---->0.3 è¯¾ç¨‹å—ä¼—<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_0-4-è¯¾ç¨‹å®‰æ’" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="0.4 è¯¾ç¨‹å®‰æ’"><!---->0.4 è¯¾ç¨‹å®‰æ’<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_0-5-è¯¾ç¨‹æ”¶è·" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="0.5 è¯¾ç¨‹æ”¶è·"><!---->0.5 è¯¾ç¨‹æ”¶è·<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-1-ä¸ºä»€ä¹ˆéœ€è¦-webpack" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.1 ä¸ºä»€ä¹ˆéœ€è¦ Webpack"><!---->1.1 ä¸ºä»€ä¹ˆéœ€è¦ Webpack<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-1-1-å¦‚ä½•è§£å†³ä½œç”¨åŸŸé—®é¢˜" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.1.1 å¦‚ä½•è§£å†³ä½œç”¨åŸŸé—®é¢˜"><!---->1.1.1 å¦‚ä½•è§£å†³ä½œç”¨åŸŸé—®é¢˜<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-1-2-å¦‚ä½•è§£å†³ä»£ç æ‹†åˆ†é—®é¢˜" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.1.2 å¦‚ä½•è§£å†³ä»£ç æ‹†åˆ†é—®é¢˜"><!---->1.1.2 å¦‚ä½•è§£å†³ä»£ç æ‹†åˆ†é—®é¢˜<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-1-3-å¦‚ä½•è®©æµè§ˆå™¨æ”¯æŒæ¨¡å—" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.1.3 å¦‚ä½•è®©æµè§ˆå™¨æ”¯æŒæ¨¡å—"><!---->1.1.3 å¦‚ä½•è®©æµè§ˆå™¨æ”¯æŒæ¨¡å—<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-1-4-webpack-æå®šè¿™ä¸€åˆ‡" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.1.4 Webpack æå®šè¿™ä¸€åˆ‡"><!---->1.1.4 Webpack æå®šè¿™ä¸€åˆ‡<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-1-5-webpack-ä¸ç«å“" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.1.5 Webpack ä¸ç«å“"><!---->1.1.5 Webpack ä¸ç«å“<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-2-å°è¯•-webpack" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.2 å°è¯• Webpack"><!---->1.2 å°è¯• Webpack<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-2-1-å¼€å‘å‡†å¤‡" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.2.1 å¼€å‘å‡†å¤‡"><!---->1.2.1 å¼€å‘å‡†å¤‡<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-2-2-å®‰è£…-webpack" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.2.2 å®‰è£… Webpack"><!---->1.2.2 å®‰è£… Webpack<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-2-3-è¿è¡Œ-webpack" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.2.3 è¿è¡Œ Webpack"><!---->1.2.3 è¿è¡Œ Webpack<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-2-4-è‡ªå®šä¹‰-webpack-é…ç½®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.2.4 è‡ªå®šä¹‰ Webpack é…ç½®"><!---->1.2.4 è‡ªå®šä¹‰ Webpack é…ç½®<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-2-5-é‡æ–°è¿è¡Œé¡¹ç›®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.2.5 é‡æ–°è¿è¡Œé¡¹ç›®"><!---->1.2.5 é‡æ–°è¿è¡Œé¡¹ç›®<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-3-è‡ªåŠ¨å¼•å…¥èµ„æº" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.3 è‡ªåŠ¨å¼•å…¥èµ„æº"><!---->1.3 è‡ªåŠ¨å¼•å…¥èµ„æº<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-3-1-ä»€ä¹ˆæ˜¯æ’ä»¶" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.3.1 ä»€ä¹ˆæ˜¯æ’ä»¶"><!---->1.3.1 ä»€ä¹ˆæ˜¯æ’ä»¶<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-3-2-ä½¿ç”¨-htmlwebpackplugin" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.3.2 ä½¿ç”¨ HtmlWebpackPlugin"><!---->1.3.2 ä½¿ç”¨ HtmlWebpackPlugin<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-3-3-æ¸…ç†-dist" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.3.3 æ¸…ç† dist"><!---->1.3.3 æ¸…ç† dist<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-4-æ­å»ºå¼€å‘ç¯å¢ƒ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.4 æ­å»ºå¼€å‘ç¯å¢ƒ"><!---->1.4 æ­å»ºå¼€å‘ç¯å¢ƒ<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-4-1-mode-é€‰é¡¹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.4.1 mode é€‰é¡¹"><!---->1.4.1 mode é€‰é¡¹<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-4-2-ä½¿ç”¨-source-map" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.4.2 ä½¿ç”¨ source map"><!---->1.4.2 ä½¿ç”¨ source map<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-4-3-ä½¿ç”¨-watch-mode-è§‚å¯Ÿæ¨¡å¼" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.4.3 ä½¿ç”¨ watch mode(è§‚å¯Ÿæ¨¡å¼)"><!---->1.4.3 ä½¿ç”¨ watch mode(è§‚å¯Ÿæ¨¡å¼)<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-4-4-ä½¿ç”¨-webpack-dev-server" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.4.4 ä½¿ç”¨ webpack-dev-server"><!---->1.4.4 ä½¿ç”¨ webpack-dev-server<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-5-èµ„æºæ¨¡å—" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.5 èµ„æºæ¨¡å—"><!---->1.5 èµ„æºæ¨¡å—<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-5-1-resource-èµ„æº" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.5.1 Resource èµ„æº"><!---->1.5.1 Resource èµ„æº<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-5-2-inline-èµ„æº" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.5.2 inline èµ„æº"><!---->1.5.2 inline èµ„æº<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-5-3-source-èµ„æº" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.5.3 source èµ„æº"><!---->1.5.3 source èµ„æº<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-5-4-é€šç”¨èµ„æºç±»å‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.5.4 é€šç”¨èµ„æºç±»å‹"><!---->1.5.4 é€šç”¨èµ„æºç±»å‹<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-6-ç®¡ç†èµ„æº" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.6 ç®¡ç†èµ„æº"><!---->1.6 ç®¡ç†èµ„æº<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-6-1-ä»€ä¹ˆæ˜¯-loader" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.6.1 ä»€ä¹ˆæ˜¯ loader"><!---->1.6.1 ä»€ä¹ˆæ˜¯ loader<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-6-2-åŠ è½½-css" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.6.2 åŠ è½½ CSS"><!---->1.6.2 åŠ è½½ CSS<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-6-3-æŠ½ç¦»å’Œå‹ç¼©-css" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.6.3 æŠ½ç¦»å’Œå‹ç¼© CSS"><!---->1.6.3 æŠ½ç¦»å’Œå‹ç¼© CSS<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-6-4-åŠ è½½-images-å›¾åƒ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.6.4 åŠ è½½ images å›¾åƒ"><!---->1.6.4 åŠ è½½ images å›¾åƒ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-6-5-åŠ è½½-fonts-å­—ä½“" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.6.5 åŠ è½½ fonts å­—ä½“"><!---->1.6.5 åŠ è½½ fonts å­—ä½“<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-6-6-åŠ è½½æ•°æ®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.6.6 åŠ è½½æ•°æ®"><!---->1.6.6 åŠ è½½æ•°æ®<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-6-7-è‡ªå®šä¹‰-json-æ¨¡å—-parser" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.6.7 è‡ªå®šä¹‰ JSON æ¨¡å— parser"><!---->1.6.7 è‡ªå®šä¹‰ JSON æ¨¡å— parser<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-7-ä½¿ç”¨-babel-loader" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.7 ä½¿ç”¨ babel-loader"><!---->1.7 ä½¿ç”¨ babel-loader<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-7-1-ä¸ºä»€ä¹ˆéœ€è¦-babel-loader" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.7.1 ä¸ºä»€ä¹ˆéœ€è¦ babel-loader"><!---->1.7.1 ä¸ºä»€ä¹ˆéœ€è¦ babel-loader<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-7-2-ä½¿ç”¨-babel-loader" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.7.2 ä½¿ç”¨ babel-loader"><!---->1.7.2 ä½¿ç”¨ babel-loader<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-7-3-regeneratorruntime-æ’ä»¶" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.7.3 regeneratorRuntime æ’ä»¶"><!---->1.7.3 regeneratorRuntime æ’ä»¶<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-8-ä»£ç åˆ†ç¦»" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.8 ä»£ç åˆ†ç¦»"><!---->1.8 ä»£ç åˆ†ç¦»<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-8-1-å…¥å£èµ·ç‚¹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.8.1 å…¥å£èµ·ç‚¹"><!---->1.8.1 å…¥å£èµ·ç‚¹<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-8-2-é˜²æ­¢é‡å¤" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.8.2 é˜²æ­¢é‡å¤"><!---->1.8.2 é˜²æ­¢é‡å¤<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-8-3-åŠ¨æ€å¯¼å…¥" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.8.3 åŠ¨æ€å¯¼å…¥"><!---->1.8.3 åŠ¨æ€å¯¼å…¥<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-8-4-æ‡’åŠ è½½" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.8.4 æ‡’åŠ è½½"><!---->1.8.4 æ‡’åŠ è½½<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-8-5-é¢„è·å–-é¢„åŠ è½½æ¨¡å—" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.8.5 é¢„è·å–/é¢„åŠ è½½æ¨¡å—"><!---->1.8.5 é¢„è·å–/é¢„åŠ è½½æ¨¡å—<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-9-ç¼“å­˜" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.9 ç¼“å­˜"><!---->1.9 ç¼“å­˜<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-9-1-è¾“å‡ºæ–‡ä»¶çš„æ–‡ä»¶å" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.9.1 è¾“å‡ºæ–‡ä»¶çš„æ–‡ä»¶å"><!---->1.9.1 è¾“å‡ºæ–‡ä»¶çš„æ–‡ä»¶å<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-9-2-ç¼“å­˜ç¬¬ä¸‰æ–¹åº“" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.9.2 ç¼“å­˜ç¬¬ä¸‰æ–¹åº“"><!---->1.9.2 ç¼“å­˜ç¬¬ä¸‰æ–¹åº“<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-9-3-å°†-js-æ–‡ä»¶æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.9.3 å°† js æ–‡ä»¶æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­"><!---->1.9.3 å°† js æ–‡ä»¶æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-10-æ‹†åˆ†å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒé…ç½®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.10 æ‹†åˆ†å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒé…ç½®"><!---->1.10 æ‹†åˆ†å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒé…ç½®<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-10-1-å…¬å…±è·¯å¾„" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.10.1 å…¬å…±è·¯å¾„"><!---->1.10.1 å…¬å…±è·¯å¾„<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-10-2-ç¯å¢ƒå˜é‡" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.10.2 ç¯å¢ƒå˜é‡"><!---->1.10.2 ç¯å¢ƒå˜é‡<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-10-3-æ‹†åˆ†é…ç½®æ–‡ä»¶" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.10.3 æ‹†åˆ†é…ç½®æ–‡ä»¶"><!---->1.10.3 æ‹†åˆ†é…ç½®æ–‡ä»¶<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-10-4-npm-è„šæœ¬" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.10.4 npm è„šæœ¬"><!---->1.10.4 npm è„šæœ¬<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-10-5-æå–å…¬å…±é…ç½®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.10.5 æå–å…¬å…±é…ç½®"><!---->1.10.5 æå–å…¬å…±é…ç½®<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-10-6-åˆå¹¶é…ç½®æ–‡ä»¶" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.10.6 åˆå¹¶é…ç½®æ–‡ä»¶"><!---->1.10.6 åˆå¹¶é…ç½®æ–‡ä»¶<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-1-æé«˜å¼€å‘æ•ˆç‡-å®Œå–„å›¢é˜Ÿå¼€å‘è§„èŒƒ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.1 æé«˜å¼€å‘æ•ˆç‡ï¼Œå®Œå–„å›¢é˜Ÿå¼€å‘è§„èŒƒ"><!---->2.1 æé«˜å¼€å‘æ•ˆç‡ï¼Œå®Œå–„å›¢é˜Ÿå¼€å‘è§„èŒƒ<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-1-1-source-map" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.1.1 source-map"><!---->2.1.1 source-map<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-1-2-devserver" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.1.2 devServer"><!---->2.1.2 devServer<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-1-3-æ¨¡å—çƒ­æ›¿æ¢ä¸çƒ­åŠ è½½" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.1.3 æ¨¡å—çƒ­æ›¿æ¢ä¸çƒ­åŠ è½½"><!---->2.1.3 æ¨¡å—çƒ­æ›¿æ¢ä¸çƒ­åŠ è½½<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-1-4-eslint" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.1.4 eslint"><!---->2.1.4 eslint<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-1-5-git-hooks-ä¸-husky" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.1.5 git-hooks ä¸ husky"><!---->2.1.5 git-hooks ä¸ husky<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-2-æ¨¡å—ä¸ä¾èµ–" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.2 æ¨¡å—ä¸ä¾èµ–"><!---->2.2 æ¨¡å—ä¸ä¾èµ–<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-2-1-webpack-æ¨¡å—ä¸è§£æåŸç†" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.2.1 Webpack æ¨¡å—ä¸è§£æåŸç†"><!---->2.2.1 Webpack æ¨¡å—ä¸è§£æåŸç†<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-2-2-æ¨¡å—è§£æ-resolve" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.2.2 æ¨¡å—è§£æ(resolve)"><!---->2.2.2 æ¨¡å—è§£æ(resolve)<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-2-3-å¤–éƒ¨æ‰©å±•-externals" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.2.3 å¤–éƒ¨æ‰©å±•(Externals)"><!---->2.2.3 å¤–éƒ¨æ‰©å±•(Externals)<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-2-4-ä¾èµ–å›¾-dependency-graph" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.2.4 ä¾èµ–å›¾(dependency graph)"><!---->2.2.4 ä¾èµ–å›¾(dependency graph)<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-3-æ‰©å±•åŠŸèƒ½" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.3 æ‰©å±•åŠŸèƒ½"><!---->2.3 æ‰©å±•åŠŸèƒ½<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-3-1-postcss-ä¸-css-æ¨¡å—" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.3.1 PostCSS ä¸ CSS æ¨¡å—"><!---->2.3.1 PostCSS ä¸ CSS æ¨¡å—<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-3-2-web-works" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.3.2 Web Works"><!---->2.3.2 Web Works<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-3-3-typescript" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.3.3 TypeScript"><!---->2.3.3 TypeScript<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-4-å¤šé¡µé¢åº”ç”¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.4 å¤šé¡µé¢åº”ç”¨"><!---->2.4 å¤šé¡µé¢åº”ç”¨<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-4-1-entry-é…ç½®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.4.1 entry é…ç½®"><!---->2.4.1 entry é…ç½®<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-4-2-é…ç½®-index-html-æ¨¡æ¿" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.4.2 é…ç½® index.html æ¨¡æ¿"><!---->2.4.2 é…ç½® index.html æ¨¡æ¿<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-4-3-å¤šé¡µé¢åº”ç”¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.4.3 å¤šé¡µé¢åº”ç”¨"><!---->2.4.3 å¤šé¡µé¢åº”ç”¨<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-5-tree-shaking" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.5 Tree shaking"><!---->2.5 Tree shaking<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-5-1-tree-shaking-å®éªŒ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.5.1 tree-shaking å®éªŒ"><!---->2.5.1 tree-shaking å®éªŒ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-5-2-sideeffects" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.5.2 sideEffects"><!---->2.5.2 sideEffects<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-6-æ¸è¿›å¼ç½‘ç»œåº”ç”¨ç¨‹åº-pwa" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.6 æ¸è¿›å¼ç½‘ç»œåº”ç”¨ç¨‹åº PWA"><!---->2.6 æ¸è¿›å¼ç½‘ç»œåº”ç”¨ç¨‹åº PWA<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-6-1-éç¦»çº¿ç¯å¢ƒä¸‹è¿è¡Œ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.6.1 éç¦»çº¿ç¯å¢ƒä¸‹è¿è¡Œ"><!---->2.6.1 éç¦»çº¿ç¯å¢ƒä¸‹è¿è¡Œ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-6-2-æ·»åŠ -workbox" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.6.2 æ·»åŠ  Workbox"><!---->2.6.2 æ·»åŠ  Workbox<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-6-3-æ³¨å†Œ-service-worker" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.6.3 æ³¨å†Œ Service Worker"><!---->2.6.3 æ³¨å†Œ Service Worker<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-7-shimming-é¢„ç½®ä¾èµ–" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.7 shimming é¢„ç½®ä¾èµ–"><!---->2.7 shimming é¢„ç½®ä¾èµ–<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-7-1-shimming-é¢„ç½®å…¨å±€å˜é‡" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.7.1 Shimming é¢„ç½®å…¨å±€å˜é‡"><!---->2.7.1 Shimming é¢„ç½®å…¨å±€å˜é‡<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-7-2-ç»†ç²’åº¦-shimming" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.7.2 ç»†ç²’åº¦ Shimming"><!---->2.7.2 ç»†ç²’åº¦ Shimming<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-7-3-å…¨å±€-exports" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.7.3 å…¨å±€ Exports"><!---->2.7.3 å…¨å±€ Exports<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-7-4-åŠ è½½-polyfills" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.7.4 åŠ è½½ Polyfills"><!---->2.7.4 åŠ è½½ Polyfills<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-7-5-è¿›ä¸€æ­¥ä¼˜åŒ–-polyfills" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.7.5 è¿›ä¸€æ­¥ä¼˜åŒ– Polyfills"><!---->2.7.5 è¿›ä¸€æ­¥ä¼˜åŒ– Polyfills<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-8-åˆ›å»º-library" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.8 åˆ›å»º library"><!---->2.8 åˆ›å»º library<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-8-1-åˆ›å»ºä¸€ä¸ª-library" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.8.1 åˆ›å»ºä¸€ä¸ª library"><!---->2.8.1 åˆ›å»ºä¸€ä¸ª library<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-8-2-webpack-é…ç½®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.8.2 Webpack é…ç½®"><!---->2.8.2 Webpack é…ç½®<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-8-3-å¯¼å‡º-library" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.8.3 å¯¼å‡º Library"><!---->2.8.3 å¯¼å‡º Library<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-8-4-å¤–éƒ¨åŒ–-lodash" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.8.4 å¤–éƒ¨åŒ– lodash"><!---->2.8.4 å¤–éƒ¨åŒ– lodash<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-8-5-å¤–éƒ¨åŒ–é™åˆ¶" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.8.5 å¤–éƒ¨åŒ–é™åˆ¶"><!---->2.8.5 å¤–éƒ¨åŒ–é™åˆ¶<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-8-6-ä¼˜åŒ–è¾“å‡º" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.8.6 ä¼˜åŒ–è¾“å‡º"><!---->2.8.6 ä¼˜åŒ–è¾“å‡º<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-8-7-å‘å¸ƒä¸º-npm-package" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.8.7 å‘å¸ƒä¸º npm package"><!---->2.8.7 å‘å¸ƒä¸º npm package<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-9-æ¨¡å—è”é‚¦" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.9 æ¨¡å—è”é‚¦"><!---->2.9 æ¨¡å—è”é‚¦<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-9-1-ä»€ä¹ˆæ˜¯æ¨¡å—è”é‚¦" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.9.1 ä»€ä¹ˆæ˜¯æ¨¡å—è”é‚¦"><!---->2.9.1 ä»€ä¹ˆæ˜¯æ¨¡å—è”é‚¦<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-9-2-åº”ç”¨æ¡ˆä¾‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.9.2 åº”ç”¨æ¡ˆä¾‹"><!---->2.9.2 åº”ç”¨æ¡ˆä¾‹<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-10-æå‡æ„å»ºæ€§èƒ½" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.10 æå‡æ„å»ºæ€§èƒ½"><!---->2.10 æå‡æ„å»ºæ€§èƒ½<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-10-1-é€šç”¨ç¯å¢ƒ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.10.1 é€šç”¨ç¯å¢ƒ"><!---->2.10.1 é€šç”¨ç¯å¢ƒ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-10-2-å¼€å‘ç¯å¢ƒ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.10.2 å¼€å‘ç¯å¢ƒ"><!---->2.10.2 å¼€å‘ç¯å¢ƒ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-10-3-ç”Ÿäº§ç¯å¢ƒ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.10.3 ç”Ÿäº§ç¯å¢ƒ"><!---->2.10.3 ç”Ÿäº§ç¯å¢ƒ<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><span class="font-icon icon iconfont icon-webpack" style=""></span>Webpack æŒ‡å—</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href=" " target="_blank" rel="noopener noreferrer">Tuzi</a></span><span property="author" content="Tuzi"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-03-16T04:01:52.000Z"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 134 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT134M"></span><!----><!----></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">æ­¤é¡µå†…å®¹<button class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_0-1-å­¦ä¹ å‰æ" class="router-link-active router-link-exact-active toc-link level3">0.1 å­¦ä¹ å‰æ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_0-2-æˆè¯¾æ–¹å¼" class="router-link-active router-link-exact-active toc-link level3">0.2 æˆè¯¾æ–¹å¼</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_0-3-è¯¾ç¨‹å—ä¼—" class="router-link-active router-link-exact-active toc-link level3">0.3 è¯¾ç¨‹å—ä¼—</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_0-4-è¯¾ç¨‹å®‰æ’" class="router-link-active router-link-exact-active toc-link level3">0.4 è¯¾ç¨‹å®‰æ’</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_0-5-è¯¾ç¨‹æ”¶è·" class="router-link-active router-link-exact-active toc-link level3">0.5 è¯¾ç¨‹æ”¶è·</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-1-ä¸ºä»€ä¹ˆéœ€è¦-webpack" class="router-link-active router-link-exact-active toc-link level2">1.1 ä¸ºä»€ä¹ˆéœ€è¦ Webpack</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-1-1-å¦‚ä½•è§£å†³ä½œç”¨åŸŸé—®é¢˜" class="router-link-active router-link-exact-active toc-link level3">1.1.1 å¦‚ä½•è§£å†³ä½œç”¨åŸŸé—®é¢˜</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-1-2-å¦‚ä½•è§£å†³ä»£ç æ‹†åˆ†é—®é¢˜" class="router-link-active router-link-exact-active toc-link level3">1.1.2 å¦‚ä½•è§£å†³ä»£ç æ‹†åˆ†é—®é¢˜</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-1-3-å¦‚ä½•è®©æµè§ˆå™¨æ”¯æŒæ¨¡å—" class="router-link-active router-link-exact-active toc-link level3">1.1.3 å¦‚ä½•è®©æµè§ˆå™¨æ”¯æŒæ¨¡å—</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-1-4-webpack-æå®šè¿™ä¸€åˆ‡" class="router-link-active router-link-exact-active toc-link level3">1.1.4 Webpack æå®šè¿™ä¸€åˆ‡</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-1-5-webpack-ä¸ç«å“" class="router-link-active router-link-exact-active toc-link level3">1.1.5 Webpack ä¸ç«å“</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-2-å°è¯•-webpack" class="router-link-active router-link-exact-active toc-link level2">1.2 å°è¯• Webpack</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-2-1-å¼€å‘å‡†å¤‡" class="router-link-active router-link-exact-active toc-link level3">1.2.1 å¼€å‘å‡†å¤‡</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-2-2-å®‰è£…-webpack" class="router-link-active router-link-exact-active toc-link level3">1.2.2 å®‰è£… Webpack</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-2-3-è¿è¡Œ-webpack" class="router-link-active router-link-exact-active toc-link level3">1.2.3 è¿è¡Œ Webpack</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-2-4-è‡ªå®šä¹‰-webpack-é…ç½®" class="router-link-active router-link-exact-active toc-link level3">1.2.4 è‡ªå®šä¹‰ Webpack é…ç½®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-2-5-é‡æ–°è¿è¡Œé¡¹ç›®" class="router-link-active router-link-exact-active toc-link level3">1.2.5 é‡æ–°è¿è¡Œé¡¹ç›®</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-3-è‡ªåŠ¨å¼•å…¥èµ„æº" class="router-link-active router-link-exact-active toc-link level2">1.3 è‡ªåŠ¨å¼•å…¥èµ„æº</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-3-1-ä»€ä¹ˆæ˜¯æ’ä»¶" class="router-link-active router-link-exact-active toc-link level3">1.3.1 ä»€ä¹ˆæ˜¯æ’ä»¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-3-2-ä½¿ç”¨-htmlwebpackplugin" class="router-link-active router-link-exact-active toc-link level3">1.3.2 ä½¿ç”¨ HtmlWebpackPlugin</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-3-3-æ¸…ç†-dist" class="router-link-active router-link-exact-active toc-link level3">1.3.3 æ¸…ç† dist</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-4-æ­å»ºå¼€å‘ç¯å¢ƒ" class="router-link-active router-link-exact-active toc-link level2">1.4 æ­å»ºå¼€å‘ç¯å¢ƒ</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-4-1-mode-é€‰é¡¹" class="router-link-active router-link-exact-active toc-link level3">1.4.1 mode é€‰é¡¹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-4-2-ä½¿ç”¨-source-map" class="router-link-active router-link-exact-active toc-link level3">1.4.2 ä½¿ç”¨ source map</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-4-3-ä½¿ç”¨-watch-mode-è§‚å¯Ÿæ¨¡å¼" class="router-link-active router-link-exact-active toc-link level3">1.4.3 ä½¿ç”¨ watch mode(è§‚å¯Ÿæ¨¡å¼)</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-4-4-ä½¿ç”¨-webpack-dev-server" class="router-link-active router-link-exact-active toc-link level3">1.4.4 ä½¿ç”¨ webpack-dev-server</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-5-èµ„æºæ¨¡å—" class="router-link-active router-link-exact-active toc-link level2">1.5 èµ„æºæ¨¡å—</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-5-1-resource-èµ„æº" class="router-link-active router-link-exact-active toc-link level3">1.5.1 Resource èµ„æº</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-5-2-inline-èµ„æº" class="router-link-active router-link-exact-active toc-link level3">1.5.2 inline èµ„æº</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-5-3-source-èµ„æº" class="router-link-active router-link-exact-active toc-link level3">1.5.3 source èµ„æº</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-5-4-é€šç”¨èµ„æºç±»å‹" class="router-link-active router-link-exact-active toc-link level3">1.5.4 é€šç”¨èµ„æºç±»å‹</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-6-ç®¡ç†èµ„æº" class="router-link-active router-link-exact-active toc-link level2">1.6 ç®¡ç†èµ„æº</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-6-1-ä»€ä¹ˆæ˜¯-loader" class="router-link-active router-link-exact-active toc-link level3">1.6.1 ä»€ä¹ˆæ˜¯ loader</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-6-2-åŠ è½½-css" class="router-link-active router-link-exact-active toc-link level3">1.6.2 åŠ è½½ CSS</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-6-3-æŠ½ç¦»å’Œå‹ç¼©-css" class="router-link-active router-link-exact-active toc-link level3">1.6.3 æŠ½ç¦»å’Œå‹ç¼© CSS</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-6-4-åŠ è½½-images-å›¾åƒ" class="router-link-active router-link-exact-active toc-link level3">1.6.4 åŠ è½½ images å›¾åƒ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-6-5-åŠ è½½-fonts-å­—ä½“" class="router-link-active router-link-exact-active toc-link level3">1.6.5 åŠ è½½ fonts å­—ä½“</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-6-6-åŠ è½½æ•°æ®" class="router-link-active router-link-exact-active toc-link level3">1.6.6 åŠ è½½æ•°æ®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-6-7-è‡ªå®šä¹‰-json-æ¨¡å—-parser" class="router-link-active router-link-exact-active toc-link level3">1.6.7 è‡ªå®šä¹‰ JSON æ¨¡å— parser</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-7-ä½¿ç”¨-babel-loader" class="router-link-active router-link-exact-active toc-link level2">1.7 ä½¿ç”¨ babel-loader</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-7-1-ä¸ºä»€ä¹ˆéœ€è¦-babel-loader" class="router-link-active router-link-exact-active toc-link level3">1.7.1 ä¸ºä»€ä¹ˆéœ€è¦ babel-loader</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-7-2-ä½¿ç”¨-babel-loader" class="router-link-active router-link-exact-active toc-link level3">1.7.2 ä½¿ç”¨ babel-loader</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-7-3-regeneratorruntime-æ’ä»¶" class="router-link-active router-link-exact-active toc-link level3">1.7.3 regeneratorRuntime æ’ä»¶</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-8-ä»£ç åˆ†ç¦»" class="router-link-active router-link-exact-active toc-link level2">1.8 ä»£ç åˆ†ç¦»</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-8-1-å…¥å£èµ·ç‚¹" class="router-link-active router-link-exact-active toc-link level3">1.8.1 å…¥å£èµ·ç‚¹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-8-2-é˜²æ­¢é‡å¤" class="router-link-active router-link-exact-active toc-link level3">1.8.2 é˜²æ­¢é‡å¤</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-8-3-åŠ¨æ€å¯¼å…¥" class="router-link-active router-link-exact-active toc-link level3">1.8.3 åŠ¨æ€å¯¼å…¥</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-8-4-æ‡’åŠ è½½" class="router-link-active router-link-exact-active toc-link level3">1.8.4 æ‡’åŠ è½½</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-8-5-é¢„è·å–-é¢„åŠ è½½æ¨¡å—" class="router-link-active router-link-exact-active toc-link level3">1.8.5 é¢„è·å–/é¢„åŠ è½½æ¨¡å—</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-9-ç¼“å­˜" class="router-link-active router-link-exact-active toc-link level2">1.9 ç¼“å­˜</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-9-1-è¾“å‡ºæ–‡ä»¶çš„æ–‡ä»¶å" class="router-link-active router-link-exact-active toc-link level3">1.9.1 è¾“å‡ºæ–‡ä»¶çš„æ–‡ä»¶å</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-9-2-ç¼“å­˜ç¬¬ä¸‰æ–¹åº“" class="router-link-active router-link-exact-active toc-link level3">1.9.2 ç¼“å­˜ç¬¬ä¸‰æ–¹åº“</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-9-3-å°†-js-æ–‡ä»¶æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­" class="router-link-active router-link-exact-active toc-link level3">1.9.3 å°† js æ–‡ä»¶æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-10-æ‹†åˆ†å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒé…ç½®" class="router-link-active router-link-exact-active toc-link level2">1.10 æ‹†åˆ†å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒé…ç½®</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-10-1-å…¬å…±è·¯å¾„" class="router-link-active router-link-exact-active toc-link level3">1.10.1 å…¬å…±è·¯å¾„</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-10-2-ç¯å¢ƒå˜é‡" class="router-link-active router-link-exact-active toc-link level3">1.10.2 ç¯å¢ƒå˜é‡</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-10-3-æ‹†åˆ†é…ç½®æ–‡ä»¶" class="router-link-active router-link-exact-active toc-link level3">1.10.3 æ‹†åˆ†é…ç½®æ–‡ä»¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-10-4-npm-è„šæœ¬" class="router-link-active router-link-exact-active toc-link level3">1.10.4 npm è„šæœ¬</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-10-5-æå–å…¬å…±é…ç½®" class="router-link-active router-link-exact-active toc-link level3">1.10.5 æå–å…¬å…±é…ç½®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_1-10-6-åˆå¹¶é…ç½®æ–‡ä»¶" class="router-link-active router-link-exact-active toc-link level3">1.10.6 åˆå¹¶é…ç½®æ–‡ä»¶</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-1-æé«˜å¼€å‘æ•ˆç‡-å®Œå–„å›¢é˜Ÿå¼€å‘è§„èŒƒ" class="router-link-active router-link-exact-active toc-link level2">2.1 æé«˜å¼€å‘æ•ˆç‡ï¼Œå®Œå–„å›¢é˜Ÿå¼€å‘è§„èŒƒ</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-1-1-source-map" class="router-link-active router-link-exact-active toc-link level3">2.1.1 source-map</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-1-2-devserver" class="router-link-active router-link-exact-active toc-link level3">2.1.2 devServer</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-1-3-æ¨¡å—çƒ­æ›¿æ¢ä¸çƒ­åŠ è½½" class="router-link-active router-link-exact-active toc-link level3">2.1.3 æ¨¡å—çƒ­æ›¿æ¢ä¸çƒ­åŠ è½½</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-1-4-eslint" class="router-link-active router-link-exact-active toc-link level3">2.1.4 eslint</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-1-5-git-hooks-ä¸-husky" class="router-link-active router-link-exact-active toc-link level3">2.1.5 git-hooks ä¸ husky</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-2-æ¨¡å—ä¸ä¾èµ–" class="router-link-active router-link-exact-active toc-link level2">2.2 æ¨¡å—ä¸ä¾èµ–</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-2-1-webpack-æ¨¡å—ä¸è§£æåŸç†" class="router-link-active router-link-exact-active toc-link level3">2.2.1 Webpack æ¨¡å—ä¸è§£æåŸç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-2-2-æ¨¡å—è§£æ-resolve" class="router-link-active router-link-exact-active toc-link level3">2.2.2 æ¨¡å—è§£æ(resolve)</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-2-3-å¤–éƒ¨æ‰©å±•-externals" class="router-link-active router-link-exact-active toc-link level3">2.2.3 å¤–éƒ¨æ‰©å±•(Externals)</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-2-4-ä¾èµ–å›¾-dependency-graph" class="router-link-active router-link-exact-active toc-link level3">2.2.4 ä¾èµ–å›¾(dependency graph)</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-3-æ‰©å±•åŠŸèƒ½" class="router-link-active router-link-exact-active toc-link level2">2.3 æ‰©å±•åŠŸèƒ½</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-3-1-postcss-ä¸-css-æ¨¡å—" class="router-link-active router-link-exact-active toc-link level3">2.3.1 PostCSS ä¸ CSS æ¨¡å—</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-3-2-web-works" class="router-link-active router-link-exact-active toc-link level3">2.3.2 Web Works</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-3-3-typescript" class="router-link-active router-link-exact-active toc-link level3">2.3.3 TypeScript</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-4-å¤šé¡µé¢åº”ç”¨" class="router-link-active router-link-exact-active toc-link level2">2.4 å¤šé¡µé¢åº”ç”¨</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-4-1-entry-é…ç½®" class="router-link-active router-link-exact-active toc-link level3">2.4.1 entry é…ç½®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-4-2-é…ç½®-index-html-æ¨¡æ¿" class="router-link-active router-link-exact-active toc-link level3">2.4.2 é…ç½® index.html æ¨¡æ¿</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-4-3-å¤šé¡µé¢åº”ç”¨" class="router-link-active router-link-exact-active toc-link level3">2.4.3 å¤šé¡µé¢åº”ç”¨</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-5-tree-shaking" class="router-link-active router-link-exact-active toc-link level2">2.5 Tree shaking</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-5-1-tree-shaking-å®éªŒ" class="router-link-active router-link-exact-active toc-link level3">2.5.1 tree-shaking å®éªŒ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-5-2-sideeffects" class="router-link-active router-link-exact-active toc-link level3">2.5.2 sideEffects</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-6-æ¸è¿›å¼ç½‘ç»œåº”ç”¨ç¨‹åº-pwa" class="router-link-active router-link-exact-active toc-link level2">2.6 æ¸è¿›å¼ç½‘ç»œåº”ç”¨ç¨‹åº PWA</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-6-1-éç¦»çº¿ç¯å¢ƒä¸‹è¿è¡Œ" class="router-link-active router-link-exact-active toc-link level3">2.6.1 éç¦»çº¿ç¯å¢ƒä¸‹è¿è¡Œ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-6-2-æ·»åŠ -workbox" class="router-link-active router-link-exact-active toc-link level3">2.6.2 æ·»åŠ  Workbox</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-6-3-æ³¨å†Œ-service-worker" class="router-link-active router-link-exact-active toc-link level3">2.6.3 æ³¨å†Œ Service Worker</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-7-shimming-é¢„ç½®ä¾èµ–" class="router-link-active router-link-exact-active toc-link level2">2.7 shimming é¢„ç½®ä¾èµ–</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-7-1-shimming-é¢„ç½®å…¨å±€å˜é‡" class="router-link-active router-link-exact-active toc-link level3">2.7.1 Shimming é¢„ç½®å…¨å±€å˜é‡</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-7-2-ç»†ç²’åº¦-shimming" class="router-link-active router-link-exact-active toc-link level3">2.7.2 ç»†ç²’åº¦ Shimming</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-7-3-å…¨å±€-exports" class="router-link-active router-link-exact-active toc-link level3">2.7.3 å…¨å±€ Exports</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-7-4-åŠ è½½-polyfills" class="router-link-active router-link-exact-active toc-link level3">2.7.4 åŠ è½½ Polyfills</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-7-5-è¿›ä¸€æ­¥ä¼˜åŒ–-polyfills" class="router-link-active router-link-exact-active toc-link level3">2.7.5 è¿›ä¸€æ­¥ä¼˜åŒ– Polyfills</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-8-åˆ›å»º-library" class="router-link-active router-link-exact-active toc-link level2">2.8 åˆ›å»º library</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-8-1-åˆ›å»ºä¸€ä¸ª-library" class="router-link-active router-link-exact-active toc-link level3">2.8.1 åˆ›å»ºä¸€ä¸ª library</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-8-2-webpack-é…ç½®" class="router-link-active router-link-exact-active toc-link level3">2.8.2 Webpack é…ç½®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-8-3-å¯¼å‡º-library" class="router-link-active router-link-exact-active toc-link level3">2.8.3 å¯¼å‡º Library</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-8-4-å¤–éƒ¨åŒ–-lodash" class="router-link-active router-link-exact-active toc-link level3">2.8.4 å¤–éƒ¨åŒ– lodash</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-8-5-å¤–éƒ¨åŒ–é™åˆ¶" class="router-link-active router-link-exact-active toc-link level3">2.8.5 å¤–éƒ¨åŒ–é™åˆ¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-8-6-ä¼˜åŒ–è¾“å‡º" class="router-link-active router-link-exact-active toc-link level3">2.8.6 ä¼˜åŒ–è¾“å‡º</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-8-7-å‘å¸ƒä¸º-npm-package" class="router-link-active router-link-exact-active toc-link level3">2.8.7 å‘å¸ƒä¸º npm package</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-9-æ¨¡å—è”é‚¦" class="router-link-active router-link-exact-active toc-link level2">2.9 æ¨¡å—è”é‚¦</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-9-1-ä»€ä¹ˆæ˜¯æ¨¡å—è”é‚¦" class="router-link-active router-link-exact-active toc-link level3">2.9.1 ä»€ä¹ˆæ˜¯æ¨¡å—è”é‚¦</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-9-2-åº”ç”¨æ¡ˆä¾‹" class="router-link-active router-link-exact-active toc-link level3">2.9.2 åº”ç”¨æ¡ˆä¾‹</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-10-æå‡æ„å»ºæ€§èƒ½" class="router-link-active router-link-exact-active toc-link level2">2.10 æå‡æ„å»ºæ€§èƒ½</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-10-1-é€šç”¨ç¯å¢ƒ" class="router-link-active router-link-exact-active toc-link level3">2.10.1 é€šç”¨ç¯å¢ƒ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-10-2-å¼€å‘ç¯å¢ƒ" class="router-link-active router-link-exact-active toc-link level3">2.10.2 å¼€å‘ç¯å¢ƒ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/TuziNotes/tool/webpack/webpack5%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97-V1.0.html#_2-10-3-ç”Ÿäº§ç¯å¢ƒ" class="router-link-active router-link-exact-active toc-link level3">2.10.3 ç”Ÿäº§ç¯å¢ƒ</a></li><!----><!--]--></ul><!--]--></ul></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h1 id="_0-è¯¾ç¨‹ä»‹ç»" tabindex="-1"><a class="header-anchor" href="#_0-è¯¾ç¨‹ä»‹ç»" aria-hidden="true">#</a> 0.è¯¾ç¨‹ä»‹ç»</h1><p>åœ¨è®²è¿°æœ¬èŠ‚è¯¾ç¨‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼š</p><blockquote><p>ä¸ºä»€ä¹ˆå­¦ä¹  webpack?</p></blockquote><p>å¦‚æœä½ å°šæ²¡æœ‰æ¥è§¦è¿‡ webpackï¼Œé‚£ä¹ˆä½ å¯¹æ„å»ºå’Œæ‰“åŒ…çš„æ¦‚å¿µææ€•æ˜¯æ¨¡ç³Šä¸æ¸…çš„ã€‚ ä½ å¯èƒ½æ›´ä¹ æƒ¯ä½¿ç”¨å¼€ç®±å³ç”¨çš„è„šæ‰‹æ¶æ¥ç”Ÿæˆä½ çš„é¡¹ç›®é…ç½®ï¼Œæˆ–è€…è¿­ä»£ç€æŸä¸ªé¡¹ç›®çš„ä¸šåŠ¡ï¼Œå´å¯¹å®ƒçš„å¼€å‘/ç”Ÿäº§ç¯å¢ƒæ­å»ºçŸ¥ä¹‹ç”šå°‘ã€‚</p><p>è¦çŸ¥é“ï¼Œå‰ç«¯æ¶æ„æœ€é‡è¦çš„ç‚¹å°±åœ¨äºå‰ç«¯å·¥ç¨‹åŒ–ï¼Œè€Œ webpack åˆ™æ˜¯æˆ‘ä»¬æ­å»ºå‰ç«¯å·¥ç¨‹åŒ–ç¯å¢ƒçš„ä¸€ä¸ªæŠ€æœ¯é€‰å‹ã€‚</p><p>é‚£ä¹ˆä¸ºä»€ä¹ˆæ˜¯ webpack å‘¢?</p><p>åœ¨ github ä¸Šæœç´¢ webpack çš„æ—¶å€™ï¼Œrepositories çš„æ•°é‡æ˜¯ 157kã€‚</p><p>äº‹å®ä¸Šï¼Œæ— è®ºæ˜¯å¼€æºé¡¹ç›®è¿˜æ˜¯ä¼ä¸šé¡¹ç›®ï¼Œæœ€ä¸»æµçš„å‰ç«¯å·¥ç¨‹åŒ–æ–¹æ¡ˆçš„æŠ€æœ¯é€‰å‹éƒ½æ˜¯ webpackã€‚ è€Œå…¨æ–°ç‰ˆæœ¬çš„ webpack5ï¼Œåˆ™æ˜¯å…·å¤‡äº†æ¯”ä»¥å¾€ç‰ˆæœ¬æ›´å¼ºå¤§çš„åŠŸèƒ½ï¼Œç”šè‡³æ˜¯è¯¸å¤šä¼ä¸šçº§å‰ç«¯å·¥ç¨‹åŒ–æŠ€æœ¯é€‰å‹çš„ä¸äºŒé€‰æ‹©ã€‚</p><h3 id="_0-1-å­¦ä¹ å‰æ" tabindex="-1"><a class="header-anchor" href="#_0-1-å­¦ä¹ å‰æ" aria-hidden="true">#</a> 0.1 å­¦ä¹ å‰æ</h3><blockquote><p>å­¦ä¹  webpack5 éœ€è¦ä»€ä¹ˆå‰æï¼Ÿ</p></blockquote><p>åœ¨å­¦ä¹ æœ¬è¯¾ç¨‹ä¹‹å‰ï¼ŒæœŸæœ›ä½ èƒ½å…·å¤‡å‰ç«¯çš„åŸºç¡€çŸ¥è¯†å¦‚ htmlï¼Œcssï¼Œes6+ã€‚å¦‚æœå¯¹ Node.js å’Œå·¥ç¨‹åŒ–æœ‰ä¸€å®šäº†è§£çš„è¯ï¼Œé‚£å°±æ›´å¥½ä¸è¿‡äº†ã€‚</p><h3 id="_0-2-æˆè¯¾æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#_0-2-æˆè¯¾æ–¹å¼" aria-hidden="true">#</a> 0.2 æˆè¯¾æ–¹å¼</h3><p>åœ¨æœ¬è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†é€šè¿‡å‰åå‘¼åº”çš„ demo æ¥ä¸€æ­¥æ­¥ä» 0 åˆ° 1 åœ°è¿›è¡Œ webpack5 æ•™å­¦ï¼Œåœ¨è¯¾ç¨‹åæœŸæˆ‘ä»¬ä¹Ÿå°†å­¦åˆ°æ›´ä½å±‚çš„åŸç†çŸ¥è¯†ã€‚ä»è€Œåšåˆ°çŸ¥å…¶ç„¶å¹¶çŸ¥å…¶æ‰€ä»¥ç„¶çš„ç²¾ç†ŸæŒæ¡ç¨‹åº¦ã€‚</p><h3 id="_0-3-è¯¾ç¨‹å—ä¼—" tabindex="-1"><a class="header-anchor" href="#_0-3-è¯¾ç¨‹å—ä¼—" aria-hidden="true">#</a> 0.3 è¯¾ç¨‹å—ä¼—</h3><p>webpack5 è¯¾ç¨‹é€‚ç”¨äºæœ‰ä¸€å®šå‰ç«¯çŸ¥è¯†åŸºç¡€çš„å‰ç«¯å­¦ä¹ è€…åŠä»ä¸šè€…â€”â€”æ¯”å¦‚ä¸­é«˜çº§å‰ç«¯å·¥ç¨‹å¸ˆã€‚å¦‚æœä½ å¯¹ webpack ä¸ç”šäº†è§£ï¼Œä½†åˆç»å¸¸æ¥è§¦ webpack é…ç½®ç›¸å…³çš„é¡¹ç›®ï¼Œé‚£ä¹ˆæ¯«æ— ç–‘é—®ï¼Œä½ æ­¤æ—¶æ­£éœ€è¦å­¦ä¹ å®ƒã€‚</p><h3 id="_0-4-è¯¾ç¨‹å®‰æ’" tabindex="-1"><a class="header-anchor" href="#_0-4-è¯¾ç¨‹å®‰æ’" aria-hidden="true">#</a> 0.4 è¯¾ç¨‹å®‰æ’</h3><p>æ¥ä¸‹æ¥æˆ‘ä»¬äº†è§£ä¸‹æˆ‘ä»¬çš„ webpack5 è¯¾ç¨‹å®‰æ’: æˆ‘ä»¬çš„ webpack5 è¯¾ç¨‹åˆ†ä¸ºå››å¤§éƒ¨åˆ†ï¼Œåˆ†åˆ«æ˜¯ webpack åŸºç¡€åº”ç”¨ç¯‡ï¼Œwebpack é«˜çº§åº”ç”¨ç¯‡ï¼Œwebpack é¡¹ç›®å®æˆ˜ç¯‡ä»¥åŠ webpack å†…éƒ¨åŸç†ç¯‡ã€‚ (é…å›¾) å…¶ä¸­ï¼Œåœ¨åŸºç¡€åº”ç”¨ç¯‡æˆ‘ä»¬å°†å­¦ä¹ åˆ° webpack çš„åŸºç¡€é…ç½®æ–¹æ¡ˆï¼ŒæŒæ¡ webpack çš„å„ç§åŸºç¡€é…ç½®é¡¹æ‰€å¯¹åº”çš„åŠŸèƒ½ã€‚ è€Œåœ¨é«˜çº§åº”ç”¨ç¯‡ï¼Œæˆ‘ä»¬å°†å…·ä½“åˆ†æ webpack çš„æ¯ä¸ªé…ç½®é¡¹ï¼Œä»¥åŠæŒ‰éœ€é›†æˆå·¥ç¨‹åŒ–æ¨¡å—ï¼Œä»è€ŒæŒæ¡å®šåˆ¶é¡¹ç›®é…ç½®çš„æ‰‹æ®µã€‚ åœ¨é¡¹ç›®åº”ç”¨ç¯‡ä¸­ï¼Œæˆ‘ä»¬å°†ç»“åˆå…·ä½“çš„é¡¹ç›®æ¡ˆä¾‹ï¼Œé€šè¿‡åº”ç”¨æˆ‘ä»¬ä¹‹å‰å­¦åˆ°çš„ webpack æŠ€æœ¯ï¼Œæ¥å®šåˆ¶é¡¹ç›®çš„å·¥ç¨‹åŒ–ç¯å¢ƒã€‚çœŸåˆ‡åœ°åšåˆ°å­¦ä»¥è‡´ç”¨ã€‚ æœ€ååœ¨å†…éƒ¨åŸç†ç¯‡ä¸­ï¼Œæˆ‘ä»¬å°†å¯¹ webpack è¿›è¡Œå†…éƒ¨åŸç†å‰–æï¼ŒæŒæ¡ webpack æ‰“åŒ…æŠ€æœ¯çš„åº•å±‚å®ç°ã€‚</p><h3 id="_0-5-è¯¾ç¨‹æ”¶è·" tabindex="-1"><a class="header-anchor" href="#_0-5-è¯¾ç¨‹æ”¶è·" aria-hidden="true">#</a> 0.5 è¯¾ç¨‹æ”¶è·</h3><p>å­¦ä¹ æœ¬è¯¾ç¨‹åï¼Œä¼šè·å¾—é‚£äº›æ”¶è·ï¼Ÿ</p><ol><li>é¦–å…ˆé€šè¿‡æœ¬è¯¾ç¨‹ï¼Œä½ å°†å­¦ä¼š webpack é…ç½®ï¼Œå¹¶æ‹¥æœ‰å·¥ç¨‹åŒ–çš„å‰ç«¯æ€ç»´ï¼Œç†è§£ webpack åœ¨å‰ç«¯å·¥ç¨‹åŒ–é¢†åŸŸçš„ä½œç”¨åŠåŸç†ã€‚</li><li>ä½ å°†èƒ½å¤Ÿå‚ä¸é¡¹ç›®çš„æ‰“åŒ…é…ç½®ï¼Œä»å·¥ç¨‹åŒ–å±‚é¢æ¥ä¼˜åŒ–å¼€å‘ç¯å¢ƒã€é¡¹ç›®æ€§èƒ½ï¼Œè½åœ°é¢å‘å‰ç«¯ä¸šåŠ¡çš„æŠ€æœ¯æ–¹æ¡ˆã€‚</li><li>å­¦ä¹ äº† webpackï¼Œæˆ‘ä»¬å°±å…·å¤‡äº†é¢å‘å‰ç«¯æ¶æ„çš„æ ¸å¿ƒç«äº‰åŠ›ã€‚</li></ol><p>æœ€åï¼Œå°±è®©æˆ‘ä»¬æ­£å¼è¿›å…¥åˆ° webpack5 çš„å­¦ä¹ è¯¾ç¨‹ã€‚</p><h1 id="ä¸€ã€åŸºç¡€åº”ç”¨ç¯‡" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€åŸºç¡€åº”ç”¨ç¯‡" aria-hidden="true">#</a> ä¸€ã€åŸºç¡€åº”ç”¨ç¯‡</h1><h2 id="_1-1-ä¸ºä»€ä¹ˆéœ€è¦-webpack" tabindex="-1"><a class="header-anchor" href="#_1-1-ä¸ºä»€ä¹ˆéœ€è¦-webpack" aria-hidden="true">#</a> 1.1 ä¸ºä»€ä¹ˆéœ€è¦ Webpack</h2><p>æƒ³è¦ç†è§£ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ webpackï¼Œæˆ‘ä»¬å…ˆå›é¡¾ä¸‹å†å²ï¼Œåœ¨æ‰“åŒ…å·¥å…·å‡ºç°ä¹‹å‰ï¼Œæˆ‘ä»¬æ˜¯å¦‚ä½•åœ¨ web ä¸­ä½¿ç”¨ JavaScript çš„ã€‚åœ¨æµè§ˆå™¨ä¸­è¿è¡Œ JavaScript æœ‰ä¸¤ç§æ–¹æ³•ï¼š</p><p><strong>ç¬¬ä¸€ç§æ–¹å¼</strong>ï¼Œå¼•ç”¨ä¸€äº›è„šæœ¬æ¥å­˜æ”¾æ¯ä¸ªåŠŸèƒ½ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ä¸ªæ–‡æ¡£ï¼š</p><blockquote><p><strong>01-why-webpack/index-1.html</strong></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>åƒé”‹å¤§å‰ç«¯æ•™ç ”é™¢-Webpack5å­¦ä¹ æŒ‡å—<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
		<span class="token comment">&lt;!-- HTML ä»£ç  --&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>æˆ‘çš„HTMLä»£ç <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

		<span class="token comment">&lt;!-- å¼•å…¥å¤–éƒ¨çš„ JavaScript æ–‡ä»¶ --&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://cdn.bootcdn.net/ajax/libs/lodash.js/4.17.21/lodash.core.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.0.2/js/bootstrap.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

		<span class="token comment">&lt;!-- å¼•å…¥æˆ‘è‡ªå·±çš„ JavaScript æ–‡ä»¶ --&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./scripts/common.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./scripts/user.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./scripts/authentication.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./scripts/product.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./scripts/inventory.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./scripts/payment.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./scripts/checkout.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./scripts/shipping.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>æ­¤è§£å†³æ–¹æ¡ˆå¾ˆéš¾æ‰©å±•ï¼Œå› ä¸ºåŠ è½½å¤ªå¤šè„šæœ¬ä¼šå¯¼è‡´ç½‘ç»œç“¶é¢ˆã€‚åŒæ—¶å¦‚æœä½ ä¸å°å¿ƒæ›´æ”¹äº† JavaScript æ–‡ä»¶çš„åŠ è½½é¡ºåºï¼Œè¿™ä¸ªé¡¹ç›®å¯èƒ½è¦å´©æºƒã€‚</p><p><strong>ç¬¬äºŒç§æ–¹å¼</strong>ï¼Œä½¿ç”¨ä¸€ä¸ªåŒ…å«æ‰€æœ‰é¡¹ç›®ä»£ç çš„å¤§å‹ <code>.js</code> æ–‡ä»¶, å¯¹ä¸Šé¢çš„æ–‡æ¡£åšæ”¹è¿›ï¼š</p><blockquote><p><strong>01-why-webpack/index-2.html</strong></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>åƒé”‹å¤§å‰ç«¯æ•™ç ”é™¢-Webpack5å­¦ä¹ æŒ‡å—<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
		<span class="token comment">&lt;!-- HTML ä»£ç  --&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>æˆ‘çš„HTMLä»£ç <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

		<span class="token comment">&lt;!-- å¼•å…¥æˆ‘è‡ªå·±çš„ JavaScript æ–‡ä»¶ --&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./scripts/bundle.33520ba89e.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>è¿™ç§æ–¹å¼è§£å†³äº†æ–¹å¼ä¸€çš„é—®é¢˜ï¼Œä½†ä¼šå¯¼è‡´ä½œç”¨åŸŸã€æ–‡ä»¶å¤§å°ã€å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§æ–¹é¢çš„é—®é¢˜ã€‚å¦‚ä½•è§£å†³è¿™äº›é—®é¢˜ï¼Œè¯·å¾€ä¸‹é˜…è¯»ã€‚</p><h3 id="_1-1-1-å¦‚ä½•è§£å†³ä½œç”¨åŸŸé—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_1-1-1-å¦‚ä½•è§£å†³ä½œç”¨åŸŸé—®é¢˜" aria-hidden="true">#</a> 1.1.1 å¦‚ä½•è§£å†³ä½œç”¨åŸŸé—®é¢˜</h3><p>æ—©å…ˆå‰ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>Grunt</code> å’Œ <code>Gulp</code> ä¸¤ä¸ªå·¥å…·æ¥ç®¡ç†æˆ‘ä»¬é¡¹ç›®çš„èµ„æºã€‚</p><img src="http://raink.net:8080/md-images/webpack5/grunt-logo.png" width="200" style="display:inline-block;"><img src="http://raink.net:8080/md-images/webpack5/gulp-logo.png" width="200" style="display:inline-block;"><p>è¿™ä¸¤ä¸ªå·¥å…·ç§°ä¸ºä»»åŠ¡æ‰§è¡Œå™¨ï¼Œå®ƒä»¬å°†æ‰€æœ‰é¡¹ç›®æ–‡ä»¶æ‹¼æ¥åœ¨ä¸€èµ·ã€‚åˆ©ç”¨äº†<code>ç«‹å³è°ƒç”¨å‡½æ•°è¡¨è¾¾å¼(IIFE) - Immediately invoked function expressions</code>, è§£å†³äº†å¤§å‹é¡¹ç›®çš„ä½œç”¨åŸŸé—®é¢˜ï¼›å½“è„šæœ¬æ–‡ä»¶è¢«å°è£…åœ¨ IIFE å†…éƒ¨æ—¶ï¼Œä½ å¯ä»¥å®‰å…¨åœ°æ‹¼æ¥æˆ–å®‰å…¨åœ°ç»„åˆæ‰€æœ‰æ–‡ä»¶ï¼Œè€Œä¸å¿…æ‹…å¿ƒä½œç”¨åŸŸå†²çªã€‚</p><p>ä»€ä¹ˆæ˜¯ IIFEï¼Œå‚è§ä¸‹é¢çš„ä»£ç ï¼š</p><blockquote><ul><li>å½“å‡½æ•°å˜æˆç«‹å³æ‰§è¡Œçš„å‡½æ•°è¡¨è¾¾å¼æ—¶ï¼Œè¡¨è¾¾å¼ä¸­çš„å˜é‡ä¸èƒ½ä»å¤–éƒ¨è®¿é—®ã€‚</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&#39;Barry&#39;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// æ— æ³•ä»å¤–éƒ¨è®¿é—®å˜é‡ name</span>
name<span class="token punctuation">;</span> <span class="token comment">// æŠ›å‡ºé”™è¯¯ï¼š&quot;Uncaught ReferenceError: name is not defined&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å°† IIFE åˆ†é…ç»™ä¸€ä¸ªå˜é‡ï¼Œä¸æ˜¯å­˜å‚¨ IIFE æœ¬èº«ï¼Œè€Œæ˜¯å­˜å‚¨ IIFE æ‰§è¡Œåè¿”å›çš„ç»“æœã€‚</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&#39;Barry&#39;</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// IIFE æ‰§è¡Œåè¿”å›çš„ç»“æœï¼š</span>
result<span class="token punctuation">;</span> <span class="token comment">// &quot;Barry&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p><code>Grunt</code>ï¼Œ<code>Gulp</code> è§£å†³äº†ä½œç”¨åŸŸé—®é¢˜ã€‚ä½†æ˜¯ï¼Œä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶æ„å‘³ç€å¿…é¡»é‡æ–°æ„å»ºæ•´ä¸ªæ–‡ä»¶ã€‚æ‹¼æ¥å¯ä»¥åšåˆ°å¾ˆå®¹æ˜“åœ°è·¨æ–‡ä»¶é‡ç”¨è„šæœ¬ï¼Œå´ä½¿æ„å»ºç»“æœçš„ä¼˜åŒ–å˜å¾—æ›´åŠ å›°éš¾ã€‚å¦‚ä½•åˆ¤æ–­ä»£ç æ˜¯å¦å®é™…è¢«ä½¿ç”¨ï¼Ÿ</p><p>å³ä½¿ä½ åªç”¨åˆ° lodash ä¸­çš„æŸä¸ªå‡½æ•°ï¼Œä¹Ÿå¿…é¡»åœ¨æ„å»ºç»“æœä¸­åŠ å…¥æ•´ä¸ªåº“ï¼Œç„¶åå°†å®ƒä»¬å‹ç¼©åœ¨ä¸€èµ·ã€‚å¤§è§„æ¨¡åœ°å®ç°å»¶è¿ŸåŠ è½½ä»£ç å—åŠæ— ç”¨ä»£ç çš„å»é™¤ï¼Œéœ€è¦å¼€å‘äººå‘˜æ‰‹åŠ¨åœ°è¿›è¡Œå¤§é‡å·¥ä½œã€‚</p><blockquote><p><strong>01-why-webpack/index-3.html</strong></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://cdn.bootcdn.net/ajax/libs/lodash.js/4.17.21/lodash.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>åƒé”‹å¤§å‰ç«¯æ•™ç ”é™¢-Webpack5å­¦ä¹ æŒ‡å—<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
			<span class="token comment">// è¿™é‡Œæˆ‘ä»¬åªä½¿ç”¨äº†ä¸€ä¸ªjoinå‡½æ•°ï¼Œç¡®è¦å¼•å…¥æ•´ä¸ªlodashåº“</span>
			<span class="token keyword">const</span> str <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;åƒé”‹å¤§å‰ç«¯æ•™ç ”é™¢&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Webpack5å­¦ä¹ æŒ‡å—&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#39;-&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
		</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h3 id="_1-1-2-å¦‚ä½•è§£å†³ä»£ç æ‹†åˆ†é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_1-1-2-å¦‚ä½•è§£å†³ä»£ç æ‹†åˆ†é—®é¢˜" aria-hidden="true">#</a> 1.1.2 å¦‚ä½•è§£å†³ä»£ç æ‹†åˆ†é—®é¢˜</h3><p>æ„Ÿè°¢ <code>Node.js</code>ï¼Œ<strong>JavaScript æ¨¡å—</strong>è¯ç”Ÿäº†ï¼</p><p>Node.js æ˜¯ä¸€ä¸ª JavaScript è¿è¡Œæ—¶ï¼Œå¯ä»¥åœ¨æµè§ˆå™¨ç¯å¢ƒä¹‹å¤–çš„è®¡ç®—æœºå’ŒæœåŠ¡å™¨ä¸­ä½¿ç”¨ã€‚webpack è¿è¡Œåœ¨ Node.js ä¸­ã€‚</p><p>å½“ Node.js å‘å¸ƒæ—¶ï¼Œä¸€ä¸ªæ–°çš„æ—¶ä»£å¼€å§‹äº†ï¼Œå®ƒå¸¦æ¥äº†æ–°çš„æŒ‘æˆ˜ã€‚æ—¢ç„¶ä¸æ˜¯åœ¨æµè§ˆå™¨ä¸­è¿è¡Œ JavaScriptï¼Œç°åœ¨å·²ç»æ²¡æœ‰äº†å¯ä»¥æ·»åŠ åˆ°æµè§ˆå™¨ä¸­çš„ html æ–‡ä»¶å’Œ script æ ‡ç­¾ã€‚é‚£ä¹ˆ Node.js åº”ç”¨ç¨‹åºè¦å¦‚ä½•åŠ è½½æ–°çš„ä»£ç æ–‡ä»¶å‘¢ï¼Ÿ</p><p>CommonJS é—®ä¸–å¹¶å¼•å…¥äº† <code>require</code> æœºåˆ¶ï¼Œå®ƒå…è®¸ä½ åœ¨å½“å‰æ–‡ä»¶ä¸­åŠ è½½å’Œä½¿ç”¨æŸä¸ªæ¨¡å—ã€‚å¯¼å…¥éœ€è¦çš„æ¯ä¸ªæ¨¡å—ï¼Œè¿™ä¸€å¼€ç®±å³ç”¨çš„åŠŸèƒ½ï¼Œå¸®åŠ©æˆ‘ä»¬è§£å†³äº†ä»£ç æ‹†åˆ†çš„é—®é¢˜ã€‚</p><img src="http://raink.net:8080/md-images/webpack5/common-js.jpeg"><p><code>Node.js</code> å·²ç»æˆä¸ºä¸€ç§è¯­è¨€ã€ä¸€ä¸ªå¹³å°å’Œä¸€ç§å¿«é€Ÿå¼€å‘å’Œåˆ›å»ºå¿«é€Ÿåº”ç”¨ç¨‹åºçš„æ–¹å¼ï¼Œæ¥ç®¡äº†æ•´ä¸ª <code>JavaScript</code> ä¸–ç•Œã€‚</p><p>ä½† CommonJS æ²¡æœ‰æµè§ˆå™¨æ”¯æŒã€‚æ²¡æœ‰ <a href="https://medium.com/webpack/the-state-of-javascript-modules-4636d1774358" target="_blank" rel="noopener noreferrer">live binding(å®æ—¶ç»‘å®š)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚å¾ªç¯å¼•ç”¨å­˜åœ¨é—®é¢˜ã€‚åŒæ­¥æ‰§è¡Œçš„æ¨¡å—è§£æåŠ è½½å™¨é€Ÿåº¦å¾ˆæ…¢ã€‚è™½ç„¶ CommonJS æ˜¯ Node.js é¡¹ç›®çš„ç»ä½³è§£å†³æ–¹æ¡ˆï¼Œä½†æµè§ˆå™¨ä¸æ”¯æŒæ¨¡å—ï¼Œæˆ‘ä»¬ä¼¼ä¹åˆé‡åˆ°äº†æ–°é—®é¢˜ã€‚</p><h3 id="_1-1-3-å¦‚ä½•è®©æµè§ˆå™¨æ”¯æŒæ¨¡å—" tabindex="-1"><a class="header-anchor" href="#_1-1-3-å¦‚ä½•è®©æµè§ˆå™¨æ”¯æŒæ¨¡å—" aria-hidden="true">#</a> 1.1.3 å¦‚ä½•è®©æµè§ˆå™¨æ”¯æŒæ¨¡å—</h3><p>åœ¨æ—©æœŸï¼Œæˆ‘ä»¬åº”ç”¨<code>Browserify</code>å’Œ <code>RequireJS</code> ç­‰æ‰“åŒ…å·¥å…·ç¼–å†™èƒ½å¤Ÿåœ¨æµè§ˆå™¨ä¸­è¿è¡Œçš„ CommonJS æ¨¡å—:</p><img src="http://raink.net:8080/md-images/webpack5/browserify.png" align="left" width="300"><img src="http://raink.net:8080/md-images/webpack5/require-logo.png" align="left"><p>ç›®å‰ï¼Œæˆ‘ä»¬è¿˜æœ‰ä¸€ä¸ªé€‰æ‹©ï¼Œå°±æ˜¯æ¥è‡ª Web é¡¹ç›®çš„å¥½æ¶ˆæ¯æ˜¯ï¼Œæ¨¡å—æ­£åœ¨æˆä¸º ECMAScript æ ‡å‡†çš„å®˜æ–¹åŠŸèƒ½ã€‚ç„¶è€Œï¼Œæµè§ˆå™¨æ”¯æŒä¸å®Œæ•´ï¼Œç‰ˆæœ¬è¿­ä»£é€Ÿåº¦ä¹Ÿä¸å¤Ÿå¿«ï¼Œè¿˜æ˜¯æ¨èä¸Šé¢ä¸¤ä¸ªæ—©æœŸæ¨¡å—å®ç°ã€‚æ—©æœŸçš„ä»»åŠ¡æ„å»ºå·¥å…·åŸºäº Google çš„ Closure ç¼–è¯‘å™¨ï¼Œè¦æ±‚æˆ‘ä»¬æ‰‹åŠ¨åœ¨é¡¶éƒ¨å£°æ˜æ‰€æœ‰çš„ä¾èµ–ï¼Œå¼€å‘ä½“éªŒä¸å¥½ã€‚</p><h3 id="_1-1-4-webpack-æå®šè¿™ä¸€åˆ‡" tabindex="-1"><a class="header-anchor" href="#_1-1-4-webpack-æå®šè¿™ä¸€åˆ‡" aria-hidden="true">#</a> 1.1.4 Webpack æå®šè¿™ä¸€åˆ‡</h3><p>æ˜¯å¦å¯ä»¥æœ‰ä¸€ç§æ–¹å¼ï¼Œä¸ä»…å¯ä»¥è®©æˆ‘ä»¬ç¼–å†™æ¨¡å—ï¼Œè€Œä¸”è¿˜æ”¯æŒä»»ä½•æ¨¡å—æ ¼å¼ï¼ˆè‡³å°‘åœ¨æˆ‘ä»¬åˆ°è¾¾ ESM ä¹‹å‰ï¼‰ï¼Œå¹¶ä¸”å¯ä»¥åŒæ—¶å¤„ç† <code>resource</code> å’Œ <code>assets</code>ï¼Ÿ</p><p>è¿™å°±æ˜¯ <code>webpack</code> å­˜åœ¨çš„åŸå› ã€‚å®ƒæ˜¯ä¸€ä¸ªå·¥å…·ï¼Œå¯ä»¥æ‰“åŒ…ä½ çš„ JavaScript åº”ç”¨ç¨‹åºï¼ˆæ”¯æŒ ESM å’Œ CommonJSï¼‰ï¼Œå¯ä»¥æ‰©å±•ä¸ºæ”¯æŒè®¸å¤šä¸åŒçš„é™æ€èµ„æºï¼Œä¾‹å¦‚ï¼š<code>images</code>, <code>fonts</code> å’Œ <code>stylesheets</code>ã€‚</p><p><code>webpack</code> å…³å¿ƒæ€§èƒ½å’ŒåŠ è½½æ—¶é—´ï¼›å®ƒå§‹ç»ˆåœ¨æ”¹è¿›æˆ–æ·»åŠ æ–°åŠŸèƒ½ï¼Œä¾‹å¦‚ï¼šå¼‚æ­¥åœ°åŠ è½½å’Œé¢„å…ˆåŠ è½½ä»£ç æ–‡ä»¶ï¼Œä»¥ä¾¿ä¸ºä½ çš„é¡¹ç›®å’Œç”¨æˆ·æä¾›æœ€ä½³ä½“éªŒã€‚</p><figure><img src="http://raink.net:8080/md-images/webpack5/image-webpack.png" alt="image-20210921075333974" tabindex="0" loading="lazy"><figcaption>image-20210921075333974</figcaption></figure><h3 id="_1-1-5-webpack-ä¸ç«å“" tabindex="-1"><a class="header-anchor" href="#_1-1-5-webpack-ä¸ç«å“" aria-hidden="true">#</a> 1.1.5 Webpack ä¸ç«å“</h3><ul><li>Webpack</li></ul><p><code>Webpack</code> ä¸ºå¤„ç†èµ„æºç®¡ç†å’Œåˆ†å‰²ä»£ç è€Œç”Ÿï¼Œå¯ä»¥åŒ…å«ä»»ä½•ç±»å‹çš„æ–‡ä»¶ã€‚çµæ´»ï¼Œæ’ä»¶å¤šã€‚</p><ul><li>Parcel</li></ul><p><code>Parcel</code> æ˜¯ 0 é…ç½®å·¥å…·ï¼Œ ç”¨æˆ·ä¸€èˆ¬æ— éœ€å†åšå…¶ä»–é…ç½®å³å¯å¼€ç®±å³ç”¨ã€‚</p><ul><li>Rollup</li></ul><p><code>Rollup</code> ç”¨æ ‡å‡†åŒ–çš„æ ¼å¼ï¼ˆes6ï¼‰æ¥å†™ä»£ç ï¼Œé€šè¿‡å‡å°‘æ­»ä»£ç å°½å¯èƒ½åœ°ç¼©å°åŒ…ä½“ç§¯ã€‚ä¸€èˆ¬åªç”¨æ¥æ‰“åŒ… JSã€‚</p><p><strong>å°ç»“è®ºï¼š</strong></p><p>æ„å»ºä¸€ä¸ªç®€å•çš„åº”ç”¨å¹¶è®©å®ƒå¿«é€Ÿè¿è¡Œèµ·æ¥ï¼Ÿä½¿ç”¨ Parcelã€‚</p><p>æ„å»ºä¸€ä¸ªç±»åº“åªéœ€è¦å¯¼å…¥å¾ˆå°‘ç¬¬ä¸‰æ–¹åº“ï¼Ÿä½¿ç”¨ Rollupã€‚</p><p>æ„å»ºä¸€ä¸ªå¤æ‚çš„åº”ç”¨ï¼Œéœ€è¦é›†æˆå¾ˆå¤šç¬¬ä¸‰æ–¹åº“ï¼Ÿéœ€è¦ä»£ç åˆ†æ‹†ï¼Œä½¿ç”¨é™æ€èµ„æºæ–‡ä»¶ï¼Œè¿˜æœ‰ CommonJS ä¾èµ–ï¼Ÿä½¿ç”¨ webpackã€‚</p><ul><li>Vite</li></ul><p>åœ¨åˆšåˆšç»“æŸçš„ VueConf2021 ä¸­ï¼Œé™¤äº† Vue 3.0 ä»¥å¤–ï¼Œå¦å¤–ä¸€ä¸ªäº®ç‚¹å°±æ˜¯ä¸‹ä¸€ä»£æ„å»ºå·¥å…· Vite äº†ã€‚</p><p>åœ¨å°¤é›¨æºªåˆ†äº«çš„ã€ <strong>Vue 3 ç”Ÿæ€è¿›å±•å’Œè®¡åˆ’</strong>ã€‘çš„æ¼”è®²ä¸­ï¼Œå°¤å¤§ç¥è¿˜ç‰¹æ„æåˆ° <strong>Vite å°†æˆä¸º Vue çš„ç°ä»£æ ‡é…</strong>ã€‚ç”šè‡³æœ€è¿‘æ–°æ¨å‡ºçš„ Petite Vue ä»å¼€å‘ã€ç¼–è¯‘ã€å‘å¸ƒã€Demo å‡ ä¹å…¨éƒ½æ˜¯ä½¿ç”¨ Vite å®Œæˆã€‚</p><img src="http://raink.net:8080/md-images/webpack5/vite.png" align="left"><p>Vite è¿™ç§åŸºäº ESmodule çš„æ„å»ºæ–¹å¼ä¼šæ—¥ç›Šå—åˆ°ç”¨æˆ·é’çï¼Œä¸ä»…å› ä¸º Vite æŒ‰éœ€ç¼–è¯‘ï¼Œçƒ­æ¨¡å—æ›¿æ¢ç­‰ç‰¹æ€§ï¼Œè¿˜æœ‰å…¶ä¸æ»‘çš„å¼€å‘ä½“éªŒä»¥åŠå’Œ Vue 3 çš„å®Œç¾ç»“åˆã€‚</p><p>æŒ‰ç…§è¿™ç§è¯´æ³•ï¼Œä¹Ÿè®¸æœ‰äººä¼šé—®ï¼šæ˜¯ä¸æ˜¯é©¬ä¸Š <strong>Webpack å°±è¦è¢«å–ä»£äº†ï¼Œ Vite çš„æ—¶ä»£å°±è¦åˆ°æ¥äº†å‘¢ï¼Ÿ</strong></p><p><strong>Webpackã€Vite</strong> ä½œä¸ºå‰ç«¯çƒ­é—¨çš„å·¥ç¨‹åŒ–æ„å»ºå·¥å…·ï¼Œå®ƒä»¬éƒ½æœ‰å„è‡ªçš„é€‚ç”¨åœºæ™¯ï¼Œå¹¶ä¸å­˜åœ¨â€œå–ä»£â€è¿™ä¸€è¯´æ³•ã€‚</p><h2 id="_1-2-å°è¯•-webpack" tabindex="-1"><a class="header-anchor" href="#_1-2-å°è¯•-webpack" aria-hidden="true">#</a> 1.2 å°è¯• Webpack</h2><h3 id="_1-2-1-å¼€å‘å‡†å¤‡" tabindex="-1"><a class="header-anchor" href="#_1-2-1-å¼€å‘å‡†å¤‡" aria-hidden="true">#</a> 1.2.1 å¼€å‘å‡†å¤‡</h3><p>åœ¨è¿›å…¥ Webpack ä¸–ç•Œä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥ç”¨åŸç”Ÿçš„æ–¹æ³•æ„å»ºä¸€ä¸ª Web åº”ç”¨ã€‚</p><p> ä¸€ä¸ª JavaScript æ–‡ä»¶ï¼Œç¼–å†™ä¸€æ®µé€šç”¨çš„å‡½æ•°<code>helloWorld</code>ï¼š</p><blockquote><p>02-setup-app/src/hello-world.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">helloWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Hello world&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>å†åˆ›å»ºä¸€ä¸ª JavaScript æ–‡ä»¶ï¼Œè°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼š</p><blockquote><p>02-setup-app/src/index.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">helloWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></blockquote><p>æœ€ååˆ›å»ºä¸€ä¸ª html é¡µé¢å»å¼•ç”¨è¿™ä¸¤ä¸ª JS æ–‡ä»¶ï¼š</p><blockquote><p>02-setup-app/index.html</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>åƒé”‹å¤§å‰ç«¯æ•™ç ”é™¢-Webpack5å­¦ä¹ æŒ‡å—<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
		<span class="token comment">&lt;!-- æ³¨æ„è¿™é‡Œçš„jsæ–‡ä»¶çš„å¼•ç”¨é¡ºåºè¦æ­£ç¡® --&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./src/index.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./src/hello-world.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>æ­£å¸¸åŒæ­¥çš„ JavaScript ä»£ç æ˜¯æŒ‰ç…§åœ¨é¡µé¢ä¸ŠåŠ è½½çš„é¡ºåºæ‰§è¡Œçš„ï¼Œä¸Šé¢ html æ–‡ä»¶å…ˆå¼•ç”¨ <code>index.js</code>æ–‡ä»¶ï¼Œåå¼•ç”¨ <code>hello-world.js</code> æ–‡ä»¶ï¼Œç”±äºä¸¤ä¸ªæ–‡ä»¶çš„ä»£ç å­˜åœ¨å…ˆå®šä¹‰åæ‰èƒ½è°ƒç”¨çš„é¡ºåºå…³ç³»ï¼Œæ‰€ä»¥æµè§ˆå™¨è¿è¡Œåä¼šæŠ¥ä»¥ä¸‹é”™è¯¯ï¼š</p><img src="http://raink.net:8080/md-images/webpack5/img-02-01.png" width="500" align="left"><p>è°ƒæ•´ JS æ–‡ä»¶çš„å¼•ç”¨é¡ºåºï¼š</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- æ³¨æ„è¿™é‡Œçš„jsæ–‡ä»¶çš„å¼•ç”¨é¡ºåºè¦æ­£ç¡® --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./src/hello-world.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./src/index.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨æµè§ˆå™¨è¿è¡Œåè¾“å‡ºå¦‚ä¸‹ï¼š</p><img src="http://raink.net:8080/md-images/webpack5/img-02-02.png" width="500" align="left"><p>å¦‚æœé¡µé¢å¼•ç”¨çš„ JS æ–‡ä»¶å¾ˆå°‘ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨çš„æ¥è°ƒæ•´é¡ºåºï¼Œä½†é¡µé¢ä¸€æ—¦å¼•ç”¨å¤§é‡çš„ JS æ–‡ä»¶ï¼Œè°ƒæ•´é¡ºåºçš„å¿ƒæ™ºè´Ÿæ‹…å’Œå·¥ä½œé‡å¯æƒ³è€ŒçŸ¥ï¼Œå¦‚ä½•è§£å†³ï¼Ÿæˆ‘ä»¬å°±è¦æœ‰è¯· <code>Webpack</code>äº†ã€‚</p><h3 id="_1-2-2-å®‰è£…-webpack" tabindex="-1"><a class="header-anchor" href="#_1-2-2-å®‰è£…-webpack" aria-hidden="true">#</a> 1.2.2 å®‰è£… Webpack</h3><ul><li><strong>å‰ææ¡ä»¶</strong></li></ul><p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿å®‰è£…äº† <a href="https://nodejs.org/en/" target="_blank" rel="noopener noreferrer">Node.js<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> çš„æœ€æ–°ç‰ˆæœ¬ã€‚ä½¿ç”¨ Node.js æœ€æ–°çš„é•¿æœŸæ”¯æŒç‰ˆæœ¬(LTS - Long Term Support)ï¼Œæ˜¯ç†æƒ³çš„èµ·æ­¥ã€‚ ä½¿ç”¨æ—§ç‰ˆæœ¬ï¼Œä½ å¯èƒ½é‡åˆ°å„ç§é—®é¢˜ï¼Œå› ä¸ºå®ƒä»¬å¯èƒ½ç¼ºå°‘ webpack åŠŸèƒ½ï¼Œ æˆ–è€…ç¼ºå°‘ç›¸å…³ packageã€‚</p><img src="http://raink.net:8080/md-images/webpack5/img-02-03.png" width="600" align="left"><p>ä½ å¯ä»¥é€‰æ‹©ä¸‹è½½é€‚åˆè‡ªå·±å¹³å°çš„å®‰è£…åŒ…ï¼Œè‡ªè¡Œå®‰è£…å³å¯ï¼Œæœ¬æ–‡ä¸å†èµ˜è¿°ã€‚</p><ul><li><strong>æœ¬åœ°å®‰è£…</strong></li></ul><p>æœ€æ–°çš„ webpack æ­£å¼ç‰ˆæœ¬æ˜¯ï¼š</p><figure><a href="https://github.com/webpack/webpack/releases" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/npm/v/webpack.svg?label=webpack&amp;style=flat-square&amp;maxAge=3600" alt="GitHub release" tabindex="0" loading="lazy"><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><figcaption>GitHub release</figcaption></figure><p>è¦å®‰è£…æœ€æ–°ç‰ˆæœ¬æˆ–ç‰¹å®šç‰ˆæœ¬ï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤ä¹‹ä¸€ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack
<span class="token comment"># æˆ–æŒ‡å®šç‰ˆæœ¬</span>
<span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack@<span class="token operator">&lt;</span>version<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>æç¤ºï¼š</strong></p><p>æ˜¯å¦ä½¿ç”¨ <code>--save-dev</code> å–å†³äºä½ çš„åº”ç”¨åœºæ™¯ã€‚å‡è®¾ä½ ä»…ä½¿ç”¨ webpack è¿›è¡Œæ„å»ºæ“ä½œï¼Œé‚£ä¹ˆå»ºè®®ä½ åœ¨å®‰è£…æ—¶ä½¿ç”¨ <code>--save-dev</code> é€‰é¡¹ï¼Œå› ä¸ºå¯èƒ½ä½ ä¸éœ€è¦åœ¨ç”Ÿäº§ç¯å¢ƒä¸Šä½¿ç”¨ webpackã€‚å¦‚æœéœ€è¦åº”ç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œè¯·å¿½ç•¥ <code>--save-dev</code> é€‰é¡¹ã€‚</p></blockquote><p>å¦‚æœä½ ä½¿ç”¨ webpack v4+ ç‰ˆæœ¬ï¼Œå¹¶ä¸”æƒ³è¦åœ¨å‘½ä»¤è¡Œä¸­è°ƒç”¨ <code>webpack</code>ï¼Œä½ è¿˜éœ€è¦å®‰è£… <a href="https://webpack.docschina.org/api/cli/" target="_blank" rel="noopener noreferrer">CLI<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack-cli
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¯¹äºå¤§å¤šæ•°é¡¹ç›®ï¼Œæˆ‘ä»¬å»ºè®®æœ¬åœ°å®‰è£…ã€‚è¿™å¯ä»¥åœ¨å¼•å…¥é‡å¤§æ›´æ–°(breaking change)ç‰ˆæœ¬æ—¶ï¼Œæ›´å®¹æ˜“åˆ†åˆ«å‡çº§é¡¹ç›®ã€‚ é€šå¸¸ä¼šé€šè¿‡è¿è¡Œä¸€ä¸ªæˆ–å¤šä¸ª <a href="https://docs.npmjs.com/misc/scripts" target="_blank" rel="noopener noreferrer">npm scripts<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ä»¥åœ¨æœ¬åœ° <code>node_modules</code> ç›®å½•ä¸­æŸ¥æ‰¾å®‰è£…çš„ webpackï¼Œ æ¥è¿è¡Œ webpackï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --config webpack.config.js&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>æç¤ºï¼š</strong></p><p>æƒ³è¦è¿è¡Œæœ¬åœ°å®‰è£…çš„ webpackï¼Œä½ å¯ä»¥é€šè¿‡ <code>node_modules/.bin/webpack</code> æ¥è®¿é—®å®ƒçš„äºŒè¿›åˆ¶ç‰ˆæœ¬ã€‚å¦å¤–ï¼Œå¦‚æœä½ ä½¿ç”¨çš„æ˜¯ npm v5.2.0 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œåˆ™å¯ä»¥è¿è¡Œ <code>npx webpack</code> æ¥æ‰§è¡Œã€‚</p></blockquote><ul><li><strong>å…¨å±€å®‰è£…</strong></li></ul><p>é€šè¿‡ä»¥ä¸‹ NPM å®‰è£…æ–¹å¼ï¼Œå¯ä»¥ä½¿ <code>webpack</code> åœ¨å…¨å±€ç¯å¢ƒä¸‹å¯ç”¨ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">--global</span> webpack
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p><strong>æç¤ºï¼š</strong></p><p><strong>ä¸æ¨è</strong> å…¨å±€å®‰è£… webpackã€‚è¿™ä¼šå°†ä½ é¡¹ç›®ä¸­çš„ webpack é”å®šåˆ°æŒ‡å®šç‰ˆæœ¬ï¼Œå¹¶ä¸”åœ¨ä½¿ç”¨ä¸åŒçš„ webpack ç‰ˆæœ¬çš„é¡¹ç›®ä¸­ï¼Œ å¯èƒ½ä¼šå¯¼è‡´æ„å»ºå¤±è´¥ã€‚</p></blockquote><ul><li><strong>æœ€æ–°ä½“éªŒç‰ˆæœ¬</strong></li></ul><p>å¦‚æœä½ çƒ­è¡·äºä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„ webpackï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£… beta ç‰ˆæœ¬ï¼Œ æˆ–è€…ç›´æ¥ä» webpack çš„ä»“åº“ä¸­å®‰è£…ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack@next
<span class="token comment"># æˆ–ç‰¹å®šçš„ tag/åˆ†æ”¯</span>
<span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack/webpack<span class="token comment">#&lt;tagname/branchname&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>æç¤ºï¼š</strong></p><p>å®‰è£…è¿™äº›æœ€æ–°ä½“éªŒç‰ˆæœ¬æ—¶è¦å°å¿ƒï¼å®ƒä»¬å¯èƒ½ä»ç„¶åŒ…å« bugï¼Œå› æ­¤ä¸åº”è¯¥ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚</p></blockquote><ul><li><strong>æˆ‘ä»¬çš„å®‰è£…</strong></li></ul><p>æ ¹æ®ä»¥ä¸Šçš„å„ç§æƒ…æ™¯ï¼Œåœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­å®‰è£… Webpackï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># å½“å‰ç›®å½•: ä»»æ„ä½ çš„ç›®å½•/webpack5</span>
<span class="token punctuation">[</span>felix<span class="token punctuation">]</span> webpack5 $ <span class="token function">npm</span> <span class="token function">install</span> webpack webpack-cli
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-2-3-è¿è¡Œ-webpack" tabindex="-1"><a class="header-anchor" href="#_1-2-3-è¿è¡Œ-webpack" aria-hidden="true">#</a> 1.2.3 è¿è¡Œ Webpack</h3><p>Webpack å®‰è£…å¥½äº†ä»¥åï¼Œå°±å¯ä»¥åœ¨é¡¹ç›®ç¯å¢ƒé‡Œè¿è¡Œäº†ã€‚åœ¨è¿è¡Œä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆä¿®æ”¹ä¸€ä¸‹ä»£ç ï¼š</p><blockquote><p>03-try-webpack/src/hello-world.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">helloWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Hello world&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// å¯¼å‡ºå‡½æ•°æ¨¡å—</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> helloWorld<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><blockquote><p>03-try-webpack/src/index.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// å¯¼å…¥å‡½æ•°æ¨¡å—</span>
<span class="token keyword">import</span> helloWorld <span class="token keyword">from</span> <span class="token string">&#39;./hello-world.js&#39;</span><span class="token punctuation">;</span>

<span class="token function">helloWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><blockquote><p>03-try-webpack/index.html</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>åƒé”‹å¤§å‰ç«¯æ•™ç ”é™¢-Webpack5å­¦ä¹ æŒ‡å—<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./src/index.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>è¿›å…¥é¡¹ç›®ç›®å½•ï¼Œè¿è¡Œ Webpackï¼Œç»“æœå¦‚ä¸‹ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> 03-try-webpack $ npx webpack
asset main.js <span class="token number">50</span> bytes <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">[</span>minimized<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: main<span class="token punctuation">)</span>
orphan modules <span class="token number">81</span> bytes <span class="token punctuation">[</span>orphan<span class="token punctuation">]</span> <span class="token number">1</span> module
./src/index.js + <span class="token number">1</span> modules <span class="token number">135</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>

WARNING <span class="token keyword">in</span> configuration
The <span class="token string">&#39;mode&#39;</span> option has not been set, webpack will fallback to <span class="token string">&#39;production&#39;</span> <span class="token keyword">for</span> this value.
Set <span class="token string">&#39;mode&#39;</span> option to <span class="token string">&#39;development&#39;</span> or <span class="token string">&#39;production&#39;</span> to <span class="token builtin class-name">enable</span> defaults <span class="token keyword">for</span> each environment.
You can also <span class="token builtin class-name">set</span> it to <span class="token string">&#39;none&#39;</span> to disable any default behavior. Learn more: https://webpack.js.org/configuration/mode/

webpack <span class="token number">5.54</span>.0 compiled with <span class="token number">1</span> warning <span class="token keyword">in</span> <span class="token number">197</span> ms
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åœ¨æ²¡æœ‰ä»»ä½•é…ç½®çš„æƒ…å†µä¸‹è¿è¡Œ Webpack<!---->ã€‚</p><p>è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªè­¦å‘Šï¼šâ€œmodeâ€ é€‰é¡¹å°šæœªè®¾ç½®ã€‚æˆ‘ä»¬å°†åœ¨æœ¬è¯¾ç¨‹åé¢è®¨è®ºâ€œmodeâ€é€‰é¡¹ã€‚</p><p>ä»ç»“æœæ¥çœ‹ï¼Œwebpack ä¸ºæˆ‘ä»¬ç”Ÿæˆäº†ä¸€ä¸ª main.js æ–‡ä»¶ï¼Œå…·ä½“è§ä¸‹å›¾ï¼š</p><img src="http://raink.net:8080/md-images/webpack5/img-02-04.png" style="zoom:50%;" align="left"><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ <code>main.js</code>é‡Œæœ‰ä»€ä¹ˆï¼š</p><blockquote><p>03-try-webpack/dist/main.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token string">&#39;use strict&#39;</span><span class="token punctuation">;</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Hello world&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>ç”Ÿæˆçš„ä»£ç éå¸¸ç®€æ´ã€‚è¿™æ—¶ä½ å¯èƒ½ä¸ç¦ä¼šé—®ï¼Œè¿™ä¸ªä»£ç æ˜¯ä»å“ªäº›æ–‡ä»¶é‡Œç”Ÿæˆå‡ºæ¥çš„å‘¢ï¼Ÿå›åˆ°ç»ˆç«¯ï¼Œæˆ‘ä»¬å†è¿è¡Œä¸€ä¸‹å‘½ä»¤ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> 03-try-webpack $ npx webpack <span class="token parameter variable">--stats</span> detailed
PublicPath: auto
asset main.js <span class="token number">50</span> bytes <span class="token punctuation">{</span><span class="token number">179</span><span class="token punctuation">}</span> <span class="token punctuation">[</span>compared <span class="token keyword">for</span> emit<span class="token punctuation">]</span> <span class="token punctuation">[</span>minimized<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: main<span class="token punctuation">)</span>
Entrypoint main <span class="token number">50</span> bytes <span class="token operator">=</span> main.js
chunk <span class="token punctuation">{</span><span class="token number">179</span><span class="token punctuation">}</span> <span class="token punctuation">(</span>runtime: main<span class="token punctuation">)</span> main.js <span class="token punctuation">(</span>main<span class="token punctuation">)</span> <span class="token number">180</span> bytes <span class="token punctuation">[</span>entry<span class="token punctuation">]</span> <span class="token punctuation">[</span>rendered<span class="token punctuation">]</span>
  <span class="token operator">&gt;</span> ./src  main
orphan modules <span class="token number">103</span> bytes <span class="token punctuation">[</span>orphan<span class="token punctuation">]</span> <span class="token number">1</span> module
./src/index.js + <span class="token number">1</span> modules <span class="token punctuation">[</span><span class="token number">860</span><span class="token punctuation">]</span> <span class="token number">180</span> bytes <span class="token punctuation">{</span><span class="token number">179</span><span class="token punctuation">}</span> <span class="token punctuation">[</span>depth <span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
  <span class="token punctuation">[</span>no exports<span class="token punctuation">]</span>
  <span class="token punctuation">[</span>no exports used<span class="token punctuation">]</span>

<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬çœ‹åˆ°ï¼Œ <code>asset main.js</code> æ˜¯ä»å…¥å£ <code>&gt; ./src main</code> ç”Ÿæˆçš„ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬èƒ½è‡ªå·±é…ç½®è¿™ä¸ªå…¥å£å—ï¼Ÿè¯·çœ‹ä¸‹ä¸€èŠ‚ï¼Œè‡ªå®šä¹‰ Webpack é…ç½®ã€‚</p><h3 id="_1-2-4-è‡ªå®šä¹‰-webpack-é…ç½®" tabindex="-1"><a class="header-anchor" href="#_1-2-4-è‡ªå®šä¹‰-webpack-é…ç½®" aria-hidden="true">#</a> 1.2.4 è‡ªå®šä¹‰ Webpack é…ç½®</h3><p>å®é™…ä¸Šï¼Œ<code>webpack-cli</code> ç»™æˆ‘ä»¬æä¾›äº†ä¸°å¯Œçš„ç»ˆç«¯å‘½ä»¤è¡ŒæŒ‡ä»¤ï¼Œå¯ä»¥é€šè¿‡ <code>webpack --help</code>æ¥æŸ¥çœ‹ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> 03-try-webpack $ npx webpack <span class="token parameter variable">--help</span>
Usage: webpack <span class="token punctuation">[</span>entries<span class="token punctuation">..</span>.<span class="token punctuation">]</span> <span class="token punctuation">[</span>options<span class="token punctuation">]</span>
Alternative usage to run commands: webpack <span class="token punctuation">[</span>command<span class="token punctuation">]</span> <span class="token punctuation">[</span>options<span class="token punctuation">]</span>

The build tool <span class="token keyword">for</span> modern web applications.

Options:
  -c, <span class="token parameter variable">--config</span> <span class="token operator">&lt;</span>value<span class="token punctuation">..</span>.<span class="token operator">&gt;</span>                Provide path to a webpack configuration <span class="token function">file</span> e.g. ./webpack.config.js.
  --config-name <span class="token operator">&lt;</span>value<span class="token punctuation">..</span>.<span class="token operator">&gt;</span>               Name of the configuration to use.
  -m, <span class="token parameter variable">--merge</span>                            Merge two or <span class="token function">more</span> configurations using <span class="token string">&#39;webpack-merge&#39;</span><span class="token builtin class-name">.</span>
  <span class="token parameter variable">--env</span> <span class="token operator">&lt;</span>value<span class="token punctuation">..</span>.<span class="token operator">&gt;</span>                       Environment passed to the configuration when it is a function.
  --node-env <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>                     Sets p<wbr>rocess.env.NODE_ENV to the specified value.
  <span class="token parameter variable">--progress</span> <span class="token punctuation">[</span>value<span class="token punctuation">]</span>                     Print compilation progress during build.
  -j, <span class="token parameter variable">--json</span> <span class="token punctuation">[</span>value<span class="token punctuation">]</span>                     Prints result as JSON or store it <span class="token keyword">in</span> a file.
  -d, <span class="token parameter variable">--devtool</span> <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>                  Determine <span class="token builtin class-name">source</span> maps to use.
  --no-devtool                           Do not generate <span class="token builtin class-name">source</span> maps.
  <span class="token parameter variable">--entry</span> <span class="token operator">&lt;</span>value<span class="token punctuation">..</span>.<span class="token operator">&gt;</span>                     The entry point<span class="token punctuation">(</span>s<span class="token punctuation">)</span> of your application e.g. ./src/main.js.
  <span class="token parameter variable">--mode</span> <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>                         Defines the mode to pass to webpack.
  <span class="token parameter variable">--name</span> <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>                         Name of the configuration. Used when loading multiple configurations.
  -o, --output-path <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>              Output location of the <span class="token function">file</span> generated by webpack e.g. ./dist/.
  <span class="token parameter variable">--stats</span> <span class="token punctuation">[</span>value<span class="token punctuation">]</span>                        It instructs webpack on how to treat the stats e.g. verbose.
  --no-stats                             Disable stats output.
  -t, <span class="token parameter variable">--target</span> <span class="token operator">&lt;</span>value<span class="token punctuation">..</span>.<span class="token operator">&gt;</span>                Sets the build target e.g. node.
  --no-target                            Negative <span class="token string">&#39;target&#39;</span> option.
  -w, <span class="token parameter variable">--watch</span>                            Watch <span class="token keyword">for</span> files changes.
  --no-watch                             Do not <span class="token function">watch</span> <span class="token keyword">for</span> <span class="token function">file</span> changes.
  --watch-options-stdin                  Stop watching when stdin stream has ended.
  --no-watch-options-stdin               Do not stop watching when stdin stream has ended.

Global options:
  <span class="token parameter variable">--color</span>                                Enable colors on console.
  --no-color                             Disable colors on console.
  -v, <span class="token parameter variable">--version</span>                          Output the version number of <span class="token string">&#39;webpack&#39;</span>, <span class="token string">&#39;webpack-cli&#39;</span> and <span class="token string">&#39;webpack-dev-server&#39;</span> and
                                         commands.
  -h, <span class="token parameter variable">--help</span> <span class="token punctuation">[</span>verbose<span class="token punctuation">]</span>                   Display <span class="token builtin class-name">help</span> <span class="token keyword">for</span> commands and options.

Commands:
  build<span class="token operator">|</span>bundle<span class="token operator">|</span>b <span class="token punctuation">[</span>entries<span class="token punctuation">..</span>.<span class="token punctuation">]</span> <span class="token punctuation">[</span>options<span class="token punctuation">]</span>  Run webpack <span class="token punctuation">(</span>default command, can be omitted<span class="token punctuation">)</span>.
  configtest<span class="token operator">|</span>t <span class="token punctuation">[</span>config-path<span class="token punctuation">]</span>             Validate a webpack configuration.
  <span class="token builtin class-name">help</span><span class="token operator">|</span>h <span class="token punctuation">[</span>command<span class="token punctuation">]</span> <span class="token punctuation">[</span>option<span class="token punctuation">]</span>              Display <span class="token builtin class-name">help</span> <span class="token keyword">for</span> commands and options.
  info<span class="token operator">|</span>i <span class="token punctuation">[</span>options<span class="token punctuation">]</span>                       Outputs information about your system.
  serve<span class="token operator">|</span>server<span class="token operator">|</span>s <span class="token punctuation">[</span>entries<span class="token punctuation">..</span>.<span class="token punctuation">]</span>            Run the webpack dev server. To see all available options you need to <span class="token function">install</span>
                                         <span class="token string">&#39;webpack-dev-server&#39;</span><span class="token builtin class-name">.</span>
  version<span class="token operator">|</span><span class="token function">v</span> <span class="token punctuation">[</span>commands<span class="token punctuation">..</span>.<span class="token punctuation">]</span>                Output the version number of <span class="token string">&#39;webpack&#39;</span>, <span class="token string">&#39;webpack-cli&#39;</span> and <span class="token string">&#39;webpack-dev-server&#39;</span> and
                                         commands.
  <span class="token function">watch</span><span class="token operator">|</span>w <span class="token punctuation">[</span>entries<span class="token punctuation">..</span>.<span class="token punctuation">]</span> <span class="token punctuation">[</span>options<span class="token punctuation">]</span>         Run webpack and <span class="token function">watch</span> <span class="token keyword">for</span> files changes.

To see list of all supported commands and options run <span class="token string">&#39;webpack --help=verbose&#39;</span><span class="token builtin class-name">.</span>

Webpack documentation: https://webpack.js.org/.
CLI documentation: https://webpack.js.org/api/cli/.
Made with â™¥ by the webpack team.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯æ˜¯å‘½ä»¤è¡Œä¸æ–¹ä¾¿ä¹Ÿä¸ç›´è§‚ï¼Œè€Œä¸”è¿˜ä¸åˆ©äºä¿å­˜é…ç½®çš„å†…å®¹ã€‚å› æ­¤ï¼Œwebpack è¿˜ç»™æˆ‘ä»¬æä¾›äº†é€šè¿‡é…ç½®æ–‡ä»¶ï¼Œæ¥è‡ªå®šä¹‰é…ç½®å‚æ•°çš„èƒ½åŠ›ã€‚</p><blockquote><p>03-try-webpack/webpack.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">,</span>

	<span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;bundle.js&#39;</span><span class="token punctuation">,</span>

		<span class="token comment">// è¾“å‡ºæ–‡ä»¶å¤¹å¿…é¡»å®šä¹‰ä¸ºç»å¯¹è·¯å¾„</span>
		<span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;./dist&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;none&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>åœ¨é¡¹ç›®ç›®å½•ä¸‹è¿è¡Œ <code>npx webpack</code>, å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶æ¥å¸®æˆ‘ä»¬æ‰“åŒ…æ–‡ä»¶ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> 03-try-webpack $ npx webpack
<span class="token punctuation">[</span>webpack-cli<span class="token punctuation">]</span> Invalid configuration object. Webpack has been initialized using a configuration object that does not match the API schema.
 - configuration.output.path: The provided value <span class="token string">&quot;./dist&quot;</span> is not an absolute path<span class="token operator">!</span>
   -<span class="token operator">&gt;</span> The output directory as **absolute path** <span class="token punctuation">(</span>required<span class="token punctuation">)</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬å‘ç°ï¼Œæ‰“åŒ…å¹¶æ²¡æœ‰æˆåŠŸï¼Œå› ä¸º webpack è¦æ±‚æˆ‘ä»¬æ‰“åŒ…é…ç½® <code>output.path</code> çš„è·¯å¾„å¿…é¡»ä¸ºç»å¯¹è·¯å¾„ï¼Œé€šè¿‡ <code>path</code> æ¨¡å—æ¥å®šä¹‰è¾“å‡ºè·¯å¾„ä¸ºç»å¯¹è·¯å¾„ï¼š</p><blockquote><p>03-try-webpack/webpack.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">,</span>

	<span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;bundle.js&#39;</span><span class="token punctuation">,</span>

		<span class="token comment">// è¾“å‡ºæ–‡ä»¶å¤¹å¿…é¡»å®šä¹‰ä¸ºç»å¯¹è·¯å¾„</span>
		<span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;./dist&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;none&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>å†æ¬¡è¾“å…¥æ‰“åŒ…å‘½ä»¤ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> 03-try-webpack $ npx webpack
asset bundle.js <span class="token number">3.15</span> KiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: main<span class="token punctuation">)</span>
runtime modules <span class="token number">670</span> bytes <span class="token number">3</span> modules
cacheable modules <span class="token number">180</span> bytes
  ./src/index.js <span class="token number">77</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
  ./src/hello-world.js <span class="token number">103</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
webpack <span class="token number">5.54</span>.0 compiled successfully <span class="token keyword">in</span> <span class="token number">81</span> ms
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰“åŒ…æˆåŠŸï¼</p><h3 id="_1-2-5-é‡æ–°è¿è¡Œé¡¹ç›®" tabindex="-1"><a class="header-anchor" href="#_1-2-5-é‡æ–°è¿è¡Œé¡¹ç›®" aria-hidden="true">#</a> 1.2.5 é‡æ–°è¿è¡Œé¡¹ç›®</h3><p>é¡¹ç›®æ–‡ä»¶é€šè¿‡ webpack æ‰“åŒ…å¥½äº†ï¼Œå¯æ˜¯æˆ‘ä»¬åœ¨æµè§ˆå™¨è¿è¡Œ <code>index.html</code>æç¤ºå¦‚ä¸‹é”™è¯¯ï¼š <img src="http://raink.net:8080/md-images/webpack5/img-02-05.png" alt="image-20210925222921661" loading="lazy"></p><p>è¿™æ˜¯å› ä¸ºé¡µé¢å¼•ç”¨çš„ JS ä»£ç ï¼Œåœ¨æµè§ˆå™¨é‡Œä¸èƒ½æ­£ç¡®è§£æäº†ï¼Œæˆ‘ä»¬å¾—å»å¼•ç”¨æ‰“åŒ…å¥½äº†çš„ JS æ‰å¯¹ã€‚ä¿®æ”¹<code>index.html</code></p><blockquote><p>03-try-webpack/index.html</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>åƒé”‹å¤§å‰ç«¯æ•™ç ”é™¢-Webpack5å­¦ä¹ æŒ‡å—<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
		<span class="token comment">&lt;!-- &lt;script src=&quot;./src/index.js&quot;&gt;&lt;/script&gt; --&gt;</span>
		<span class="token comment">&lt;!-- å¼•ç”¨æ‰“åŒ…å¥½çš„ JS æ–‡ä»¶ --&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./dist/bundle.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>åœ¨æµè§ˆå™¨é‡Œå†æ¬¡è¿è¡Œ <code>index.html</code>:</p><figure><img src="http://raink.net:8080/md-images/webpack5/img-02-06.png" alt="image-20210925223323608" tabindex="0" loading="lazy"><figcaption>image-20210925223323608</figcaption></figure><p>å¤§åŠŸå‘Šæˆï¼</p><h2 id="_1-3-è‡ªåŠ¨å¼•å…¥èµ„æº" tabindex="-1"><a class="header-anchor" href="#_1-3-è‡ªåŠ¨å¼•å…¥èµ„æº" aria-hidden="true">#</a> 1.3 è‡ªåŠ¨å¼•å…¥èµ„æº</h2><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬éƒ½æ˜¯åœ¨ <code>index.html</code> æ–‡ä»¶ä¸­æ‰‹åŠ¨å¼•å…¥æ‰€æœ‰èµ„æºï¼Œç„¶è€Œéšç€åº”ç”¨ç¨‹åºå¢é•¿ï¼Œå¦‚æœç»§ç»­æ‰‹åŠ¨ç®¡ç† <code>index.html</code> æ–‡ä»¶ï¼Œå°±ä¼šå˜å¾—å›°éš¾èµ·æ¥ã€‚ç„¶è€Œï¼Œé€šè¿‡ä¸€äº›æ’ä»¶å¯ä»¥ä½¿è¿™ä¸ªè¿‡ç¨‹æ›´å®¹æ˜“ç®¡æ§ã€‚</p><h3 id="_1-3-1-ä»€ä¹ˆæ˜¯æ’ä»¶" tabindex="-1"><a class="header-anchor" href="#_1-3-1-ä»€ä¹ˆæ˜¯æ’ä»¶" aria-hidden="true">#</a> 1.3.1 ä»€ä¹ˆæ˜¯æ’ä»¶</h3><p><strong>æ’ä»¶</strong> æ˜¯ webpack çš„ æ ¸å¿ƒ åŠŸèƒ½ã€‚æ’ä»¶å¯ä»¥ç”¨äºæ‰§è¡Œä¸€äº›ç‰¹å®šçš„ä»»åŠ¡ï¼ŒåŒ…æ‹¬ï¼šæ‰“åŒ…ä¼˜åŒ–ï¼Œèµ„æºç®¡ç†ï¼Œæ³¨å…¥ç¯å¢ƒå˜é‡ç­‰ã€‚Webpack è‡ªèº«ä¹Ÿæ˜¯æ„å»ºäºä½ åœ¨ webpack é…ç½®ä¸­ç”¨åˆ°çš„ <strong>ç›¸åŒçš„æ’ä»¶ç³»ç»Ÿ</strong> ä¹‹ä¸Šï¼</p><p>æƒ³è¦ä½¿ç”¨ä¸€ä¸ªæ’ä»¶ï¼Œä½ åªéœ€è¦ <code>require()</code> å®ƒï¼Œç„¶åæŠŠå®ƒæ·»åŠ åˆ° <code>plugins</code> æ•°ç»„ä¸­ã€‚å¤šæ•°æ’ä»¶å¯ä»¥é€šè¿‡é€‰é¡¹(option)è‡ªå®šä¹‰ã€‚ä½ ä¹Ÿå¯ä»¥åœ¨ä¸€ä¸ªé…ç½®æ–‡ä»¶ä¸­å› ä¸ºä¸åŒç›®çš„è€Œå¤šæ¬¡ä½¿ç”¨åŒä¸€ä¸ªæ’ä»¶ï¼Œè¿™æ—¶éœ€è¦é€šè¿‡ä½¿ç”¨ <code>new</code> æ“ä½œç¬¦æ¥åˆ›å»ºä¸€ä¸ªæ’ä»¶å®ä¾‹ã€‚</p><p>Webpack æä¾›å¾ˆå¤šå¼€ç®±å³ç”¨çš„ <a href="https://webpack.docschina.org/plugins/" target="_blank" rel="noopener noreferrer">æ’ä»¶<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚</p><h3 id="_1-3-2-ä½¿ç”¨-htmlwebpackplugin" tabindex="-1"><a class="header-anchor" href="#_1-3-2-ä½¿ç”¨-htmlwebpackplugin" aria-hidden="true">#</a> 1.3.2 ä½¿ç”¨ HtmlWebpackPlugin</h3><p>é¦–å…ˆå®‰è£…æ’ä»¶ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev html-webpack-plugin
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¹¶ä¸”è°ƒæ•´ <code>webpack.config.js</code> æ–‡ä»¶ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
	<span class="token comment">// å®ä¾‹åŒ– html-webpack-plugin æ’ä»¶</span>
	<span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>04-manage-output/webpack.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//...</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
   <span class="token comment">//...</span>

   <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// å®ä¾‹åŒ– html-webpack-plugin æ’ä»¶</span>
        <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span>`
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>æ‰“åŒ…ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> 04-manage-output $ npx webpack
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><img src="http://raink.net:8080/md-images/webpack5/img-1.2.2.png" alt="image-20211001090617266" style="zoom:67%;" align="left"><p>æ‰“åŒ…ç”Ÿäº§çš„ <code>index.html</code>å†…å®¹å¦‚ä¸‹ï¼š</p><blockquote><p>04-manage-output/dist/index.html</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Webpack App<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">defer</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bundle.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>æ‰“åŒ…åï¼Œæˆ‘ä»¬å‘ç°è¿™ä¸ª <code>dist/index.html</code> ä¼¼ä¹ä¸å…ˆå‰çš„ <code>index.html</code> å¹¶æ²¡æœ‰å…³ç³»ï¼Œ<code>HtmlWebpackPlugin</code> ä¼šé»˜è®¤ç”Ÿæˆå®ƒè‡ªå·±çš„ <code>index.html</code> æ–‡ä»¶ï¼Œå¹¶ä¸”æ‰€æœ‰çš„ bundleï¼ˆbundle.jsï¼‰ ä¼šè‡ªåŠ¨æ·»åŠ åˆ° html ä¸­ã€‚</p><p>èƒ½å¦åŸºäºåŸæœ‰çš„ <code>index.html</code> æ–‡ä»¶æ‰“åŒ…ç”Ÿæˆæ–°çš„ <code>index.html</code>å‘¢ï¼Ÿå¯ä»¥é€šè¿‡é˜…è¯» <a href="https://github.com/jantimon/html-webpack-plugin" target="_blank" rel="noopener noreferrer"><code>HtmlWebpackPlugin</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> æ’ä»¶æä¾›çš„å…¨éƒ¨çš„åŠŸèƒ½å’Œé€‰é¡¹æ¥æ‰¾åˆ°ç­”æ¡ˆã€‚</p><p>é¦–å…ˆåˆ é™¤ <code>index.html</code> æ‰‹å·¥å¼•å…¥çš„ <code>js</code>æ–‡ä»¶ï¼š</p><blockquote><p>04-manage-output/index.html</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>åƒé”‹å¤§å‰ç«¯æ•™ç ”é™¢-Webpack5å­¦ä¹ æŒ‡å—<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>å†æ¬¡è°ƒæ•´ <code>webpack.config.js</code> æ–‡ä»¶ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
	<span class="token comment">// å®ä¾‹åŒ– html-webpack-plugin æ’ä»¶</span>
	<span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">&#39;./index.html&#39;</span><span class="token punctuation">,</span> <span class="token comment">// æ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶çš„æ¨¡æ¿</span>
		<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;app.html&#39;</span><span class="token punctuation">,</span> <span class="token comment">// æ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶åç§°ã€‚é»˜è®¤ä¸ºindex.html</span>
		<span class="token comment">// è®¾ç½®æ‰€æœ‰èµ„æºæ–‡ä»¶æ³¨å…¥æ¨¡æ¿çš„ä½ç½®ã€‚å¯ä»¥è®¾ç½®çš„å€¼ true|&#39;head&#39;|&#39;body&#39;|falseï¼Œé»˜è®¤å€¼ä¸º true</span>
		<span class="token literal-property property">inject</span><span class="token operator">:</span> <span class="token string">&#39;body&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>04-manage-output/webpack.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//...</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">//...</span>

	<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token comment">// å®ä¾‹åŒ– html-webpack-plugin æ’ä»¶</span>
		<span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">&#39;./index.html&#39;</span><span class="token punctuation">,</span> <span class="token comment">// æ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶çš„æ¨¡æ¿</span>
			<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;app.html&#39;</span><span class="token punctuation">,</span> <span class="token comment">// æ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶åç§°ã€‚é»˜è®¤ä¸ºindex.html</span>
			<span class="token literal-property property">inject</span><span class="token operator">:</span> <span class="token string">&#39;body&#39;</span><span class="token punctuation">,</span> <span class="token comment">// è®¾ç½®æ‰€æœ‰èµ„æºæ–‡ä»¶æ³¨å…¥æ¨¡æ¿çš„ä½ç½®ã€‚å¯ä»¥è®¾ç½®çš„å€¼ true|&#39;head&#39;|&#39;body&#39;|falseï¼Œé»˜è®¤å€¼ä¸º true</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>æ‰“åŒ…ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> 04-manage-output $ npx webpack
asset bundle.js <span class="token number">3.15</span> KiB <span class="token punctuation">[</span>compared <span class="token keyword">for</span> emit<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: main<span class="token punctuation">)</span>
asset app.html <span class="token number">414</span> bytes <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
runtime modules <span class="token number">670</span> bytes <span class="token number">3</span> modules
cacheable modules <span class="token number">180</span> bytes
  ./src/index.js <span class="token number">77</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
  ./src/hello-world.js <span class="token number">103</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
webpack <span class="token number">5.54</span>.0 compiled successfully <span class="token keyword">in</span> <span class="token number">95</span> ms
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><img src="http://raink.net:8080/md-images/webpack5/img-1.2.2-2.png" alt="image-20211001094925170" style="zoom:67%;" align="left"><p>æŸ¥çœ‹ <code>app.html</code> å†…å®¹ï¼š</p><blockquote><p>04-manage-output/dist/index.html</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">&quot;en&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">&quot;UTF-8&quot;</span><span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">&quot;X-UA-Compatible&quot;</span> content<span class="token operator">=</span><span class="token string">&quot;IE=edge&quot;</span><span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">&quot;viewport&quot;</span> content<span class="token operator">=</span><span class="token string">&quot;width=device-width, initial-scale=1.0&quot;</span><span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>åƒé”‹å¤§å‰ç«¯æ•™ç ”é™¢<span class="token operator">-</span>Webpack5å­¦ä¹ æŒ‡å—<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script defer src<span class="token operator">=</span><span class="token string">&quot;bundle.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>è¿™æ¬¡æ‰“åŒ…åº”ç”¨åˆ°äº†æˆ‘ä»¬çš„æ¨¡æ¿æ–‡ä»¶ <code>index.html</code>, å¹¶ä¸”ç”Ÿæˆäº†æ–°çš„æ–‡ä»¶ <code>app.html</code>, æ–‡ä»¶é‡Œè‡ªåŠ¨å¼•ç”¨çš„ <code>bundle.js </code>ä¹Ÿä» <code>&lt;header&gt;</code>è¿ç§»åˆ°äº†<code>&lt;body&gt;</code>é‡Œã€‚</p><h3 id="_1-3-3-æ¸…ç†-dist" tabindex="-1"><a class="header-anchor" href="#_1-3-3-æ¸…ç†-dist" aria-hidden="true">#</a> 1.3.3 æ¸…ç† dist</h3><p>ä»”ç»†ç•™æ„ä¸€ä¸‹ï¼Œæˆ‘ä»¬å‘ç° <code>dist/index.html</code>ä»æ—§å­˜åœ¨ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯ä¸Šæ¬¡ç”Ÿæˆçš„æ®‹ç•™æ–‡ä»¶ï¼Œå·²ç»æ²¡æœ‰ç”¨äº†ã€‚å¯è§ï¼Œwebpack å°†ç”Ÿæˆæ–‡ä»¶å¹¶æ”¾ç½®åœ¨ <code>/dist</code> æ–‡ä»¶å¤¹ä¸­ï¼Œä½†æ˜¯å®ƒä¸ä¼šè¿½è¸ªå“ªäº›æ–‡ä»¶æ˜¯å®é™…åœ¨é¡¹ç›®ä¸­ç”¨åˆ°çš„ã€‚é€šå¸¸æ¯”è¾ƒæ¨èçš„åšæ³•æ˜¯ï¼Œåœ¨æ¯æ¬¡æ„å»ºå‰æ¸…ç† <code>/dist</code> æ–‡ä»¶å¤¹ï¼Œè¿™æ ·åªä¼šç”Ÿæˆç”¨åˆ°çš„æ–‡ä»¶ã€‚è®©æˆ‘ä»¬ä½¿ç”¨ <a href="https://webpack.docschina.org/configuration/output/#outputclean" target="_blank" rel="noopener noreferrer"><code>output.clean</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> é…ç½®é¡¹å®ç°è¿™ä¸ªéœ€æ±‚ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
	<span class="token comment">// æ‰“åŒ…å‰æ¸…ç† dist æ–‡ä»¶å¤¹</span>
	<span class="token literal-property property">clean</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>04-manage-output/webpack.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//...</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
 <span class="token comment">//...</span>

 <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
       <span class="token comment">//...</span>

   <span class="token comment">// æ‰“åŒ…å‰æ¸…ç† dist æ–‡ä»¶å¤¹</span>
       <span class="token literal-property property">clean</span><span class="token operator">:</span> <span class="token boolean">true</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>

     <span class="token comment">//...</span>
   <span class="token punctuation">}</span>
   <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span>`

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>å†æ¬¡æ‰“åŒ…ï¼š</p><img src="http://raink.net:8080/md-images/webpack5/img-1.2.3.png" alt="image-20211001114327455" style="zoom:67%;" align="left"><p>æ£€æŸ¥ <code>/dist</code> æ–‡ä»¶å¤¹ã€‚ç°åœ¨åªä¼šçœ‹åˆ°æ„å»ºåç”Ÿæˆçš„æ–‡ä»¶ï¼Œè€Œæ²¡æœ‰æ—§æ–‡ä»¶ï¼</p><p>æœ€åï¼Œåœ¨æµè§ˆå™¨é‡Œè¿è¡Œæˆ‘ä»¬æ‰“åŒ…å¥½çš„é¡µé¢ï¼š</p><img src="http://raink.net:8080/md-images/webpack5/img-1.2.3.1.png" alt="image-20211001115318792" style="zoom:67%;"><h2 id="_1-4-æ­å»ºå¼€å‘ç¯å¢ƒ" tabindex="-1"><a class="header-anchor" href="#_1-4-æ­å»ºå¼€å‘ç¯å¢ƒ" aria-hidden="true">#</a> 1.4 æ­å»ºå¼€å‘ç¯å¢ƒ</h2><p>æˆªæ­¢ç›®å‰ï¼Œæˆ‘ä»¬åªèƒ½é€šè¿‡å¤åˆ¶<code>dist/index.html</code> å®Œæ•´ç‰©ç†è·¯å¾„åˆ°æµè§ˆå™¨åœ°å€æ é‡Œè®¿é—®é¡µé¢ã€‚ç°åœ¨æ¥çœ‹çœ‹å¦‚ä½•è®¾ç½®ä¸€ä¸ªå¼€å‘ç¯å¢ƒï¼Œä½¿æˆ‘ä»¬çš„å¼€å‘ä½“éªŒå˜å¾—æ›´è½»æ¾ä¸€äº›ã€‚</p><h3 id="_1-4-1-mode-é€‰é¡¹" tabindex="-1"><a class="header-anchor" href="#_1-4-1-mode-é€‰é¡¹" aria-hidden="true">#</a> 1.4.1 mode é€‰é¡¹</h3><p>åœ¨å¼€å§‹å‰ï¼Œæˆ‘ä»¬å…ˆå°† <a href="https://webpack.docschina.org/configuration/mode/#mode-development" target="_blank" rel="noopener noreferrer"><code>mode</code> è®¾ç½®ä¸º <code>&#39;development&#39;</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">// å¼€å‘æ¨¡å¼</span>
	<span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;development&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>05-development/webpack.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//...</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
<span class="token comment">//...</span>

<span class="token comment">// å¼€å‘æ¨¡å¼</span>
     <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;development&#39;</span><span class="token punctuation">,</span>

<span class="token comment">//...</span>
    <span class="token punctuation">}</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span>`
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h3 id="_1-4-2-ä½¿ç”¨-source-map" tabindex="-1"><a class="header-anchor" href="#_1-4-2-ä½¿ç”¨-source-map" aria-hidden="true">#</a> 1.4.2 ä½¿ç”¨ source map</h3><p>å½“ webpack æ‰“åŒ…æºä»£ç æ—¶ï¼Œå¯èƒ½ä¼šå¾ˆéš¾è¿½è¸ªåˆ° error(é”™è¯¯) å’Œ warning(è­¦å‘Š) åœ¨æºä»£ç ä¸­çš„åŸå§‹ä½ç½®ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå°†ä¸‰ä¸ªæºæ–‡ä»¶ï¼ˆ<code>a.js</code>, <code>b.js</code> å’Œ <code>c.js</code>ï¼‰æ‰“åŒ…åˆ°ä¸€ä¸ª bundleï¼ˆ<code>bundle.js</code>ï¼‰ä¸­ï¼Œè€Œå…¶ä¸­ä¸€ä¸ªæºæ–‡ä»¶åŒ…å«ä¸€ä¸ªé”™è¯¯ï¼Œé‚£ä¹ˆå †æ ˆè·Ÿè¸ªå°±ä¼šç›´æ¥æŒ‡å‘åˆ° <code>bundle.js</code>ã€‚ä½ å¯èƒ½éœ€è¦å‡†ç¡®åœ°çŸ¥é“é”™è¯¯æ¥è‡ªäºå“ªä¸ªæºæ–‡ä»¶ï¼Œæ‰€ä»¥è¿™ç§æç¤ºè¿™é€šå¸¸ä¸ä¼šæä¾›å¤ªå¤šå¸®åŠ©ã€‚</p><p>ä¸ºäº†æ›´å®¹æ˜“åœ°è¿½è¸ª error å’Œ warningï¼ŒJavaScript æä¾›äº† <a href="http://blog.teamtreehouse.com/introduction-source-maps" target="_blank" rel="noopener noreferrer">source maps<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> åŠŸèƒ½ï¼Œå¯ä»¥å°†ç¼–è¯‘åçš„ä»£ç æ˜ å°„å›åŸå§‹æºä»£ç ã€‚å¦‚æœä¸€ä¸ªé”™è¯¯æ¥è‡ªäº <code>b.js</code>ï¼Œsource map å°±ä¼šæ˜ç¡®çš„å‘Šè¯‰ä½ ã€‚</p><p>åœ¨æœ¬ç¯‡ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ <code>inline-source-map</code> é€‰é¡¹ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">// åœ¨å¼€å‘æ¨¡å¼ä¸‹è¿½è¸ªä»£ç </span>
	<span class="token literal-property property">devtool</span><span class="token operator">:</span> <span class="token string">&#39;inline-source-map&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>05-development/webpack.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//...</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
<span class="token comment">//...</span>

<span class="token comment">// åœ¨å¼€å‘æ¨¡å¼ä¸‹è¿½è¸ªä»£ç </span>
     <span class="token literal-property property">devtool</span><span class="token operator">:</span> <span class="token string">&#39;inline-source-map&#39;</span><span class="token punctuation">,</span>

<span class="token comment">//...</span>
    <span class="token punctuation">}</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span>`
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ¥åšä¸€äº›è°ƒè¯•ï¼Œåœ¨ <code>src/hello-world.js</code> æ–‡ä»¶ä¸­ç”Ÿæˆä¸€ä¸ªé”™è¯¯ï¼š</p><blockquote><p>05-development/src/hello-world.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">helloWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// console å•è¯æ‹¼å†™é”™è¯¯</span>
	cosnole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Hello world&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// å¯¼å‡ºå‡½æ•°æ¨¡å—</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> helloWorld<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>å†æ¬¡ç¼–è¯‘ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> 05-development $ npx webpack
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç°åœ¨ï¼Œåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ç”Ÿæˆçš„ <code>index.html</code> æ–‡ä»¶ï¼Œå¹¶ä¸”åœ¨æ§åˆ¶å°æŸ¥çœ‹æ˜¾ç¤ºçš„é”™è¯¯ã€‚é”™è¯¯å¦‚ä¸‹ï¼š</p><figure><img src="http://raink.net:8080/md-images/webpack5/img-1.3.2-1.png" alt="image-20211003084150096" tabindex="0" loading="lazy"><figcaption>image-20211003084150096</figcaption></figure><p>åœ¨æµè§ˆå™¨é‡Œç‚¹å‡» <code>hellow-world.js:3</code>, æŸ¥çœ‹å…·ä½“é”™è¯¯ï¼š</p><figure><img src="http://raink.net:8080/md-images/webpack5/img-1.3.2-2.png" alt="image-20211003084318213" tabindex="0" loading="lazy"><figcaption>image-20211003084318213</figcaption></figure><p>æˆ‘ä»¬å¯ä»¥ç²¾ç¡®å®šä½é”™è¯¯çš„è¡Œæ•°ã€‚</p><h3 id="_1-4-3-ä½¿ç”¨-watch-mode-è§‚å¯Ÿæ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_1-4-3-ä½¿ç”¨-watch-mode-è§‚å¯Ÿæ¨¡å¼" aria-hidden="true">#</a> 1.4.3 ä½¿ç”¨ watch mode(è§‚å¯Ÿæ¨¡å¼)</h3><p>åœ¨æ¯æ¬¡ç¼–è¯‘ä»£ç æ—¶ï¼Œæ‰‹åŠ¨è¿è¡Œ <code>npx webpack</code> ä¼šæ˜¾å¾—å¾ˆéº»çƒ¦ã€‚</p><p>æˆ‘ä»¬å¯ä»¥åœ¨ webpack å¯åŠ¨æ—¶æ·»åŠ  &quot;watch&quot; å‚æ•°ã€‚å¦‚æœå…¶ä¸­ä¸€ä¸ªæ–‡ä»¶è¢«æ›´æ–°ï¼Œä»£ç å°†è¢«é‡æ–°ç¼–è¯‘ï¼Œæ‰€ä»¥ä½ ä¸å¿…å†å»æ‰‹åŠ¨è¿è¡Œæ•´ä¸ªæ„å»ºã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> 05-development $ npx webpack <span class="token parameter variable">--watch</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><img src="http://raink.net:8080/md-images/webpack5/img-1.3.3.png" alt="image-20211003085748023" style="zoom:50%;" align="left"><p>ç°åœ¨å‘½ä»¤è¡Œä¸­ï¼Œå…‰æ ‡åœç•™åœ¨å°¾éƒ¨ï¼Œç›‘æµ‹æ–‡ä»¶çš„å˜åŒ–ã€‚ä¿®æ”¹ <code>hello-world.js</code>æ–‡ä»¶ï¼š</p><blockquote><p>05-development/src/hello-world.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">helloWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Hello world&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// å¯¼å‡ºå‡½æ•°æ¨¡å—</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> helloWorld<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><img src="http://raink.net:8080/md-images/webpack5/img-1.3.3-2.png" alt="image-20211003091919018" style="zoom:50%;" align="left"><p>ç°åœ¨ï¼Œä¿å­˜æ–‡ä»¶å¹¶æ£€æŸ¥ terminal(ç»ˆç«¯) çª—å£ã€‚åº”è¯¥å¯ä»¥çœ‹åˆ° webpack è‡ªåŠ¨åœ°é‡æ–°ç¼–è¯‘ä¿®æ”¹åçš„æ¨¡å—ï¼</p><p>å”¯ä¸€çš„ç¼ºç‚¹æ˜¯ï¼Œä¸ºäº†çœ‹åˆ°ä¿®æ”¹åçš„å®é™…æ•ˆæœï¼Œä½ éœ€è¦åˆ·æ–°æµè§ˆå™¨ã€‚å¦‚æœèƒ½å¤Ÿè‡ªåŠ¨åˆ·æ–°æµè§ˆå™¨å°±æ›´å¥½äº†ï¼Œå› æ­¤æ¥ä¸‹æ¥æˆ‘ä»¬ä¼šå°è¯•é€šè¿‡ <code>webpack-dev-server</code> å®ç°æ­¤åŠŸèƒ½ã€‚</p><h3 id="_1-4-4-ä½¿ç”¨-webpack-dev-server" tabindex="-1"><a class="header-anchor" href="#_1-4-4-ä½¿ç”¨-webpack-dev-server" aria-hidden="true">#</a> 1.4.4 ä½¿ç”¨ webpack-dev-server</h3><p><code>webpack-dev-server</code> ä¸ºä½ æä¾›äº†ä¸€ä¸ªåŸºæœ¬çš„ web serverï¼Œå¹¶ä¸”å…·æœ‰ live reloading(å®æ—¶é‡æ–°åŠ è½½) åŠŸèƒ½ã€‚å…ˆå®‰è£…ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack-dev-server
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå‘ŠçŸ¥ dev serverï¼Œä»ä»€ä¹ˆä½ç½®æŸ¥æ‰¾æ–‡ä»¶ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">// dev-server</span>
	<span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token keyword">static</span><span class="token operator">:</span> <span class="token string">&#39;./dist&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>05-development/webpack.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//...</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">//...</span>

 	<span class="token comment">// dev-server</span>
     	<span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
         <span class="token keyword">static</span><span class="token operator">:</span> <span class="token string">&#39;./dist&#39;</span>
 	<span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span>`
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>ä»¥ä¸Šé…ç½®å‘ŠçŸ¥ <code>webpack-dev-server</code>ï¼Œå°† <code>dist</code> ç›®å½•ä¸‹çš„æ–‡ä»¶ä½œä¸º web æœåŠ¡çš„æ ¹ç›®å½•ã€‚</p><blockquote><p>æç¤ºï¼š</p><p>webpack-dev-server åœ¨ç¼–è¯‘ä¹‹åä¸ä¼šå†™å…¥åˆ°ä»»ä½•è¾“å‡ºæ–‡ä»¶ã€‚è€Œæ˜¯å°† bundle æ–‡ä»¶ä¿ç•™åœ¨å†…å­˜ä¸­ï¼Œç„¶åå°†å®ƒä»¬ serve åˆ° server ä¸­ï¼Œå°±å¥½åƒå®ƒä»¬æ˜¯æŒ‚è½½åœ¨ server æ ¹è·¯å¾„ä¸Šçš„çœŸå®æ–‡ä»¶ä¸€æ ·ã€‚</p></blockquote><p>æ‰§è¡Œå‘½ä»¤ï¼š</p><img src="http://raink.net:8080/md-images/webpack5/img-1.3.4-2.png" alt="image-20211003093717309" style="zoom:50%;" align="left"><p>åœ¨æµè§ˆå™¨é‡Œå¯ä»¥ç›´æ¥è®¿é—®é¡µé¢ï¼š</p><img src="http://raink.net:8080/md-images/webpack5/img-1.3.4.png" alt="image-20211003093518571" style="zoom:50%;" align="left"><p>ä¿®æ”¹ä¸€ä¸‹ <code>hello-world.js</code>æ–‡ä»¶ï¼š</p><blockquote><p>05-development/src/hello-world.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">helloWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Hello world~~~&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// å¯¼å‡ºå‡½æ•°æ¨¡å—</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> helloWorld<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>è¿™æ—¶æˆ‘ä»¬ä¸ç”¨åˆ·æ–°æµè§ˆå™¨é¡µé¢ï¼Œåœ¨æ§åˆ¶å°ä¸Šèƒ½çœ‹åˆ° <code>Hello world~~~</code>è‡ªåŠ¨æ›´æ–°äº†ã€‚</p><img src="http://raink.net:8080/md-images/webpack5/img-1.3.4.2.png" alt="image-20211003093917769" style="zoom:50%;" align="left"><h2 id="_1-5-èµ„æºæ¨¡å—" tabindex="-1"><a class="header-anchor" href="#_1-5-èµ„æºæ¨¡å—" aria-hidden="true">#</a> 1.5 èµ„æºæ¨¡å—</h2><p>ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬çš„é¡¹ç›®å¯ä»¥åœ¨æ§åˆ¶å°ä¸Šæ˜¾ç¤º &quot;Hello world~~~&quot;ã€‚ç°åœ¨æˆ‘ä»¬å°è¯•æ··åˆä¸€äº›å…¶ä»–èµ„æºï¼Œæ¯”å¦‚ imagesï¼Œçœ‹çœ‹ webpack å¦‚ä½•å¤„ç†ã€‚</p><p>åœ¨ webpack å‡ºç°ä¹‹å‰ï¼Œå‰ç«¯å¼€å‘äººå‘˜ä¼šä½¿ç”¨ <a href="https://gruntjs.com/" target="_blank" rel="noopener noreferrer">grunt<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> å’Œ <a href="https://gulpjs.com/" target="_blank" rel="noopener noreferrer">gulp<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ç­‰å·¥å…·æ¥å¤„ç†èµ„æºï¼Œå¹¶å°†å®ƒä»¬ä» <code>/src</code> æ–‡ä»¶å¤¹ç§»åŠ¨åˆ° <code>/dist</code> æˆ– <code>/build</code> ç›®å½•ä¸­ã€‚webpack æœ€å‡ºè‰²çš„åŠŸèƒ½ä¹‹ä¸€å°±æ˜¯ï¼Œé™¤äº†å¼•å…¥ JavaScriptï¼Œè¿˜å¯ä»¥å†…ç½®çš„èµ„æºæ¨¡å— <a href="https://webpack.docschina.org/guides/asset-modules/" target="_blank" rel="noopener noreferrer">Asset Modules<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> <em>å¼•å…¥ä»»ä½•å…¶ä»–ç±»å‹çš„æ–‡ä»¶</em>ã€‚</p><p>èµ„æºæ¨¡å—(asset module)æ˜¯ä¸€ç§æ¨¡å—ç±»å‹ï¼Œå®ƒå…è®¸æˆ‘ä»¬åº”ç”¨ Webpack æ¥æ‰“åŒ…å…¶ä»–èµ„æºæ–‡ä»¶ï¼ˆå¦‚å­—ä½“ï¼Œå›¾æ ‡ç­‰ï¼‰</p><p>èµ„æºæ¨¡å—ç±»å‹(asset module type)ï¼Œé€šè¿‡æ·»åŠ  4 ç§æ–°çš„æ¨¡å—ç±»å‹ï¼Œæ¥æ›¿æ¢æ‰€æœ‰è¿™äº› loaderï¼š</p><ul><li><code>asset/resource</code> å‘é€ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶å¹¶å¯¼å‡º URLã€‚</li><li><code>asset/inline</code> å¯¼å‡ºä¸€ä¸ªèµ„æºçš„ data URIã€‚</li><li><code>asset/source</code> å¯¼å‡ºèµ„æºçš„æºä»£ç ã€‚</li><li><code>asset</code> åœ¨å¯¼å‡ºä¸€ä¸ª data URI å’Œå‘é€ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¹‹é—´è‡ªåŠ¨é€‰æ‹©ã€‚</li></ul><h3 id="_1-5-1-resource-èµ„æº" tabindex="-1"><a class="header-anchor" href="#_1-5-1-resource-èµ„æº" aria-hidden="true">#</a> 1.5.1 Resource èµ„æº</h3><p>ä¿®æ”¹ <code>webpack.config.js</code>é…ç½®ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// é…ç½®èµ„æºæ–‡ä»¶</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.png</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset/resource&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>06-asset-modules/webpack.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;html-webpack-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">//...</span>

	<span class="token comment">// é…ç½®èµ„æºæ–‡ä»¶</span>
	<span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.png</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset/resource&#39;</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token comment">//...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>å‡†å¤‡èµ„æºæ–‡ä»¶ï¼Œåœ¨å…¥å£æ–‡ä»¶ä¸­å¼•å…¥ï¼Œå¹¶æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šï¼š</p><img src="http://raink.net:8080/md-images/webpack5/img-1.4.1-1.png" alt="image-20211003104641137" style="zoom:50%;" align="left"><blockquote><p>06-asset-modules/src/index.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// å¯¼å…¥å‡½æ•°æ¨¡å—</span>
<span class="token keyword">import</span> helloWorld <span class="token keyword">from</span> <span class="token string">&#39;./hello-world.js&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> imgsrc <span class="token keyword">from</span> <span class="token string">&#39;./assets/img-1.png&#39;</span><span class="token punctuation">;</span>

<span class="token function">helloWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> img <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;img&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
img<span class="token punctuation">.</span>src <span class="token operator">=</span> imgsrc<span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>æ‰§è¡Œæ‰“åŒ…å‘½ä»¤ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> 06-asset-modules $ npx webpack
asset 8ec2798f81f4745a7c9b.png <span class="token number">101</span> KiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">[</span>immutable<span class="token punctuation">]</span> <span class="token punctuation">[</span>from: src/assets/img-1.png<span class="token punctuation">]</span> <span class="token punctuation">(</span>auxiliary name: main<span class="token punctuation">)</span>
asset bundle.js <span class="token number">10.5</span> KiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: main<span class="token punctuation">)</span>
asset app.html <span class="token number">326</span> bytes <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
runtime modules <span class="token number">1.72</span> KiB <span class="token number">5</span> modules
cacheable modules <span class="token number">388</span> bytes <span class="token punctuation">(</span>javascript<span class="token punctuation">)</span> <span class="token number">101</span> KiB <span class="token punctuation">(</span>asset<span class="token punctuation">)</span>
  ./src/index.js <span class="token number">208</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
  ./src/hello-world.js <span class="token number">138</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
  ./src/assets/img-1.png <span class="token number">42</span> bytes <span class="token punctuation">(</span>javascript<span class="token punctuation">)</span> <span class="token number">101</span> KiB <span class="token punctuation">(</span>asset<span class="token punctuation">)</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
webpack <span class="token number">5.54</span>.0 compiled successfully <span class="token keyword">in</span> <span class="token number">114</span> ms
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å‘ç°å›¾ç‰‡(.png)æ–‡ä»¶å·²ç»æ‰“åŒ…åˆ°äº† dis ç›®å½•ä¸‹ï¼š</p><img src="http://raink.net:8080/md-images/webpack5/img-1.4.1-2.png" alt="image-20211003105056870" style="zoom:50%;" align="left"><p>æ‰§è¡Œå¯åŠ¨æœåŠ¡å‘½ä»¤ï¼š</p><img src="http://raink.net:8080/md-images/webpack5/img-1.4.1-3.png" alt="image-20211003105414484" style="zoom:50%;"><p>æ‰“å¼€æµè§ˆå™¨ï¼š</p><img src="http://raink.net:8080/md-images/webpack5/img-1.4.1-4.png" alt="image-20211003105807364" style="zoom:50%;" align="left"><ul><li><p>è‡ªå®šä¹‰è¾“å‡ºæ–‡ä»¶å</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>asset/resource</code> æ¨¡å—ä»¥ <code>[contenthash][ext][query]</code> æ–‡ä»¶åå‘é€åˆ°è¾“å‡ºç›®å½•ã€‚</p><p>å¯ä»¥é€šè¿‡åœ¨ webpack é…ç½®ä¸­è®¾ç½® <a href="https://webpack.docschina.org/configuration/output/#outputassetmodulefilename" target="_blank" rel="noopener noreferrer"><code>output.assetModuleFilename</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> æ¥ä¿®æ”¹æ­¤æ¨¡æ¿å­—ç¬¦ä¸²ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>output: {
   assetModuleFilename: &#39;images/[contenthash][ext][query]&#39;
},
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><blockquote><p>06-asset-modules/webpack.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//...</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
 <span class="token comment">//...</span>

 <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
       <span class="token comment">//...</span>

    <span class="token literal-property property">assetModuleFilename</span><span class="token operator">:</span> <span class="token string">&#39;images/[contenthash][ext][query]&#39;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>

 <span class="token comment">//...</span>
    <span class="token punctuation">}</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span>`
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>æ‰§è¡Œç¼–è¯‘ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> 06-asset-modules $ npx webpack
assets by status <span class="token number">101</span> KiB <span class="token punctuation">[</span>cached<span class="token punctuation">]</span> <span class="token number">1</span> asset
asset bundle.js <span class="token number">10.5</span> KiB <span class="token punctuation">[</span>compared <span class="token keyword">for</span> emit<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: main<span class="token punctuation">)</span>
asset app.html <span class="token number">326</span> bytes <span class="token punctuation">[</span>compared <span class="token keyword">for</span> emit<span class="token punctuation">]</span>
runtime modules <span class="token number">1.72</span> KiB <span class="token number">5</span> modules
cacheable modules <span class="token number">356</span> bytes <span class="token punctuation">(</span>javascript<span class="token punctuation">)</span> <span class="token number">101</span> KiB <span class="token punctuation">(</span>asset<span class="token punctuation">)</span>
  ./src/index.js <span class="token number">208</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
  ./src/hello-world.js <span class="token number">106</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
  ./src/assets/img-1.png <span class="token number">42</span> bytes <span class="token punctuation">(</span>javascript<span class="token punctuation">)</span> <span class="token number">101</span> KiB <span class="token punctuation">(</span>asset<span class="token punctuation">)</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
webpack <span class="token number">5.54</span>.0 compiled successfully <span class="token keyword">in</span> <span class="token number">125</span> ms
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><img src="http://raink.net:8080/md-images/webpack5/img-1.4.1-5.png" alt="image-20211003115500915" style="zoom:50%;" align="left"><p>å¦ä¸€ç§è‡ªå®šä¹‰è¾“å‡ºæ–‡ä»¶åçš„æ–¹å¼æ˜¯ï¼Œå°†æŸäº›èµ„æºå‘é€åˆ°æŒ‡å®šç›®å½•ï¼Œä¿®æ”¹é…ç½®ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
	<span class="token punctuation">{</span>
		<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.png</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
		<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset/resource&#39;</span><span class="token punctuation">,</span>

		<span class="token comment">// ä¼˜å…ˆçº§é«˜äº assetModuleFilename</span>
		<span class="token literal-property property">generator</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;images/[contenthash][ext][query]&#39;</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>06-asset-modules/webpack.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//...</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
 <span class="token comment">//...</span>

 <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
     <span class="token comment">//...</span>

   <span class="token comment">// é…ç½®èµ„æºæ–‡ä»¶</span>
        <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
           <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
               <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.png</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
               <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset/resource&#39;</span><span class="token punctuation">,</span>

               <span class="token comment">// ä¼˜å…ˆçº§é«˜äº assetModuleFilename</span>
             <span class="token literal-property property">generator</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;images/[contenthash][ext][query]&#39;</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
       <span class="token punctuation">}</span><span class="token punctuation">,</span>

   <span class="token comment">//...</span>
   <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>æ‰§è¡Œç¼–è¯‘ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> 06-asset-modules $ npx webpack
assets by status <span class="token number">102</span> KiB <span class="token punctuation">[</span>cached<span class="token punctuation">]</span> <span class="token number">2</span> assets
assets by path <span class="token builtin class-name">.</span> <span class="token number">10.5</span> KiB
  asset bundle.js <span class="token number">10.5</span> KiB <span class="token punctuation">[</span>compared <span class="token keyword">for</span> emit<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: main<span class="token punctuation">)</span>
  asset app.html <span class="token number">71</span> bytes <span class="token punctuation">[</span>compared <span class="token keyword">for</span> emit<span class="token punctuation">]</span>
runtime modules <span class="token number">1.72</span> KiB <span class="token number">5</span> modules
cacheable modules <span class="token number">356</span> bytes <span class="token punctuation">(</span>javascript<span class="token punctuation">)</span> <span class="token number">101</span> KiB <span class="token punctuation">(</span>asset<span class="token punctuation">)</span>
  ./src/index.js <span class="token number">208</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
  ./src/hello-world.js <span class="token number">106</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
  ./src/assets/img-1.png <span class="token number">42</span> bytes <span class="token punctuation">(</span>javascript<span class="token punctuation">)</span> <span class="token number">101</span> KiB <span class="token punctuation">(</span>asset<span class="token punctuation">)</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
webpack <span class="token number">5.54</span>.0 compiled successfully <span class="token keyword">in</span> <span class="token number">113</span> ms
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><img src="http://raink.net:8080/md-images/webpack5/img-1.4.1-5.png" alt="image-20211003115500915" style="zoom:50%;" align="left"><p>è¾“å‡ºç»“æœä¸ <code>assetModuleFilename</code> è®¾ç½®ä¸€æ ·ã€‚</p><h3 id="_1-5-2-inline-èµ„æº" tabindex="-1"><a class="header-anchor" href="#_1-5-2-inline-èµ„æº" aria-hidden="true">#</a> 1.5.2 inline èµ„æº</h3><p>ä¿®æ”¹ <code>webpack.config.js</code>é…ç½®ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// é…ç½®èµ„æºæ–‡ä»¶</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.svg</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset/inline&#39;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>06-asset-modules/webpack.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//...</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">//...</span>

	<span class="token comment">// é…ç½®èµ„æºæ–‡ä»¶</span>
	<span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token comment">//...</span>
			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.svg</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset/inline&#39;</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">//...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>æ‰§è¡Œå¯åŠ¨æœåŠ¡å‘½ä»¤ï¼š</p><figure><img src="http://raink.net:8080/md-images/webpack5/img-1.4.2-1.png" alt="image-20211003213650735" tabindex="0" loading="lazy"><figcaption>image-20211003213650735</figcaption></figure><p>æ‰“å¼€æµè§ˆå™¨ï¼š</p><figure><img src="http://raink.net:8080/md-images/webpack5/img-1.4.2-2.png" alt="image-20211003213936854" tabindex="0" loading="lazy"><figcaption>image-20211003213936854</figcaption></figure><p>å¯è§ï¼Œ <code>.svg</code> æ–‡ä»¶éƒ½å°†ä½œä¸º data URI æ³¨å…¥åˆ° bundle ä¸­ã€‚</p><ul><li>è‡ªå®šä¹‰ data URI ç”Ÿæˆå™¨</li></ul><p>webpack è¾“å‡ºçš„ data URIï¼Œé»˜è®¤æ˜¯å‘ˆç°ä¸ºä½¿ç”¨ Base64 ç®—æ³•ç¼–ç çš„æ–‡ä»¶å†…å®¹ã€‚</p><p>å¦‚æœè¦ä½¿ç”¨è‡ªå®šä¹‰ç¼–ç ç®—æ³•ï¼Œåˆ™å¯ä»¥æŒ‡å®šä¸€ä¸ªè‡ªå®šä¹‰å‡½æ•°æ¥ç¼–ç æ–‡ä»¶å†…å®¹ã€‚</p><p>å®‰è£…è‡ªå®šä¹‰å‡½æ•°æ¨¡å—ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> webpack5 $ <span class="token function">npm</span> <span class="token function">install</span> mini-svg-data-uri <span class="token parameter variable">-D</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> svgToMiniDataURI <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;mini-svg-data-uri&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
	<span class="token punctuation">{</span>
		<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.svg</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
		<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset/inline&#39;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">generator</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token function-variable function">dataUrl</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">content</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
				content <span class="token operator">=</span> content<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> <span class="token function">svgToMiniDataURI</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>06-asset-modules/webpack.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//...</span>
<span class="token keyword">const</span> svgToMiniDataURI <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;mini-svg-data-uri&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">//...</span>

	<span class="token comment">// é…ç½®èµ„æºæ–‡ä»¶</span>
	<span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token comment">//...</span>
			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.svg</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset/inline&#39;</span><span class="token punctuation">,</span>
				<span class="token literal-property property">generator</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token function-variable function">dataUrl</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">content</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
						content <span class="token operator">=</span> content<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">return</span> <span class="token function">svgToMiniDataURI</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">//...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>ç°åœ¨ï¼Œæ‰€æœ‰ <code>.svg</code> æ–‡ä»¶éƒ½å°†é€šè¿‡ <code>mini-svg-data-uri</code> åŒ…è¿›è¡Œç¼–ç ã€‚é‡æ–°å¯åŠ¨æœåŠ¡ï¼Œåœ¨æµè§ˆå™¨æŸ¥çœ‹æ•ˆæœï¼š</p><figure><img src="http://raink.net:8080/md-images/webpack5/img-1.4.2-3.png" alt="image-20211003221026972" tabindex="0" loading="lazy"><figcaption>image-20211003221026972</figcaption></figure><h3 id="_1-5-3-source-èµ„æº" tabindex="-1"><a class="header-anchor" href="#_1-5-3-source-èµ„æº" aria-hidden="true">#</a> 1.5.3 source èµ„æº</h3><p>source èµ„æºï¼Œå¯¼å‡ºèµ„æºçš„æºä»£ç ã€‚ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.txt</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
		<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset/source&#39;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>06-asset-modules/webpack.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//...</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">//...</span>

	<span class="token comment">// é…ç½®èµ„æºæ–‡ä»¶</span>
	<span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token comment">//...</span>

			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.txt</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset/source&#39;</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">//...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>åœ¨ assets é‡Œåˆ›å»ºä¸€ä¸ª <code>example.txt</code>æ–‡ä»¶ï¼š</p><blockquote><p>06-asset-modules/src/assets/example.txt</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>hello webpack
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></blockquote><p>åœ¨å…¥å£æ–‡ä»¶é‡Œå¼•å…¥ä¸€ä¸ª <code>.txt</code>æ–‡ä»¶ï¼Œæ·»åŠ å†…å®¹ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> exampleText <span class="token keyword">from</span> <span class="token string">&#39;./assets/example.txt&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> block <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;div&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
block<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cssText <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">width: 200px; height: 200px; background: aliceblue</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
block<span class="token punctuation">.</span>textContent <span class="token operator">=</span> exampleText<span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>block<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>06-asset-modules/src/index.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// å¯¼å…¥å‡½æ•°æ¨¡å—</span>
<span class="token comment">//...</span>
<span class="token keyword">import</span> exampleText <span class="token keyword">from</span> <span class="token string">&#39;./assets/example.txt&#39;</span><span class="token punctuation">;</span>

<span class="token comment">//...</span>

<span class="token keyword">const</span> block <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;div&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
block<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cssText <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">width: 200px; height: 200px; background: aliceblue</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
block<span class="token punctuation">.</span>textContent <span class="token operator">=</span> exampleText<span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>block<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//...</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>å¯åŠ¨æœåŠ¡ï¼Œæ‰“å¼€æµè§ˆå™¨ï¼š</p><img src="http://raink.net:8080/md-images/webpack5/img-1.4.3-1.png" alt="image-20211004072019253" style="zoom:33%;" align="left"><p>æ‰€æœ‰ <code>.txt</code> æ–‡ä»¶å°†åŸæ ·æ³¨å…¥åˆ° bundle ä¸­ã€‚</p><h3 id="_1-5-4-é€šç”¨èµ„æºç±»å‹" tabindex="-1"><a class="header-anchor" href="#_1-5-4-é€šç”¨èµ„æºç±»å‹" aria-hidden="true">#</a> 1.5.4 é€šç”¨èµ„æºç±»å‹</h3><p>é€šç”¨èµ„æºç±»å‹ <code>asset</code> , åœ¨å¯¼å‡ºä¸€ä¸ª data URI å’Œå‘é€ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¹‹é—´è‡ªåŠ¨é€‰æ‹©ã€‚</p><p>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.jpg</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
		<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset&#39;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨ï¼Œwebpack å°†æŒ‰ç…§é»˜è®¤æ¡ä»¶ï¼Œè‡ªåŠ¨åœ°åœ¨ <code>resource</code> å’Œ <code>inline</code> ä¹‹é—´è¿›è¡Œé€‰æ‹©ï¼šå°äº 8kb çš„æ–‡ä»¶ï¼Œå°†ä¼šè§†ä¸º <code>inline</code> æ¨¡å—ç±»å‹ï¼Œå¦åˆ™ä¼šè¢«è§†ä¸º <code>resource</code> æ¨¡å—ç±»å‹ã€‚</p><p>å¯ä»¥é€šè¿‡åœ¨ webpack é…ç½®çš„ module rule å±‚çº§ä¸­ï¼Œè®¾ç½® <a href="https://webpack.docschina.org/configuration/module/#ruleparserdataurlcondition" target="_blank" rel="noopener noreferrer"><code>Rule.parser.dataUrlCondition.maxSize</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> é€‰é¡¹æ¥ä¿®æ”¹æ­¤æ¡ä»¶ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
	<span class="token punctuation">{</span>
		<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.jpg</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
		<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset&#39;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">dataUrlCondition</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">maxSize</span><span class="token operator">:</span> <span class="token number">4</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">,</span> <span class="token comment">// 4kb</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>06-asset-modules/webpack.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//...</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">//...</span>

	<span class="token comment">// é…ç½®èµ„æºæ–‡ä»¶</span>
	<span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token comment">//...</span>

			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.jpg</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset&#39;</span><span class="token punctuation">,</span>
				<span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">dataUrlCondition</span><span class="token operator">:</span> <span class="token punctuation">{</span>
						<span class="token literal-property property">maxSize</span><span class="token operator">:</span> <span class="token number">4</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">,</span> <span class="token comment">// 4kb</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">//...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>åœ¨ <code>assets</code>ç›®å½•ä¸‹åˆ›å»º <code>.jpg</code> æ–‡ä»¶ï¼Œç„¶ååœ¨å…¥å£æ–‡ä»¶ä¸­å¼•å…¥ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> jpgMap <span class="token keyword">from</span> <span class="token string">&#39;./assets/qianfeng-sem.jpg&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> img3 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;img&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
img3<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cssText <span class="token operator">=</span> <span class="token string">&#39;width: 600px; height: 240px; display: block&#39;</span><span class="token punctuation">;</span>
img3<span class="token punctuation">.</span>src <span class="token operator">=</span> jpgMap<span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>img3<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>06-asset-modules/src/index.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// å¯¼å…¥å‡½æ•°æ¨¡å—</span>
<span class="token comment">//...</span>
<span class="token keyword">import</span> jpgMap <span class="token keyword">from</span> <span class="token string">&#39;./assets/qianfeng-sem.jpg&#39;</span><span class="token punctuation">;</span>

<span class="token comment">//...</span>
<span class="token keyword">const</span> img3 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;img&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
img3<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cssText <span class="token operator">=</span> <span class="token string">&#39;width: 600px; height: 240px; display: block&#39;</span><span class="token punctuation">;</span>
img3<span class="token punctuation">.</span>src <span class="token operator">=</span> jpgMap<span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>img3<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>å¯åŠ¨æœåŠ¡ï¼Œæ‰“å¼€æµè§ˆå™¨ï¼š</p><img src="http://raink.net:8080/md-images/webpack5/img-1.4.4-2.png" alt="image-20211004075125478" style="zoom:33%;" align="left"><p>æ‰§è¡Œç¼–è¯‘å‘½ä»¤ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> 06-asset-modules $ npx webpack
assets by status <span class="token number">101</span> KiB <span class="token punctuation">[</span>cached<span class="token punctuation">]</span> <span class="token number">1</span> asset
assets by status <span class="token number">653</span> KiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
  asset images/33120e6c4bd92df7bec8.jpg <span class="token number">637</span> KiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">[</span>immutable<span class="token punctuation">]</span> <span class="token punctuation">[</span>from: src/assets/qianfeng-sem.jpg<span class="token punctuation">]</span> <span class="token punctuation">(</span>auxiliary name: main<span class="token punctuation">)</span>
  asset bundle.js <span class="token number">15.7</span> KiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: main<span class="token punctuation">)</span>
asset app.html <span class="token number">326</span> bytes <span class="token punctuation">[</span>compared <span class="token keyword">for</span> emit<span class="token punctuation">]</span>
runtime modules <span class="token number">1.72</span> KiB <span class="token number">5</span> modules
cacheable modules <span class="token number">4.03</span> KiB <span class="token punctuation">(</span>javascript<span class="token punctuation">)</span> <span class="token number">738</span> KiB <span class="token punctuation">(</span>asset<span class="token punctuation">)</span>
  asset modules <span class="token number">3.1</span> KiB <span class="token punctuation">(</span>javascript<span class="token punctuation">)</span> <span class="token number">738</span> KiB <span class="token punctuation">(</span>asset<span class="token punctuation">)</span>
    ./src/assets/img-1.png <span class="token number">42</span> bytes <span class="token punctuation">(</span>javascript<span class="token punctuation">)</span> <span class="token number">101</span> KiB <span class="token punctuation">(</span>asset<span class="token punctuation">)</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
    ./src/assets/webpack-logo.svg <span class="token number">2.99</span> KiB <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
    ./src/assets/example.txt <span class="token number">25</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
    ./src/assets/qianfeng-sem.jpg <span class="token number">42</span> bytes <span class="token punctuation">(</span>javascript<span class="token punctuation">)</span> <span class="token number">637</span> KiB <span class="token punctuation">(</span>asset<span class="token punctuation">)</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
  javascript modules <span class="token number">949</span> bytes
    ./src/index.js <span class="token number">843</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
    ./src/hello-world.js <span class="token number">106</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
webpack <span class="token number">5.54</span>.0 compiled successfully <span class="token keyword">in</span> <span class="token number">139</span> ms
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><img src="http://raink.net:8080/md-images/webpack5/img-1.4.4-3.png" alt="image-20211004075657443" style="zoom:50%;" align="left"><p>å‘ç°å½“å‰çš„ <code>.jpg</code>æ–‡ä»¶è¢«æ‰“åŒ…æˆäº†å•ç‹¬çš„æ–‡ä»¶ï¼Œå› ä¸ºæ­¤æ–‡ä»¶å¤§å°è¶…è¿‡äº† <code>4kb</code>ã€‚</p><h2 id="_1-6-ç®¡ç†èµ„æº" tabindex="-1"><a class="header-anchor" href="#_1-6-ç®¡ç†èµ„æº" aria-hidden="true">#</a> 1.6 ç®¡ç†èµ„æº</h2><p>åœ¨ä¸Šä¸€ç« ï¼Œæˆ‘ä»¬è®²è§£äº†å››ç§èµ„æºæ¨¡å—å¼•å…¥å¤–éƒ¨èµ„æºã€‚é™¤äº†èµ„æºæ¨¡å—ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ loader å¼•å…¥å…¶ä»–ç±»å‹çš„æ–‡ä»¶ã€‚</p><h3 id="_1-6-1-ä»€ä¹ˆæ˜¯-loader" tabindex="-1"><a class="header-anchor" href="#_1-6-1-ä»€ä¹ˆæ˜¯-loader" aria-hidden="true">#</a> 1.6.1 ä»€ä¹ˆæ˜¯ loader</h3><p>webpack åªèƒ½ç†è§£ JavaScript å’Œ JSON æ–‡ä»¶ï¼Œè¿™æ˜¯ webpack å¼€ç®±å¯ç”¨çš„è‡ªå¸¦èƒ½åŠ›ã€‚<strong>loader</strong> è®© webpack èƒ½å¤Ÿå»å¤„ç†å…¶ä»–ç±»å‹çš„æ–‡ä»¶ï¼Œå¹¶å°†å®ƒä»¬è½¬æ¢ä¸ºæœ‰æ•ˆ <a href="https://webpack.docschina.org/concepts/modules" target="_blank" rel="noopener noreferrer">æ¨¡å—<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼Œä»¥ä¾›åº”ç”¨ç¨‹åºä½¿ç”¨ï¼Œä»¥åŠè¢«æ·»åŠ åˆ°ä¾èµ–å›¾ä¸­ã€‚</p><p>åœ¨ webpack çš„é…ç½®ä¸­ï¼Œ<strong>loader</strong> æœ‰ä¸¤ä¸ªå±æ€§ï¼š</p><ol><li><code>test</code> å±æ€§ï¼Œè¯†åˆ«å‡ºå“ªäº›æ–‡ä»¶ä¼šè¢«è½¬æ¢ã€‚</li><li><code>use</code> å±æ€§ï¼Œå®šä¹‰å‡ºåœ¨è¿›è¡Œè½¬æ¢æ—¶ï¼Œåº”è¯¥ä½¿ç”¨å“ªä¸ª loaderã€‚</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;my-first-webpack.bundle.js&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.txt$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token string">&#39;raw-loader&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»¥ä¸Šé…ç½®ä¸­ï¼Œå¯¹ä¸€ä¸ªå•ç‹¬çš„ module å¯¹è±¡å®šä¹‰äº† <code>rules</code> å±æ€§ï¼Œé‡Œé¢åŒ…å«ä¸¤ä¸ªå¿…é¡»å±æ€§ï¼š<code>test</code> å’Œ <code>use</code>ã€‚è¿™å‘Šè¯‰ webpack ç¼–è¯‘å™¨(compiler) å¦‚ä¸‹ä¿¡æ¯ï¼š</p><blockquote><p>â€œå˜¿ï¼Œwebpack ç¼–è¯‘å™¨ï¼Œå½“ä½ ç¢°åˆ°ã€Œåœ¨ <code>require()</code>/<code>import</code> è¯­å¥ä¸­è¢«è§£æä¸º &#39;.txt&#39; çš„è·¯å¾„ã€æ—¶ï¼Œåœ¨ä½ å¯¹å®ƒæ‰“åŒ…ä¹‹å‰ï¼Œå…ˆ <strong>use(ä½¿ç”¨)</strong> <code>raw-loader</code> è½¬æ¢ä¸€ä¸‹ã€‚â€</p></blockquote><h3 id="_1-6-2-åŠ è½½-css" tabindex="-1"><a class="header-anchor" href="#_1-6-2-åŠ è½½-css" aria-hidden="true">#</a> 1.6.2 åŠ è½½ CSS</h3><p>ä¸ºäº†åœ¨ JavaScript æ¨¡å—ä¸­ <code>import</code> ä¸€ä¸ª CSS æ–‡ä»¶ï¼Œä½ éœ€è¦å®‰è£… <a href="https://webpack.docschina.org/loaders/style-loader" target="_blank" rel="noopener noreferrer">style-loader<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> å’Œ <a href="https://webpack.docschina.org/loaders/css-loader" target="_blank" rel="noopener noreferrer">css-loader<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼Œå¹¶åœ¨ <a href="https://webpack.docschina.org/configuration/module" target="_blank" rel="noopener noreferrer"><code>module</code> é…ç½®<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ä¸­æ·»åŠ è¿™äº› loaderï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> webpack5 $ <span class="token function">npm</span> <span class="token function">install</span> --save-dev style-loader css-loader
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;style-loader&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;css-loader&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>07-manage-assets/webpack.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//...</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">//...</span>

	<span class="token comment">// é…ç½®èµ„æºæ–‡ä»¶</span>
	<span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token comment">//...</span>

			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;style-loader&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;css-loader&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">//...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>æ¨¡å— loader å¯ä»¥é“¾å¼è°ƒç”¨ã€‚é“¾ä¸­çš„æ¯ä¸ª loader éƒ½å°†å¯¹èµ„æºè¿›è¡Œè½¬æ¢ã€‚é“¾ä¼šé€†åºæ‰§è¡Œã€‚ç¬¬ä¸€ä¸ª loader å°†å…¶ç»“æœï¼ˆè¢«è½¬æ¢åçš„èµ„æºï¼‰ä¼ é€’ç»™ä¸‹ä¸€ä¸ª loaderï¼Œä¾æ­¤ç±»æ¨ã€‚æœ€åï¼Œwebpack æœŸæœ›é“¾ä¸­çš„æœ€åçš„ loader è¿”å› JavaScriptã€‚</p><p>åº”ä¿è¯ loader çš„å…ˆåé¡ºåºï¼š<a href="https://webpack.docschina.org/loaders/style-loader" target="_blank" rel="noopener noreferrer"><code>&#39;style-loader&#39;</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> åœ¨å‰ï¼Œè€Œ <a href="https://webpack.docschina.org/loaders/css-loader" target="_blank" rel="noopener noreferrer"><code>&#39;css-loader&#39;</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> åœ¨åã€‚å¦‚æœä¸éµå®ˆæ­¤çº¦å®šï¼Œwebpack å¯èƒ½ä¼šæŠ›å‡ºé”™è¯¯ã€‚webpack æ ¹æ®æ­£åˆ™è¡¨è¾¾å¼ï¼Œæ¥ç¡®å®šåº”è¯¥æŸ¥æ‰¾å“ªäº›æ–‡ä»¶ï¼Œå¹¶å°†å…¶æä¾›ç»™æŒ‡å®šçš„ loaderã€‚åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæ‰€æœ‰ä»¥ <code>.css</code> ç»“å°¾çš„æ–‡ä»¶ï¼Œéƒ½å°†è¢«æä¾›ç»™ <code>style-loader</code> å’Œ <code>css-loader</code>ã€‚</p><p>è¿™ä½¿ä½ å¯ä»¥åœ¨ä¾èµ–äºæ­¤æ ·å¼çš„ js æ–‡ä»¶ä¸­ <code>import &#39;./style.css&#39;</code>ã€‚ç°åœ¨ï¼Œåœ¨æ­¤æ¨¡å—æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå«æœ‰ CSS å­—ç¬¦ä¸²çš„ <code>&lt;style&gt;</code> æ ‡ç­¾ï¼Œå°†è¢«æ’å…¥åˆ° html æ–‡ä»¶çš„ <code>&lt;head&gt;</code> ä¸­ã€‚</p><p>æˆ‘ä»¬å°è¯•ä¸€ä¸‹ï¼Œé€šè¿‡åœ¨é¡¹ç›®ä¸­æ·»åŠ ä¸€ä¸ªæ–°çš„ <code>style.css</code> æ–‡ä»¶ï¼Œå¹¶å°†å…¶ import åˆ°æˆ‘ä»¬çš„ <code>index.js</code> ä¸­ï¼š</p><img src="http://raink.net:8080/md-images/webpack5/img-1.5.2-1.png" alt="image-20211004090930829" style="zoom:50%;" align="left"><blockquote><p>07-manage-assets/src/style.css</p><div class="language-css line-numbers-mode" data-ext="css"><pre class="language-css"><code><span class="token selector">.hello</span> <span class="token punctuation">{</span>
	<span class="token property">color</span><span class="token punctuation">:</span> #f9efd4<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>åœ¨å…¥å£æ–‡ä»¶é‡Œå¯¼å…¥ <code>.css</code>æ–‡ä»¶ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token string">&#39;./style.css&#39;</span><span class="token punctuation">;</span>

document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>07-manage-assets/src/index.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// å¯¼å…¥å‡½æ•°æ¨¡å—</span>
<span class="token comment">//...</span>
<span class="token keyword">import</span> <span class="token string">&#39;./style.css&#39;</span><span class="token punctuation">;</span>

<span class="token comment">//...</span>

document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>å¯åŠ¨æœåŠ¡ï¼Œæ‰“å¼€æµè§ˆå™¨ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> 07-manage-assets $ npx webpack serve <span class="token parameter variable">--open</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><img src="http://raink.net:8080/md-images/webpack5/img-1.5.2-2.png" alt="image-20211004093257741"><p>ä½ åº”è¯¥çœ‹åˆ°é¡µé¢èƒŒæ™¯é¢œè‰²æ˜¯æµ…é»„è‰²ã€‚è¦æŸ¥çœ‹ webpack åšäº†ä»€ä¹ˆï¼Œè¯·æ£€æŸ¥é¡µé¢ï¼ˆä¸è¦æŸ¥çœ‹é¡µé¢æºä»£ç ï¼Œå®ƒä¸ä¼šæ˜¾ç¤ºç»“æœï¼Œå› ä¸º <code>&lt;style&gt;</code> æ ‡ç­¾æ˜¯ç”± JavaScript åŠ¨æ€åˆ›å»ºçš„ï¼‰ï¼Œå¹¶æŸ¥çœ‹é¡µé¢çš„ head æ ‡ç­¾ï¼ŒåŒ…å« style å—å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨ <code>index.js</code> ä¸­ import çš„ css æ–‡ä»¶ä¸­çš„æ ·å¼ã€‚</p><p>ç°æœ‰çš„ loader å¯ä»¥æ”¯æŒä»»ä½•ä½ å¯ä»¥æƒ³åˆ°çš„ CSS é£æ ¼ - <a href="https://webpack.docschina.org/loaders/sass-loader" target="_blank" rel="noopener noreferrer">sass<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> å’Œ <a href="https://webpack.docschina.org/loaders/less-loader" target="_blank" rel="noopener noreferrer">less<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ç­‰ã€‚å®‰è£… less-loaderï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> webpack5 $ <span class="token function">npm</span> <span class="token function">install</span> <span class="token function">less</span> less-loader --save-dev
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;style-loader&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;css-loader&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;less-loader&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>07-manage-assets/webpack.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//...</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">//...</span>

	<span class="token comment">// é…ç½®èµ„æºæ–‡ä»¶</span>
	<span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token comment">//...</span>

			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;style-loader&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;css-loader&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;less-loader&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token comment">//...</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">//...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>åœ¨é¡¹ç›®<code>src</code>ç›®å½•ä¸‹åˆ›å»º <code>style.less</code>æ–‡ä»¶ï¼š</p><div class="language-less line-numbers-mode" data-ext="less"><pre class="language-less"><code><span class="token variable">@color<span class="token punctuation">:</span></span> red<span class="token punctuation">;</span>
<span class="token selector">.world</span> <span class="token punctuation">{</span>
	<span class="token property">color</span><span class="token punctuation">:</span> <span class="token variable">@color</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨å…¥å£æ–‡ä»¶ä¸­å¼•å…¥ <code>.less</code> æ–‡ä»¶ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token string">&#39;./style.less&#39;</span><span class="token punctuation">;</span>

document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&#39;world&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>07-manage-assets/src/index.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// å¯¼å…¥æ¨¡å—</span>
<span class="token comment">//...</span>
<span class="token keyword">import</span> <span class="token string">&#39;./style.less&#39;</span><span class="token punctuation">;</span>

<span class="token comment">//...</span>

document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&#39;world&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><figure><img src="http://raink.net:8080/md-images/webpack5/img-1.5.2-3.png" alt="image-20211004100531396" tabindex="0" loading="lazy"><figcaption>image-20211004100531396</figcaption></figure><p>ç”±é¢„è§ˆçš„æ•ˆæœå¯è§ï¼Œé¡µé¢çš„æ–‡å­—éƒ½æ·»åŠ äº†â€œçº¢è‰²â€çš„æ ·å¼ã€‚</p><h3 id="_1-6-3-æŠ½ç¦»å’Œå‹ç¼©-css" tabindex="-1"><a class="header-anchor" href="#_1-6-3-æŠ½ç¦»å’Œå‹ç¼©-css" aria-hidden="true">#</a> 1.6.3 æŠ½ç¦»å’Œå‹ç¼© CSS</h3><p>åœ¨å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è¿›è¡Œå‹ç¼© CSSï¼Œä»¥ä¾¿åœ¨ç”Ÿäº§ç¯å¢ƒä¸­èŠ‚çœåŠ è½½æ—¶é—´ï¼ŒåŒæ—¶è¿˜å¯ä»¥å°† CSS æ–‡ä»¶æŠ½ç¦»æˆä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ã€‚å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œéœ€è¦ <code>mini-css-extract-plugin</code>è¿™ä¸ªæ’ä»¶æ¥å¸®å¿™ã€‚å®‰è£…æ’ä»¶ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> webpack5 $ <span class="token function">npm</span> <span class="token function">install</span> mini-css-extract-plugin --save-dev
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æœ¬æ’ä»¶ä¼šå°† CSS æå–åˆ°å•ç‹¬çš„æ–‡ä»¶ä¸­ï¼Œä¸ºæ¯ä¸ªåŒ…å« CSS çš„ JS æ–‡ä»¶åˆ›å»ºä¸€ä¸ª CSS æ–‡ä»¶ï¼Œå¹¶ä¸”æ”¯æŒ CSS å’Œ SourceMaps çš„æŒ‰éœ€åŠ è½½ã€‚</p><p>æœ¬æ’ä»¶åŸºäº webpack v5 çš„æ–°ç‰¹æ€§æ„å»ºï¼Œå¹¶ä¸”éœ€è¦ webpack 5 æ‰èƒ½æ­£å¸¸å·¥ä½œã€‚</p><p>ä¹‹åå°† loader ä¸ plugin æ·»åŠ åˆ°ä½ çš„ <code>webpack</code> é…ç½®æ–‡ä»¶ä¸­ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;mini-css-extract-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token punctuation">{</span>
			<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
			<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> <span class="token string">&#39;css-loader&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>07-manage-assets/webpack.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//...</span>
<span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;mini-css-extract-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">//...</span>

	<span class="token comment">// é…ç½®èµ„æºæ–‡ä»¶</span>
	<span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> <span class="token string">&#39;css-loader&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token comment">//...</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">//...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>æ‰§è¡Œç¼–è¯‘ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> 07-manage-assets $ npx webpack
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><img src="http://raink.net:8080/md-images/webpack5/img-1.5.2-4.png" alt="image-20211004102451643" style="zoom:50%;" align="left"><p><em>å•ç‹¬çš„ <code>mini-css-extract-plugin</code> æ’ä»¶ä¸ä¼šå°†è¿™äº› CSS åŠ è½½åˆ°é¡µé¢ä¸­</em>ã€‚è¿™é‡Œ*<a href="https://github.com/jantimon/html-webpack-plugin" target="_blank" rel="noopener noreferrer"><code>html-webpack-plugin</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> å¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆ* <code>link</code> <em>æ ‡ç­¾æˆ–è€…åœ¨åˆ›å»º</em> <code>index.html</code> <em>æ–‡ä»¶æ—¶ä½¿ç”¨</em> <code>link</code> <em>æ ‡ç­¾ã€‚</em></p><blockquote><p>07-manage-assets/dist/app.html</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>åƒé”‹å¤§å‰ç«¯æ•™ç ”é™¢-Webpack5å­¦ä¹ æŒ‡å—<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>main.css<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">defer</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bundle.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>è¿™æ—¶ï¼Œ<code>link</code>æ ‡ç­¾å·²ç»ç”Ÿæˆå‡ºæ¥äº†ï¼ŒæŠŠæˆ‘ä»¬æ‰“åŒ…å¥½çš„ <code>main.css</code> æ–‡ä»¶åŠ è½½è¿›æ¥ã€‚æˆ‘ä»¬å‘ç°ï¼Œ<code>main.css</code>æ–‡ä»¶è¢«æ‰“åŒ…æŠ½ç¦»åˆ° <code>dist</code> æ ¹ç›®å½•ä¸‹ï¼Œèƒ½å¦å°†å…¶æ‰“åŒ…åˆ°ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶å¤¹é‡Œå‘¢ï¼Ÿä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;styles/[contenthash].css&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>07-manage-assets/webpack.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//...</span>

<span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;mini-css-extract-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">//...</span>

	<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token comment">//...</span>

		<span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;styles/[contenthash].css&#39;</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>

	<span class="token comment">//...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>å†æ¬¡æ‰§è¡Œç¼–è¯‘ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> 07-manage-assets $ npx webpack
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æŸ¥çœ‹æ‰“åŒ…å®Œæˆåçš„ç›®å½•å’Œæ–‡ä»¶ï¼š</p><img src="http://raink.net:8080/md-images/webpack5/img-1.5.3.1.png" alt="image-20211004104521902" style="zoom:50%;" align="left"><blockquote><p>07-manage-assets/dist/app.html</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>åƒé”‹å¤§å‰ç«¯æ•™ç ”é™¢-Webpack5å­¦ä¹ æŒ‡å—<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>styles/c8d1b95f617a81aa500c.css<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">defer</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bundle.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>ç°åœ¨ï¼Œ<code>app.html</code>æ–‡ä»¶å¼•ç”¨çš„è·¯å¾„åŒæ ·æ›´æ–°äº†ã€‚</p><p>æ‰“å¼€æŸ¥çœ‹ <code>.css</code> æ–‡ä»¶ï¼š</p><blockquote><p>07-manage-assets/dist/styles/c8d1b95f617a81aa500c.css</p><div class="language-css line-numbers-mode" data-ext="css"><pre class="language-css"><code><span class="token comment">/*!******************************************************************!*\
 !*** css ../node_modules/css-loader/dist/cjs.js!./src/style.css ***!
 \******************************************************************/</span>
<span class="token selector">.hello</span> <span class="token punctuation">{</span>
	<span class="token property">background-color</span><span class="token punctuation">:</span> #f9efd4<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3R5bGVzLzRhMDUzMTlkYWM5MDJlMjc5ODM5LmNzcyIsIm1hcHBpbmdzIjoiOzs7QUFBQTtFQUNFLHlCQUF5QjtBQUMzQixDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3N0eWxlLmNzcyJdLCJzb3VyY2VzQ29udGVudCI6WyIuaGVsbG8ge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjllZmQ0O1xufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>å‘ç°æ–‡ä»¶å¹¶æ²¡æœ‰å‹ç¼©å’Œä¼˜åŒ–ï¼Œä¸ºäº†å‹ç¼©è¾“å‡ºæ–‡ä»¶ï¼Œè¯·ä½¿ç”¨ç±»ä¼¼äº <a href="https://webpack.docschina.org/plugins/css-minimizer-webpack-plugin/" target="_blank" rel="noopener noreferrer">css-minimizer-webpack-plugin<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> è¿™æ ·çš„æ’ä»¶ã€‚å®‰è£…æ’ä»¶ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> webpack5 $ <span class="token function">npm</span> <span class="token function">install</span> css-minimizer-webpack-plugin --save-dev
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>é…ç½®æ’ä»¶ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> CssMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;css-minimizer-webpack-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">// ç”Ÿäº§æ¨¡å¼</span>
	<span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;production&#39;</span><span class="token punctuation">,</span>

	<span class="token comment">// ä¼˜åŒ–é…ç½®</span>
	<span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">minimizer</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>07-manage-assets/webpack.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//...</span>

<span class="token keyword">const</span> CssMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;css-minimizer-webpack-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">//...</span>

	<span class="token comment">// å¼€å‘æ¨¡å¼</span>
	<span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;production&#39;</span><span class="token punctuation">,</span>

	<span class="token comment">//...</span>

	<span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">minimizer</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>å†æ¬¡æ‰§è¡Œç¼–è¯‘ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> 07-manage-assets $ npx webpack
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æŸ¥çœ‹æ‰“åŒ…å®Œæˆåçš„ç›®å½•å’Œæ–‡ä»¶ï¼š</p><img src="http://raink.net:8080/md-images/webpack5/img-1.5.5-3.png" alt="image-20211004133259345" style="zoom:50%;" align="left"><p>æŸ¥çœ‹ <code>47d76d536c66efaf7a55.css</code>æ–‡ä»¶ï¼š</p><blockquote><p>07-manage-assets/dist/styles/47d76d536c66efaf7a55.css</p><div class="language-css line-numbers-mode" data-ext="css"><pre class="language-css"><code><span class="token selector">.hello</span> <span class="token punctuation">{</span>
	<span class="token property">background-color</span><span class="token punctuation">:</span> #f9efd4<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3R5bGVzLzQ3ZDc2ZDUzNmM2NmVmYWY3YTU1LmNzcyIsIm1hcHBpbmdzIjoiQUFBQSxPQUNFLHdCQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3N0eWxlLmNzcyJdLCJzb3VyY2VzQ29udGVudCI6WyIuaGVsbG8ge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjllZmQ0O1xufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p><code>css</code>æ–‡ä»¶ä¼˜åŒ–æˆåŠŸï¼</p><h3 id="_1-6-4-åŠ è½½-images-å›¾åƒ" tabindex="-1"><a class="header-anchor" href="#_1-6-4-åŠ è½½-images-å›¾åƒ" aria-hidden="true">#</a> 1.6.4 åŠ è½½ images å›¾åƒ</h3><p>å‡å¦‚ï¼Œç°åœ¨æˆ‘ä»¬æ­£åœ¨ä¸‹è½½ CSSï¼Œä½†æ˜¯åƒ background å’Œ icon è¿™æ ·çš„å›¾åƒï¼Œè¦å¦‚ä½•å¤„ç†å‘¢ï¼Ÿåœ¨ webpack 5 ä¸­ï¼Œå¯ä»¥ä½¿ç”¨å†…ç½®çš„ <a href="https://webpack.docschina.org/guides/asset-modules/" target="_blank" rel="noopener noreferrer">Asset Modules<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°å°†è¿™äº›å†…å®¹æ··å…¥æˆ‘ä»¬çš„ç³»ç»Ÿä¸­ï¼Œè¿™ä¸ªæˆ‘ä»¬åœ¨&quot;èµ„æºæ¨¡å—&quot;ä¸€èŠ‚ä¸­å·²ç»ä»‹ç»äº†ã€‚è¿™é‡Œå†è¡¥å……ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œåœ¨ <code>css</code>æ–‡ä»¶é‡Œä¹Ÿå¯ä»¥ç›´æ¥å¼•ç”¨æ–‡ä»¶ï¼Œä¿®æ”¹ <code>style.css</code> å’Œå…¥å£ <code>index.js</code>ï¼š</p><div class="language-css line-numbers-mode" data-ext="css"><pre class="language-css"><code><span class="token selector">.block-bg</span> <span class="token punctuation">{</span>
	<span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./assets/webpack-logo.svg<span class="token punctuation">)</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>block<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cssText <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">width: 200px; height: 200px; background-color: #2b3a42</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
block<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&#39;block-bg&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>07-manage-assets/src/style.css</p><div class="language-css line-numbers-mode" data-ext="css"><pre class="language-css"><code><span class="token selector">.hello</span> <span class="token punctuation">{</span>
	<span class="token property">background-color</span><span class="token punctuation">:</span> #f9efd4<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.block-bg</span> <span class="token punctuation">{</span>
	<span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./assets/webpack-logo.svg<span class="token punctuation">)</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><blockquote><p>07-manage-assets/src/index.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// å¯¼å…¥æ¨¡å—</span>
<span class="token comment">//...</span>
<span class="token keyword">import</span> <span class="token string">&#39;./style.css&#39;</span><span class="token punctuation">;</span>

<span class="token comment">//...</span>
block<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cssText <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">width: 200px; height: 200px; background-color: #2b3a42</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
block<span class="token punctuation">.</span>textContent <span class="token operator">=</span> exampleText<span class="token punctuation">;</span>
block<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&#39;block-bg&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>block<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//...</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>å¯åŠ¨æœåŠ¡ï¼Œæ‰“å¼€æµè§ˆå™¨ï¼š</p><figure><img src="http://raink.net:8080/md-images/webpack5/img-1.5.4-1.png" alt="image-20211004111444479" tabindex="0" loading="lazy"><figcaption>image-20211004111444479</figcaption></figure><p>æˆ‘ä»¬çœ‹åˆ°ï¼Œé€šè¿‡æ ·å¼æŠŠèƒŒæ™¯å›¾ç‰‡åŠ åˆ°äº†é¡µé¢ä¸­ã€‚</p><h3 id="_1-6-5-åŠ è½½-fonts-å­—ä½“" tabindex="-1"><a class="header-anchor" href="#_1-6-5-åŠ è½½-fonts-å­—ä½“" aria-hidden="true">#</a> 1.6.5 åŠ è½½ fonts å­—ä½“</h3><p>é‚£ä¹ˆï¼Œåƒå­—ä½“è¿™æ ·çš„å…¶ä»–èµ„æºå¦‚ä½•å¤„ç†å‘¢ï¼Ÿä½¿ç”¨ Asset Modules å¯ä»¥æ¥æ”¶å¹¶åŠ è½½ä»»ä½•æ–‡ä»¶ï¼Œç„¶åå°†å…¶è¾“å‡ºåˆ°æ„å»ºç›®å½•ã€‚è¿™å°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒä»¬ç”¨äºä»»ä½•ç±»å‹çš„æ–‡ä»¶ï¼Œä¹ŸåŒ…æ‹¬å­—ä½“ã€‚è®©æˆ‘ä»¬æ›´æ–° <code>webpack.config.js</code> æ¥å¤„ç†å­—ä½“æ–‡ä»¶ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token punctuation">{</span>
			<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(woff|woff2|eot|ttf|otf)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
			<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset/resource&#39;</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>07-manage-assets/webpack.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//...</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">//...</span>

	<span class="token comment">// é…ç½®èµ„æºæ–‡ä»¶</span>
	<span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token comment">//...</span>
			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(woff|woff2|eot|ttf|otf)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset/resource&#39;</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">//...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>åœ¨é¡¹ç›®ä¸­æ·»åŠ ä¸€äº›å­—ä½“æ–‡ä»¶ï¼š</p><img src="http://raink.net:8080/md-images/webpack5/img-1.5.2-5.png" alt="image-20211004114523074" style="zoom:50%;" align="left"><p>é…ç½®å¥½ loader å¹¶å°†å­—ä½“æ–‡ä»¶æ”¾åœ¨åˆé€‚çš„ä½ç½®åï¼Œä½ å¯ä»¥é€šè¿‡ä¸€ä¸ª <code>@font-face</code> å£°æ˜å°†å…¶æ··åˆã€‚æœ¬åœ°çš„ <code>url(...)</code> æŒ‡ä»¤ä¼šè¢« webpack è·å–å¤„ç†ï¼Œå°±åƒå®ƒå¤„ç†å›¾ç‰‡ä¸€æ ·ï¼š</p><div class="language-css line-numbers-mode" data-ext="css"><pre class="language-css"><code><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>
	<span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">&#39;iconfont&#39;</span><span class="token punctuation">;</span>
	<span class="token property">src</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">&#39;./assets/iconfont.ttf&#39;</span><span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&#39;truetype&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.icon</span> <span class="token punctuation">{</span>
	<span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">&#39;iconfont&#39;</span> <span class="token important">!important</span><span class="token punctuation">;</span>
	<span class="token property">font-size</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
	<span class="token property">font-style</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
	<span class="token property">-webkit-font-smoothing</span><span class="token punctuation">:</span> antialiased<span class="token punctuation">;</span>
	<span class="token property">-moz-osx-font-smoothing</span><span class="token punctuation">:</span> grayscale<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>07-manage-assets/src/style.css</p><div class="language-css line-numbers-mode" data-ext="css"><pre class="language-css"><code><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>
	<span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">&#39;iconfont&#39;</span><span class="token punctuation">;</span>
	<span class="token property">src</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">&#39;./assets/iconfont.ttf&#39;</span><span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&#39;truetype&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.hello</span> <span class="token punctuation">{</span>
	<span class="token property">background-color</span><span class="token punctuation">:</span> #f9efd4<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.icon</span> <span class="token punctuation">{</span>
	<span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">&#39;iconfont&#39;</span> <span class="token important">!important</span><span class="token punctuation">;</span>
	<span class="token property">font-size</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
	<span class="token property">font-style</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
	<span class="token property">-webkit-font-smoothing</span><span class="token punctuation">:</span> antialiased<span class="token punctuation">;</span>
	<span class="token property">-moz-osx-font-smoothing</span><span class="token punctuation">:</span> grayscale<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.block-bg</span> <span class="token punctuation">{</span>
	<span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>./assets/webpack-logo.svg<span class="token punctuation">)</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> span <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;span&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
span<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&#39;icon&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
span<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&#39;&amp;#xe668;&#39;</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>span<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>07-manage-assets/src/index.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// å¯¼å…¥æ¨¡å—</span>
<span class="token comment">//...</span>

<span class="token keyword">const</span> span <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;span&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
span<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&#39;icon&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
span<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&#39;&amp;#xe668;&#39;</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>span<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>å¯åŠ¨æœåŠ¡ï¼Œæ‰“å¼€æµè§ˆå™¨ï¼š</p><figure><img src="http://raink.net:8080/md-images/webpack5/img-1.5.5-1.png" alt="image-20211004121830739" tabindex="0" loading="lazy"><figcaption>image-20211004121830739</figcaption></figure><p>æˆ‘ä»¬å†æ‰“åŒ…ä¸€ä¸‹ï¼Œçœ‹çœ‹è¾“å‡ºçš„æ–‡ä»¶ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> 07-manage-assets $ npx webpack
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><img src="http://raink.net:8080/md-images/webpack5/img-1.5.5-2.png" alt="image-20211004122156414" style="zoom:50%;" align="left"><p>å†çœ‹ä¸€ä¸‹æ‰“åŒ…å¥½çš„ <code>styles/.css</code>æ–‡ä»¶ï¼š</p><blockquote><p>07-manage-assets/dist/styles/4a9cff551c7a105e1554.css</p><div class="language-css line-numbers-mode" data-ext="css"><pre class="language-css"><code><span class="token comment">/*!******************************************************************!*\
 !*** css ../node_modules/css-loader/dist/cjs.js!./src/style.css ***!
 \******************************************************************/</span>
<span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>
	<span class="token property">font-family</span><span class="token punctuation">:</span> iconfont<span class="token punctuation">;</span>
	<span class="token property">src</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>../images/65b194f1f711865371d1.ttf<span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&#39;truetype&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.hello</span> <span class="token punctuation">{</span>
	<span class="token property">background-color</span><span class="token punctuation">:</span> #f9efd4<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.icon</span> <span class="token punctuation">{</span>
	<span class="token property">-webkit-font-smoothing</span><span class="token punctuation">:</span> antialiased<span class="token punctuation">;</span>
	<span class="token property">-moz-osx-font-smoothing</span><span class="token punctuation">:</span> grayscale<span class="token punctuation">;</span>
	<span class="token property">font-family</span><span class="token punctuation">:</span> iconfont <span class="token important">!important</span><span class="token punctuation">;</span>
	<span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
	<span class="token property">font-style</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.block-bg</span> <span class="token punctuation">{</span>
	<span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">&quot;data:image/svg+xml;charset=utf-8,%3Csvg viewBox=&#39;0 0 3046.7 875.7&#39; xmlns=&#39;http://www.w3.org/2000/svg&#39;%3E%3Cpath d=&#39;m387 0 387 218.9v437.9L387 875.7 0 656.8V218.9z&#39; fill=&#39;%23fff&#39;/%3E%3Cpath d=&#39;M704.9 641.7 399.8 814.3V679.9l190.1-104.6zm20.9-18.9V261.9l-111.6 64.5v232zM67.9 641.7 373 814.3V679.9L182.8 575.3zM47 622.8V261.9l111.6 64.5v232zm13.1-384.3L373 61.5v129.9L172.5 301.7l-1.6.9zm652.6 0-312.9-177v129.9l200.5 110.2 1.6.9z&#39; fill=&#39;%238ed6fb&#39;/%3E%3Cpath d=&#39;M373 649.3 185.4 546.1V341.8L373 450.1zm26.8 0 187.6-103.1V341.8L399.8 450.1zM198.1 318.2l188.3-103.5 188.3 103.5-188.3 108.7z&#39; fill=&#39;%231c78c0&#39;/%3E%3Cpath d=&#39;M1164.3 576.3h82.5l84.1-280.2h-80.4l-49.8 198.8-53.1-198.8H1078l-53.6 198.8-49.3-198.8h-80.4l83.6 280.2h82.5l52-179.5zM1335.2 437c0 84.1 57.3 146.3 147.4 146.3 69.7 0 107.2-41.8 117.9-61.6l-48.8-37c-8 11.8-30 34.3-68.1 34.3-41.3 0-71.3-26.8-72.9-64.3H1608c.5-5.4.5-10.7.5-16.1 0-91.6-49.3-149.5-136.1-149.5-79.9 0-137.2 63.2-137.2 147.9zm77.7-30.6c3.2-32.1 25.7-56.8 60.6-56.8 33.8 0 58.4 22.5 60 56.8zm223.5 169.9h69.7v-28.9c7.5 9.1 35.4 35.9 83.1 35.9 80.4 0 137.2-60.5 137.2-146.8 0-86.8-52.5-147.3-132.9-147.3-48.2 0-76.1 26.8-83.1 36.4V188.9h-73.9v387.4zm71.8-139.3c0-52.5 31.1-82.5 71.8-82.5 42.9 0 71.8 33.8 71.8 82.5 0 49.8-30 80.9-71.8 80.9-45 0-71.8-36.5-71.8-80.9zm247 239.5h73.9V547.3c7 9.1 34.8 35.9 83.1 35.9 80.4 0 132.9-60.5 132.9-147.3 0-85.7-56.8-146.8-137.2-146.8-47.7 0-75.6 26.8-83.1 36.4V296h-69.7v380.5zm71.8-241.1c0-44.5 26.8-80.9 71.8-80.9 41.8 0 71.8 31.1 71.8 80.9 0 48.8-28.9 82.5-71.8 82.5-40.7 0-71.8-30-71.8-82.5zm231.5 54.1c0 58.9 48.2 93.8 105 93.8 32.2 0 53.6-9.6 68.1-25.2l4.8 18.2h65.4V398.9c0-62.7-26.8-109.8-116.8-109.8-42.9 0-85.2 16.1-110.4 33.2l27.9 50.4a165.2 165.2 0 0 1 74.5-19.8c32.7 0 50.9 16.6 50.9 41.3v18.2c-10.2-7-32.2-15.5-60.6-15.5-65.4-.1-108.8 37.4-108.8 92.6zm73.9-2.2c0-23 19.8-39.1 48.2-39.1s48.8 14.5 48.8 39.1c0 23.6-20.4 38.6-48.2 38.6s-48.8-15.5-48.8-38.6zm348.9 30.6c-46.6 0-79.8-33.8-79.8-81.4 0-45 29.5-82 77.2-82a95.2 95.2 0 0 1 65.4 26.8l20.9-62.2a142.6 142.6 0 0 0-88.4-30c-85.2 0-149 62.7-149 147.9s62.2 146.3 149.5 146.3a141 141 0 0 0 87.3-30l-19.8-60.5c-12.4 10.1-34.9 25.1-63.3 25.1zm110.9 58.4h73.9V431.6l93.8 144.7h86.8L2940.6 423l98.6-127h-83.1l-90 117.9v-225h-73.9z&#39; fill=&#39;%23f5fafa&#39;/%3E%3C/svg%3E&quot;</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3R5bGVzLzRhOWNmZjU1MWM3YTEwNWUxNTU0LmNzcyIsIm1hcHBpbmdzIjoiQUFBQTs7cUVBRXFFLENDRnJFLFdBQ0Usb0JBQXVCLENBQ3ZCLDhEQUNGLENBRUEsT0FDRSx3QkFDRixDQUVBLE1BSUUsa0NBQW1DLENBQ25DLGlDQUFrQyxDQUpsQyw4QkFBa0MsQ0FDbEMsY0FBZSxDQUNmLGlCQUdGLENBRUEsVUFDRSw0d0VBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vNGE5Y2ZmNTUxYzdhMTA1ZTE1NTQuY3NzIiwid2VicGFjazovLy8uL3NyYy9zdHlsZS5jc3MiXSwic291cmNlc0NvbnRlbnQiOlsiLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIGNzcyAuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL3NyYy9zdHlsZS5jc3MgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbkBmb250LWZhY2Uge1xuICBmb250LWZhbWlseTogJ2ljb25mb250JztcbiAgc3JjOiB1cmwoLi4vaW1hZ2VzLzY1YjE5NGYxZjcxMTg2NTM3MWQxLnR0ZikgZm9ybWF0KCd0cnVldHlwZScpO1xufVxuXG4uaGVsbG8ge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjllZmQ0O1xufVxuXG4uaWNvbiB7XG4gIGZvbnQtZmFtaWx5OiBcImljb25mb250XCIgIWltcG9ydGFudDtcbiAgZm9udC1zaXplOiAxNnB4O1xuICBmb250LXN0eWxlOiBub3JtYWw7XG4gIC13ZWJraXQtZm9udC1zbW9vdGhpbmc6IGFudGlhbGlhc2VkO1xuICAtbW96LW9zeC1mb250LXNtb290aGluZzogZ3JheXNjYWxlO1xufVxuXG4uYmxvY2stYmcge1xuICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCJkYXRhOmltYWdlL3N2Zyt4bWwsJTNjc3ZnIHZpZXdCb3g9JzAgMCAzMDQ2LjcgODc1LjcnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyclM2UlM2NwYXRoIGQ9J20zODcgMCAzODcgMjE4Ljl2NDM3LjlsLTM4NyAyMTguOS0zODctMjE4Ljl2LTQzNy45eicgZmlsbD0nd2hpdGUnLyUzZSUzY3BhdGggZD0nbTcwNC45IDY0MS43LTMwNS4xIDE3Mi42di0xMzQuNGwxOTAuMS0xMDQuNnptMjAuOS0xOC45di0zNjAuOWwtMTExLjYgNjQuNXYyMzJ6bS02NTcuOSAxOC45IDMwNS4xIDE3Mi42di0xMzQuNGwtMTkwLjItMTA0LjZ6bS0yMC45LTE4Ljl2LTM2MC45bDExMS42IDY0LjV2MjMyem0xMy4xLTM4NC4zIDMxMi45LTE3N3YxMjkuOWwtMjAwLjUgMTEwLjMtMS42Ljl6bTY1Mi42IDAtMzEyLjktMTc3djEyOS45bDIwMC41IDExMC4yIDEuNi45eicgZmlsbD0nJTIzOGVkNmZiJy8lM2UlM2NwYXRoIGQ9J20zNzMgNjQ5LjMtMTg3LjYtMTAzLjJ2LTIwNC4zbDE4Ny42IDEwOC4zem0yNi44IDAgMTg3LjYtMTAzLjF2LTIwNC40bC0xODcuNiAxMDguM3ptLTIwMS43LTMzMS4xIDE4OC4zLTEwMy41IDE4OC4zIDEwMy41LTE4OC4zIDEwOC43eicgZmlsbD0nJTIzMWM3OGMwJy8lM2UlM2NwYXRoIGQ9J20xMTY0LjMgNTc2LjNoODIuNWw4NC4xLTI4MC4yaC04MC40bC00OS44IDE5OC44LTUzLjEtMTk4LjhoLTY5LjZsLTUzLjYgMTk4LjgtNDkuMy0xOTguOGgtODAuNGw4My42IDI4MC4yaDgyLjVsNTItMTc5LjV6bTE3MC45LTEzOS4zYzAgODQuMSA1Ny4zIDE0Ni4zIDE0Ny40IDE0Ni4zIDY5LjcgMCAxMDcuMi00MS44IDExNy45LTYxLjZsLTQ4LjgtMzdjLTggMTEuOC0zMCAzNC4zLTY4LjEgMzQuMy00MS4zIDAtNzEuMy0yNi44LTcyLjktNjQuM2gxOTcuM2MuNS01LjQuNS0xMC43LjUtMTYuMSAwLTkxLjYtNDkuMy0xNDkuNS0xMzYuMS0xNDkuNS03OS45IDAtMTM3LjIgNjMuMi0xMzcuMiAxNDcuOXptNzcuNy0zMC42YzMuMi0zMi4xIDI1LjctNTYuOCA2MC42LTU2LjggMzMuOCAwIDU4LjQgMjIuNSA2MCA1Ni44em0yMjMuNSAxNjkuOWg2OS43di0yOC45YzcuNSA5LjEgMzUuNCAzNS45IDgzLjEgMzUuOSA4MC40IDAgMTM3LjItNjAuNSAxMzcuMi0xNDYuOCAwLTg2LjgtNTIuNS0xNDcuMy0xMzIuOS0xNDcuMy00OC4yIDAtNzYuMSAyNi44LTgzLjEgMzYuNHYtMTM2LjdoLTczLjl2Mzg3LjR6bTcxLjgtMTM5LjNjMC01Mi41IDMxLjEtODIuNSA3MS44LTgyLjUgNDIuOSAwIDcxLjggMzMuOCA3MS44IDgyLjUgMCA0OS44LTMwIDgwLjktNzEuOCA4MC45LTQ1IDAtNzEuOC0zNi41LTcxLjgtODAuOXptMjQ3IDIzOS41aDczLjl2LTEyOS4yYzcgOS4xIDM0LjggMzUuOSA4My4xIDM1LjkgODAuNCAwIDEzMi45LTYwLjUgMTMyLjktMTQ3LjMgMC04NS43LTU2LjgtMTQ2LjgtMTM3LjItMTQ2LjgtNDcuNyAwLTc1LjYgMjYuOC04My4xIDM2LjR2LTI5LjVoLTY5Ljd2MzgwLjV6bTcxLjgtMjQxLjFjMC00NC41IDI2LjgtODAuOSA3MS44LTgwLjkgNDEuOCAwIDcxLjggMzEuMSA3MS44IDgwLjkgMCA0OC44LTI4LjkgODIuNS03MS44IDgyLjUtNDAuNyAwLTcxLjgtMzAtNzEuOC04Mi41em0yMzEuNSA1NC4xYzAgNTguOSA0OC4yIDkzLjggMTA1IDkzLjggMzIuMiAwIDUzLjYtOS42IDY4LjEtMjUuMmw0LjggMTguMmg2NS40di0xNzcuNGMwLTYyLjctMjYuOC0xMDkuOC0xMTYuOC0xMDkuOC00Mi45IDAtODUuMiAxNi4xLTExMC40IDMzLjJsMjcuOSA1MC40YTE2NS4yIDE2NS4yIDAgMCAxIDc0LjUtMTkuOGMzMi43IDAgNTAuOSAxNi42IDUwLjkgNDEuM3YxOC4yYy0xMC4yLTctMzIuMi0xNS41LTYwLjYtMTUuNS02NS40LS4xLTEwOC44IDM3LjQtMTA4LjggOTIuNnptNzMuOS0yLjJjMC0yMyAxOS44LTM5LjEgNDguMi0zOS4xczQ4LjggMTQuNSA0OC44IDM5LjFjMCAyMy42LTIwLjQgMzguNi00OC4yIDM4LjZzLTQ4LjgtMTUuNS00OC44LTM4LjZ6bTM0OC45IDMwLjZjLTQ2LjYgMC03OS44LTMzLjgtNzkuOC04MS40IDAtNDUgMjkuNS04MiA3Ny4yLTgyYTk1LjIgOTUuMiAwIDAgMSA2NS40IDI2LjhsMjAuOS02Mi4yYTE0Mi42IDE0Mi42IDAgMCAwIC04OC40LTMwYy04NS4yIDAtMTQ5IDYyLjctMTQ5IDE0Ny45czYyLjIgMTQ2LjMgMTQ5LjUgMTQ2LjNhMTQxIDE0MSAwIDAgMCA4Ny4zLTMwbC0xOS44LTYwLjVjLTEyLjQgMTAuMS0zNC45IDI1LjEtNjMuMyAyNS4xem0xMTAuOSA1OC40aDczLjl2LTE0NC43bDkzLjggMTQ0LjdoODYuOGwtMTA2LjEtMTUzLjMgOTguNi0xMjdoLTgzLjFsLTkwIDExNy45di0yMjVoLTczLjl6JyBmaWxsPSclMjNmNWZhZmEnLyUzZSUzYy9zdmclM2VcIikgO1xufVxuIiwiQGZvbnQtZmFjZSB7XG4gIGZvbnQtZmFtaWx5OiAnaWNvbmZvbnQnO1xuICBzcmM6IHVybCgnLi9hc3NldHMvaWNvbmZvbnQudHRmJykgZm9ybWF0KCd0cnVldHlwZScpO1xufVxuXG4uaGVsbG8ge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjllZmQ0O1xufVxuXG4uaWNvbiB7XG4gIGZvbnQtZmFtaWx5OiBcImljb25mb250XCIgIWltcG9ydGFudDtcbiAgZm9udC1zaXplOiAxNnB4O1xuICBmb250LXN0eWxlOiBub3JtYWw7XG4gIC13ZWJraXQtZm9udC1zbW9vdGhpbmc6IGFudGlhbGlhc2VkO1xuICAtbW96LW9zeC1mb250LXNtb290aGluZzogZ3JheXNjYWxlO1xufVxuXG4uYmxvY2stYmcge1xuICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoLi9hc3NldHMvd2VicGFjay1sb2dvLnN2ZykgO1xufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>ç”±äºåœ¨å‰é¢æˆ‘ä»¬åº”ç”¨äº†å¦‚ä¸‹é…ç½®ï¼Œä½¿ç”Ÿäº§ç¯å¢ƒ css æ–‡ä»¶ä¹Ÿè¿›è¡Œäº†å‹ç¼©å¤„ç†ã€‚æˆ‘ä»¬å¯ä»¥æ³¨é‡Šå®ƒï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
	<span class="token comment">// minimize: true,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-6-6-åŠ è½½æ•°æ®" tabindex="-1"><a class="header-anchor" href="#_1-6-6-åŠ è½½æ•°æ®" aria-hidden="true">#</a> 1.6.6 åŠ è½½æ•°æ®</h3><p>æ­¤å¤–ï¼Œå¯ä»¥åŠ è½½çš„æœ‰ç”¨èµ„æºè¿˜æœ‰æ•°æ®ï¼Œå¦‚ JSON æ–‡ä»¶ï¼ŒCSVã€TSV å’Œ XMLã€‚ç±»ä¼¼äº NodeJSï¼ŒJSON æ”¯æŒå®é™…ä¸Šæ˜¯å†…ç½®çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ <code>import Data from &#39;./data.json&#39;</code> é»˜è®¤å°†æ­£å¸¸è¿è¡Œã€‚è¦å¯¼å…¥ CSVã€TSV å’Œ XMLï¼Œä½ å¯ä»¥ä½¿ç”¨ <a href="https://github.com/theplatapi/csv-loader" target="_blank" rel="noopener noreferrer">csv-loader<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> å’Œ <a href="https://github.com/gisikw/xml-loader" target="_blank" rel="noopener noreferrer">xml-loader<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚è®©æˆ‘ä»¬å¤„ç†åŠ è½½è¿™ä¸‰ç±»æ–‡ä»¶ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> webpack5 $ <span class="token function">npm</span> <span class="token function">install</span> --save-dev csv-loader xml-loader
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ·»åŠ é…ç½®ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token punctuation">{</span>
			<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(csv|tsv)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
			<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;csv-loader&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span>
			<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.xml$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
			<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;xml-loader&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>07-manage-assets/webpack.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//...</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">//...</span>

	<span class="token comment">// é…ç½®èµ„æºæ–‡ä»¶</span>
	<span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token comment">//...</span>

			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(csv|tsv)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;csv-loader&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.xml$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;xml-loader&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">//...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>ç°åœ¨ï¼Œä½ å¯ä»¥ <code>import</code> è¿™å››ç§ç±»å‹çš„æ•°æ®(JSON, CSV, TSV, XML)ä¸­çš„ä»»ä½•ä¸€ç§ï¼Œæ‰€å¯¼å…¥çš„ <code>Data</code> å˜é‡ï¼Œå°†åŒ…å«å¯ç›´æ¥ä½¿ç”¨çš„å·²è§£æ JSONï¼š</p><p>åˆ›å»ºä¸¤ä¸ªæ–‡ä»¶ï¼š</p><blockquote><p>07-manage-assets/src/assets/data.xml</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>note</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>to</span><span class="token punctuation">&gt;</span></span>Mary<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>to</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>from</span><span class="token punctuation">&gt;</span></span>John<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>from</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>heading</span><span class="token punctuation">&gt;</span></span>Reminder<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>heading</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>Call Cindy on Tuesday<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>note</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><blockquote><p>07-manage-assets/src/assets/data.csv</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>to,from,heading,body
Mary,John,Reminder,Call Cindy on Tuesday
Zoe,Bill,Reminder,Buy orange juice
Autumn,Lindsey,Letter,I miss you
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>åœ¨å…¥å£æ–‡ä»¶é‡ŒåŠ è½½æ•°æ®æ¨¡å—ï¼Œå¹¶åœ¨æ§åˆ¶å°ä¸Šæ‰“å°å¯¼å…¥å†…å®¹ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> Data <span class="token keyword">from</span> <span class="token string">&#39;./assets/data.xml&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Notes <span class="token keyword">from</span> <span class="token string">&#39;./assets/data.csv&#39;</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Data<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Notes<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>07-manage-assets/src/index.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// å¯¼å…¥æ¨¡å—</span>
<span class="token comment">//...</span>

<span class="token keyword">import</span> Data <span class="token keyword">from</span> <span class="token string">&#39;./assets/data.xml&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Notes <span class="token keyword">from</span> <span class="token string">&#39;./assets/data.csv&#39;</span><span class="token punctuation">;</span>

<span class="token comment">//...</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Data<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Notes<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>æŸ¥çœ‹å¼€å‘è€…å·¥å…·ä¸­çš„æ§åˆ¶å°ï¼Œä½ åº”è¯¥èƒ½å¤Ÿçœ‹åˆ°å¯¼å…¥çš„æ•°æ®ä¼šè¢«æ‰“å°å‡ºæ¥ï¼</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> 07-manage-assets $ npx webpack serve
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="http://raink.net:8080/md-images/webpack5/img-1.5.6-1.png" alt="image-20211004151141055" tabindex="0" loading="lazy"><figcaption>image-20211004151141055</figcaption></figure><p>ç”±æ­¤å¯è§ï¼Œ<code>data.xml</code>æ–‡ä»¶è½¬åŒ–ä¸ºä¸€ä¸ª JS å¯¹è±¡ï¼Œ<code>data.cvs</code>è½¬åŒ–ä¸ºä¸€ä¸ªæ•°ç»„ã€‚</p><h3 id="_1-6-7-è‡ªå®šä¹‰-json-æ¨¡å—-parser" tabindex="-1"><a class="header-anchor" href="#_1-6-7-è‡ªå®šä¹‰-json-æ¨¡å—-parser" aria-hidden="true">#</a> 1.6.7 è‡ªå®šä¹‰ JSON æ¨¡å— parser</h3><p>é€šè¿‡ä½¿ç”¨ <a href="https://webpack.docschina.org/configuration/module/#ruleparserparse" target="_blank" rel="noopener noreferrer">è‡ªå®šä¹‰ parser<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> æ›¿ä»£ç‰¹å®šçš„ webpack loaderï¼Œå¯ä»¥å°†ä»»ä½• <code>toml</code>ã€<code>yaml</code> æˆ– <code>json5</code> æ–‡ä»¶ä½œä¸º JSON æ¨¡å—å¯¼å…¥ã€‚</p><p>å‡è®¾ä½ åœ¨ <code>src</code> æ–‡ä»¶å¤¹ä¸‹æœ‰ä¸€ä¸ª <code>data.toml</code>ã€ä¸€ä¸ª <code>data.yaml</code> ä»¥åŠä¸€ä¸ª <code>data.json5</code> æ–‡ä»¶ï¼š</p><blockquote><p>07-manage-assets/src/assets/json/data.toml</p><div class="language-toml line-numbers-mode" data-ext="toml"><pre class="language-toml"><code><span class="token key property">title</span> <span class="token punctuation">=</span> <span class="token string">&quot;TOML Example&quot;</span>

<span class="token punctuation">[</span><span class="token table class-name">owner</span><span class="token punctuation">]</span>
<span class="token key property">name</span> <span class="token punctuation">=</span> <span class="token string">&quot;Tom Preston-Werner&quot;</span>
<span class="token key property">organization</span> <span class="token punctuation">=</span> <span class="token string">&quot;GitHub&quot;</span>
<span class="token key property">bio</span> <span class="token punctuation">=</span> <span class="token string">&quot;GitHub Cofounder &amp; CEO\nLikes tater tots and beer.&quot;</span>
<span class="token key property">dob</span> <span class="token punctuation">=</span> <span class="token date number">1979-05-27T07:32:00Z</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><blockquote><p>07-manage-assets/src/assets/json/data.yaml</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">title</span><span class="token punctuation">:</span> YAML Example
<span class="token key atrule">owner</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> Tom Preston<span class="token punctuation">-</span>Werner
    <span class="token key atrule">organization</span><span class="token punctuation">:</span> GitHub
    <span class="token key atrule">bio</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token punctuation">-</span>
        GitHub Cofounder &amp; CEO
        Likes tater tots and beer.
    <span class="token key atrule">dob</span><span class="token punctuation">:</span> <span class="token datetime number">1979-05-27T07:32:00.000Z</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><blockquote><p>07-manage-assets/src/assets/json/data.json5</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token comment">// comment</span>
	<span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;JSON5 Example&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;owner&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Tom Preston-Werner&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;organization&quot;</span><span class="token operator">:</span> <span class="token string">&quot;GitHub&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;bio&quot;</span><span class="token operator">:</span> &quot;GitHub Cofounder &amp; CEO\n\
 Likes tater tots and beer.&quot;<span class="token punctuation">,</span>
		<span class="token property">&quot;dob&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1979-05-27T07:32:00.000Z&quot;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>é¦–å…ˆå®‰è£… <code>toml</code>ï¼Œ<code>yamljs</code> å’Œ <code>json5</code> çš„ packagesï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> webpack5 $ <span class="token function">npm</span> <span class="token function">install</span> toml yamljs json5 --save-dev
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¹¶åœ¨ä½ çš„ webpack ä¸­é…ç½®å®ƒä»¬ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> toml <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;toml&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> yaml <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;yamljs&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> json5 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;json5&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.toml$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;json&#39;</span><span class="token punctuation">,</span>
				<span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">parse</span><span class="token operator">:</span> toml<span class="token punctuation">.</span>parse<span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.yaml$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;json&#39;</span><span class="token punctuation">,</span>
				<span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">parse</span><span class="token operator">:</span> yaml<span class="token punctuation">.</span>parse<span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.json5$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;json&#39;</span><span class="token punctuation">,</span>
				<span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">parse</span><span class="token operator">:</span> json5<span class="token punctuation">.</span>parse<span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>07-manage-assets/webpack.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//...</span>

<span class="token keyword">const</span> toml <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;toml&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> yaml <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;yamljs&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> json5 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;json5&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">//...</span>

	<span class="token comment">// é…ç½®èµ„æºæ–‡ä»¶</span>
	<span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token comment">//...</span>

			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.toml$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;json&#39;</span><span class="token punctuation">,</span>
				<span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">parse</span><span class="token operator">:</span> toml<span class="token punctuation">.</span>parse<span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.yaml$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;json&#39;</span><span class="token punctuation">,</span>
				<span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">parse</span><span class="token operator">:</span> yaml<span class="token punctuation">.</span>parse<span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.json5$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;json&#39;</span><span class="token punctuation">,</span>
				<span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">parse</span><span class="token operator">:</span> json5<span class="token punctuation">.</span>parse<span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">//...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>åœ¨ä¸»æ–‡ä»¶ä¸­å¼•å…¥æ¨¡å—ï¼Œå¹¶æ‰“å°å†…å®¹ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> toml <span class="token keyword">from</span> <span class="token string">&#39;./data.toml&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> yaml <span class="token keyword">from</span> <span class="token string">&#39;./data.yaml&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> json <span class="token keyword">from</span> <span class="token string">&#39;./data.json5&#39;</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>toml<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// output `TOML Example`</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>toml<span class="token punctuation">.</span>owner<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// output `Tom Preston-Werner`</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>yaml<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// output `YAML Example`</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>yaml<span class="token punctuation">.</span>owner<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// output `Tom Preston-Werner`</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// output `JSON5 Example`</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span>owner<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// output `Tom Preston-Werner`</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>07-manage-assets/src/index.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// å¯¼å…¥æ¨¡å—</span>
<span class="token comment">//...</span>
<span class="token keyword">import</span> toml <span class="token keyword">from</span> <span class="token string">&#39;./assets/json/data.toml&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> yaml <span class="token keyword">from</span> <span class="token string">&#39;./assets/json/data.yaml&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> json <span class="token keyword">from</span> <span class="token string">&#39;./assets/json/data.json5&#39;</span><span class="token punctuation">;</span>

<span class="token comment">//...</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>toml<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// output `TOML Example`</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>toml<span class="token punctuation">.</span>owner<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// output `Tom Preston-Werner`</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>yaml<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// output `YAML Example`</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>yaml<span class="token punctuation">.</span>owner<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// output `Tom Preston-Werner`</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// output `JSON5 Example`</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span>owner<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// output `Tom Preston-Werner`</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>å¯åŠ¨æœåŠ¡ï¼Œæ‰“å¼€æµè§ˆå™¨ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> 07-manage-assets $ npx webpack serve
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="http://raink.net:8080/md-images/webpack5/image-20211004153342199.png" alt="image-20211004153342199" tabindex="0" loading="lazy"><figcaption>image-20211004153342199</figcaption></figure><p>ç°åœ¨ï¼Œ<code>toml</code>ã€<code>yaml</code>å’Œ<code>json5</code>å‡ ä¸ªç±»å‹çš„æ–‡ä»¶éƒ½æ­£å¸¸è¾“å‡ºäº†ç»“æœã€‚</p><h2 id="_1-7-ä½¿ç”¨-babel-loader" tabindex="-1"><a class="header-anchor" href="#_1-7-ä½¿ç”¨-babel-loader" aria-hidden="true">#</a> 1.7 ä½¿ç”¨ babel-loader</h2><p>å‰é¢çš„ç« èŠ‚é‡Œï¼Œæˆ‘ä»¬åº”ç”¨ <code>less-loader</code>ç¼–è¯‘è¿‡ less æ–‡ä»¶ï¼Œåº”ç”¨ <code>xml-loader</code>ç¼–è¯‘è¿‡ xml æ–‡ä»¶ï¼Œé‚£ js æ–‡ä»¶éœ€è¦ç¼–è¯‘å—ï¼Ÿæˆ‘ä»¬æ¥åšä¸€ä¸ªå®éªŒï¼Œä¿®æ”¹ <code>hello-world.js</code>æ–‡ä»¶ï¼š</p><blockquote><p>08-babel-loader/src/hello-world.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">getString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			<span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;Hello world~~~&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">helloWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">let</span> string <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// å¯¼å‡ºå‡½æ•°æ¨¡å—</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> helloWorld<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>æ‰§è¡Œç¼–è¯‘ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> 08-babel-loader $ npx webpack
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><img src="http://raink.net:8080/md-images/webpack5/img-1.6.1-1.png" alt="image-20211005074522172" style="zoom:50%;" align="left"><p>æŸ¥çœ‹ bundle.js æ–‡ä»¶ï¼š</p><blockquote><p>08-babel-loader/dist/bundle.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//...</span>

<span class="token doc-comment comment">/***/
&quot;./src/hello-world.js&quot;:
/*!****************************!*\
!*** ./src/hello-world.js ***!
\****************************/</span>
<span class="token doc-comment comment">/***/
((__unused_webpack_module, __webpack_exports__, __webpack_require__) =&gt; <span class="token punctuation">{</span>

   &quot;use strict&quot;;
   __webpack_require__.r(__webpack_exports__);
   /* harmony export */</span>
   __webpack_require__<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>__webpack_exports__<span class="token punctuation">,</span> <span class="token punctuation">{</span>
       <span class="token comment">/* harmony export */</span>
       <span class="token string-property property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>__WEBPACK_DEFAULT_EXPORT__<span class="token punctuation">)</span>
       <span class="token comment">/* harmony export */</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token keyword">function</span> <span class="token function">getString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;Hello world~~~&#39;</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
       <span class="token punctuation">}</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span>

   <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">helloWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">let</span> string <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span>
   <span class="token punctuation">}</span>

   <span class="token comment">// å¯¼å‡ºå‡½æ•°æ¨¡å—</span>
   <span class="token comment">/* harmony default export */</span>
   <span class="token keyword">const</span> __WEBPACK_DEFAULT_EXPORT__ <span class="token operator">=</span> <span class="token punctuation">(</span>helloWorld<span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token doc-comment comment">/***/
<span class="token punctuation">}</span>),

//...
</span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>æˆ‘ä»¬å‘ç°ï¼Œç¼–å†™çš„ ES6 ä»£ç åŸæ ·è¾“å‡ºäº†ã€‚å¯åŠ¨æœåŠ¡ï¼Œæ‰“å¼€æµè§ˆå™¨ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> 08-babel-loader $ npx webpack serve
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><img src="http://raink.net:8080/md-images/webpack5/img-1.5.6-2.png" alt="image-20211005075532323" style="zoom:50%;"><p><code>Hello world~~</code>ä¸¤ç§’åæ­£å¸¸è¾“å‡ºï¼Œè¯´æ˜æµè§ˆå™¨èƒ½å¤Ÿè¿è¡Œæˆ‘ä»¬çš„ ES6 ä»£ç ã€‚ä½†å¦‚æœæµè§ˆå™¨ç‰ˆæœ¬è¿‡ä½ï¼Œå°±å¾ˆéš¾ä¿è¯ä»£ç æ­£å¸¸è¿è¡Œäº†ã€‚</p><h3 id="_1-7-1-ä¸ºä»€ä¹ˆéœ€è¦-babel-loader" tabindex="-1"><a class="header-anchor" href="#_1-7-1-ä¸ºä»€ä¹ˆéœ€è¦-babel-loader" aria-hidden="true">#</a> 1.7.1 ä¸ºä»€ä¹ˆéœ€è¦ babel-loader</h3><p>webpack è‡ªèº«å¯ä»¥è‡ªåŠ¨åŠ è½½ JS æ–‡ä»¶ï¼Œå°±åƒåŠ è½½ JSON æ–‡ä»¶ä¸€æ ·ï¼Œæ— éœ€ä»»ä½• loaderã€‚å¯æ˜¯ï¼ŒåŠ è½½çš„ JS æ–‡ä»¶ä¼šåŸæ ·è¾“å‡ºï¼Œå³ä½¿ä½ çš„ JS æ–‡ä»¶é‡ŒåŒ…å« ES6+çš„ä»£ç ï¼Œä¹Ÿä¸ä¼šåšä»»ä½•çš„è½¬åŒ–ã€‚è¿™æ—¶æˆ‘ä»¬å°±éœ€è¦ Babel æ¥å¸®å¿™ã€‚Babel æ˜¯ä¸€ä¸ª JavaScript ç¼–è¯‘å™¨ï¼Œå¯ä»¥å°† ES6+è½¬åŒ–æˆ ES5ã€‚åœ¨ Webpack é‡Œä½¿ç”¨ Babelï¼Œéœ€è¦ä½¿ç”¨ <code>babel-loader</code>ã€‚</p><h3 id="_1-7-2-ä½¿ç”¨-babel-loader" tabindex="-1"><a class="header-anchor" href="#_1-7-2-ä½¿ç”¨-babel-loader" aria-hidden="true">#</a> 1.7.2 ä½¿ç”¨ babel-loader</h3><p>å®‰è£…ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-D</span> babel-loader @babel/core @babel/preset-env
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><code>babel-loader</code>: åœ¨ webpack é‡Œåº”ç”¨ babel è§£æ ES6 çš„æ¡¥æ¢</li><li><code>@babel/core</code>: babel æ ¸å¿ƒæ¨¡å—</li><li><code>@babel/preset-env</code>: babel é¢„è®¾ï¼Œä¸€ç»„ babel æ’ä»¶çš„é›†åˆ</li></ul><p>åœ¨ webpack é…ç½®ä¸­ï¼Œéœ€è¦å°† <code>babel-loader</code> æ·»åŠ åˆ° <code>module</code> åˆ—è¡¨ä¸­ï¼Œå°±åƒä¸‹é¢è¿™æ ·ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token punctuation">{</span>
			<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
			<span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
			<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;babel-loader&#39;</span><span class="token punctuation">,</span>
				<span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;@babel/preset-env&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰§è¡Œç¼–è¯‘ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> 08-babel-loader $ npx webpack
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æŸ¥çœ‹ bundle.js æ–‡ä»¶ï¼š</p><blockquote><p>08-babel-loader/dist/bundle.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/***/
&quot;./src/hello-world.js&quot;:
/*!****************************!*\
!*** ./src/hello-world.js ***!
\****************************/</span>
<span class="token doc-comment comment">/***/
((__unused_webpack_module, __webpack_exports__, __webpack_require__) =&gt; <span class="token punctuation">{</span>

 &quot;use strict&quot;;
 __webpack_require__.r(__webpack_exports__);
 /* harmony export */</span>
 __webpack_require__<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>__webpack_exports__<span class="token punctuation">,</span> <span class="token punctuation">{</span>
   <span class="token comment">/* harmony export */</span>
   <span class="token string-property property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>__WEBPACK_DEFAULT_EXPORT__<span class="token punctuation">)</span>
   <span class="token comment">/* harmony export */</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token keyword">function</span> <span class="token function">asyncGeneratorStep</span><span class="token punctuation">(</span><span class="token parameter">gen<span class="token punctuation">,</span> resolve<span class="token punctuation">,</span> reject<span class="token punctuation">,</span> _next<span class="token punctuation">,</span> _throw<span class="token punctuation">,</span> key<span class="token punctuation">,</span> arg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">try</span> <span class="token punctuation">{</span>
     <span class="token keyword">var</span> info <span class="token operator">=</span> gen<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">var</span> value <span class="token operator">=</span> info<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
   <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">return</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">if</span> <span class="token punctuation">(</span>info<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token function">resolve</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
     Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>_next<span class="token punctuation">,</span> _throw<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>

 <span class="token keyword">function</span> <span class="token function">_asyncToGenerator</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span>
       args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
     <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">var</span> gen <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>

       <span class="token keyword">function</span> <span class="token function">_next</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token function">asyncGeneratorStep</span><span class="token punctuation">(</span>gen<span class="token punctuation">,</span> resolve<span class="token punctuation">,</span> reject<span class="token punctuation">,</span> _next<span class="token punctuation">,</span> _throw<span class="token punctuation">,</span> <span class="token string">&quot;next&quot;</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>

       <span class="token keyword">function</span> <span class="token function">_throw</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token function">asyncGeneratorStep</span><span class="token punctuation">(</span>gen<span class="token punctuation">,</span> resolve<span class="token punctuation">,</span> reject<span class="token punctuation">,</span> _next<span class="token punctuation">,</span> _throw<span class="token punctuation">,</span> <span class="token string">&quot;throw&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
       <span class="token function">_next</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>

 <span class="token keyword">function</span> <span class="token function">getString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;Hello world~~~&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>

 <span class="token keyword">function</span> <span class="token function">helloWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token function">_helloWorld</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span> <span class="token comment">// å¯¼å‡ºå‡½æ•°æ¨¡å—</span>


 <span class="token keyword">function</span> <span class="token function">_helloWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   _helloWorld <span class="token operator">=</span> <span class="token function">_asyncToGenerator</span><span class="token punctuation">(</span> <span class="token comment">/*#__PURE__*/</span> regeneratorRuntime<span class="token punctuation">.</span><span class="token function">mark</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">_callee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">var</span> string<span class="token punctuation">;</span>
     <span class="token keyword">return</span> regeneratorRuntime<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">_callee$</span><span class="token punctuation">(</span><span class="token parameter">_context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">switch</span> <span class="token punctuation">(</span>_context<span class="token punctuation">.</span>prev <span class="token operator">=</span> _context<span class="token punctuation">.</span>next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">case</span> <span class="token number">0</span><span class="token operator">:</span>
             _context<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
             <span class="token keyword">return</span> <span class="token function">getString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

           <span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span>
             string <span class="token operator">=</span> _context<span class="token punctuation">.</span>sent<span class="token punctuation">;</span>
             console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">;</span>

           <span class="token keyword">case</span> <span class="token number">4</span><span class="token operator">:</span>
           <span class="token keyword">case</span> <span class="token string">&quot;end&quot;</span><span class="token operator">:</span>
             <span class="token keyword">return</span> _context<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
       <span class="token punctuation">}</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span> _callee<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token function">_helloWorld</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>

 <span class="token comment">/* harmony default export */</span>
 <span class="token keyword">const</span> __WEBPACK_DEFAULT_EXPORT__ <span class="token operator">=</span> <span class="token punctuation">(</span>helloWorld<span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token doc-comment comment">/***/
<span class="token punctuation">}</span>),
</span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>ä»ç¼–è¯‘å®Œçš„ç»“æœå¯ä»¥çœ‹å‡ºï¼Œ<code>async/await</code> çš„ ES6 è¯­æ³•è¢« <code>babel</code>ç¼–è¯‘äº†ã€‚</p><h3 id="_1-7-3-regeneratorruntime-æ’ä»¶" tabindex="-1"><a class="header-anchor" href="#_1-7-3-regeneratorruntime-æ’ä»¶" aria-hidden="true">#</a> 1.7.3 regeneratorRuntime æ’ä»¶</h3><p>æ­¤æ—¶æ‰§è¡Œç¼–è¯‘ï¼Œåœ¨æµè§ˆå™¨é‡Œæ‰“å¼€é¡¹ç›®å‘ç°æŠ¥äº†ä¸€ä¸ªè‡´å‘½é”™è¯¯ï¼š</p><img src="http://raink.net:8080/md-images/webpack5/img-1.6.3-1.png" alt="image-20211007070359238" style="zoom:50%;" align="left"><p><code>regeneratorRuntime</code>æ˜¯ webpack æ‰“åŒ…ç”Ÿæˆçš„å…¨å±€è¾…åŠ©å‡½æ•°ï¼Œç”± babel ç”Ÿæˆï¼Œç”¨äºå…¼å®¹ async/await çš„è¯­æ³•ã€‚</p><p><code>regeneratorRuntime is not defined</code>è¿™ä¸ªé”™è¯¯æ˜¾ç„¶æ˜¯æœªèƒ½æ­£ç¡®é…ç½® babelã€‚</p><p>æ­£ç¡®çš„åšæ³•éœ€è¦æ·»åŠ ä»¥ä¸‹çš„æ’ä»¶å’Œé…ç½®ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># è¿™ä¸ªåŒ…ä¸­åŒ…å«äº†regeneratorRuntimeï¼Œè¿è¡Œæ—¶éœ€è¦</span>
<span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">--save</span> @babel/runtime

<span class="token comment"># è¿™ä¸ªæ’ä»¶ä¼šåœ¨éœ€è¦regeneratorRuntimeçš„åœ°æ–¹è‡ªåŠ¨requireå¯¼åŒ…ï¼Œç¼–è¯‘æ—¶éœ€è¦</span>
<span class="token function">npm</span> <span class="token function">install</span> --save-dev @babel/plugin-transform-runtime

<span class="token comment"># æ›´å¤šå‚è€ƒè¿™é‡Œ</span>
https://babeljs.io/docs/en/babel-plugin-transform-runtime
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¥ç€æ”¹ä¸€ä¸‹ babel çš„é…ç½®ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token punctuation">{</span>
			<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
			<span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
			<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;babel-loader&#39;</span><span class="token punctuation">,</span>
				<span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;@babel/preset-env&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
					<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&#39;@babel/plugin-transform-runtime&#39;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>08-babel-loade/webpack.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//...</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">//...</span>

	<span class="token comment">// é…ç½®èµ„æºæ–‡ä»¶</span>
	<span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;babel-loader&#39;</span><span class="token punctuation">,</span>
					<span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
						<span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;@babel/preset-env&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
						<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&#39;@babel/plugin-transform-runtime&#39;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token comment">//...</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">//...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>å¯åŠ¨æœåŠ¡ï¼Œæ‰“å¼€æµè§ˆå™¨ï¼š</p><img src="http://raink.net:8080/md-images/webpack5/img-1.6.3-2.png" alt="image-20211007071943719" style="zoom:50%;"><p>æˆåŠŸè¿è¡Œã€‚</p><h2 id="_1-8-ä»£ç åˆ†ç¦»" tabindex="-1"><a class="header-anchor" href="#_1-8-ä»£ç åˆ†ç¦»" aria-hidden="true">#</a> 1.8 ä»£ç åˆ†ç¦»</h2><p>ä»£ç åˆ†ç¦»æ˜¯ webpack ä¸­æœ€å¼•äººæ³¨ç›®çš„ç‰¹æ€§ä¹‹ä¸€ã€‚æ­¤ç‰¹æ€§èƒ½å¤ŸæŠŠä»£ç åˆ†ç¦»åˆ°ä¸åŒçš„ bundle ä¸­ï¼Œç„¶åå¯ä»¥æŒ‰éœ€åŠ è½½æˆ–å¹¶è¡ŒåŠ è½½è¿™äº›æ–‡ä»¶ã€‚ä»£ç åˆ†ç¦»å¯ä»¥ç”¨äºè·å–æ›´å°çš„ bundleï¼Œä»¥åŠæ§åˆ¶èµ„æºåŠ è½½ä¼˜å…ˆçº§ï¼Œå¦‚æœä½¿ç”¨åˆç†ï¼Œä¼šæå¤§å½±å“åŠ è½½æ—¶é—´ã€‚</p><p>å¸¸ç”¨çš„ä»£ç åˆ†ç¦»æ–¹æ³•æœ‰ä¸‰ç§ï¼š</p><ul><li><strong>å…¥å£èµ·ç‚¹</strong>ï¼šä½¿ç”¨ <a href="https://webpack.docschina.org/configuration/entry-context" target="_blank" rel="noopener noreferrer"><code>entry</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> é…ç½®æ‰‹åŠ¨åœ°åˆ†ç¦»ä»£ç ã€‚</li><li><strong>é˜²æ­¢é‡å¤</strong>ï¼šä½¿ç”¨ <a href="https://webpack.docschina.org/configuration/entry-context/#dependencies" target="_blank" rel="noopener noreferrer">Entry dependencies<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> æˆ–è€… <a href="https://webpack.docschina.org/plugins/split-chunks-plugin" target="_blank" rel="noopener noreferrer"><code>SplitChunksPlugin</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> å»é‡å’Œåˆ†ç¦» chunkã€‚</li><li><strong>åŠ¨æ€å¯¼å…¥</strong>ï¼šé€šè¿‡æ¨¡å—çš„å†…è”å‡½æ•°è°ƒç”¨æ¥åˆ†ç¦»ä»£ç ã€‚</li></ul><h3 id="_1-8-1-å…¥å£èµ·ç‚¹" tabindex="-1"><a class="header-anchor" href="#_1-8-1-å…¥å£èµ·ç‚¹" aria-hidden="true">#</a> 1.8.1 å…¥å£èµ·ç‚¹</h3><p>è¿™æ˜¯è¿„ä»Šä¸ºæ­¢æœ€ç®€å•ç›´è§‚çš„åˆ†ç¦»ä»£ç çš„æ–¹å¼ã€‚ä¸è¿‡ï¼Œè¿™ç§æ–¹å¼æ‰‹åŠ¨é…ç½®è¾ƒå¤šï¼Œå¹¶æœ‰ä¸€äº›éšæ‚£ï¼Œæˆ‘ä»¬å°†ä¼šè§£å†³è¿™äº›é—®é¢˜ã€‚å…ˆæ¥çœ‹çœ‹å¦‚ä½•ä» main bundle ä¸­åˆ†ç¦» another module(å¦ä¸€ä¸ªæ¨¡å—)ï¼š</p><p>åœ¨ <code>src</code>ç›®å½•ä¸‹åˆ›å»º <code>another-module.js</code>æ–‡ä»¶ï¼š</p><blockquote><p>09-code-splitting/src/another-module.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">&#39;lodash&#39;</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>_<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;Another&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;module&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;loaded!&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#39; &#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>è¿™ä¸ªæ¨¡å—ä¾èµ–äº† <code>lodash</code>ï¼Œéœ€è¦å®‰è£…ä¸€ä¸‹ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> webpack5 $ <span class="token function">npm</span> <span class="token function">install</span> lodash --save-dev
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">index</span><span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">another</span><span class="token operator">:</span> <span class="token string">&#39;./src/another-module.js&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;[name].bundle.js&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>09-code-splitting/webpack.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//...</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">index</span><span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">another</span><span class="token operator">:</span> <span class="token string">&#39;./src/another-module.js&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;[name].bundle.js&#39;</span><span class="token punctuation">,</span>
		<span class="token comment">//...</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">//...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>æ‰§è¡Œç¼–è¯‘ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> 09-code-splitting $ npx webpack
assets by status <span class="token number">744</span> KiB <span class="token punctuation">[</span>cached<span class="token punctuation">]</span> <span class="token number">4</span> assets
assets by status <span class="token number">1.44</span> MiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
  asset another.bundle.js <span class="token number">1.38</span> MiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: another<span class="token punctuation">)</span>
  asset index.bundle.js <span class="token number">65.1</span> KiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: index<span class="token punctuation">)</span>
  asset app.html <span class="token number">441</span> bytes <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
Entrypoint index <span class="token number">68.9</span> KiB <span class="token punctuation">(</span><span class="token number">740</span> KiB<span class="token punctuation">)</span> <span class="token operator">=</span> styles/4a9cff551c7a105e1554.css <span class="token number">3.81</span> KiB index.bundle.js <span class="token number">65.1</span> KiB <span class="token number">3</span> auxiliary assets
Entrypoint another <span class="token number">1.38</span> MiB <span class="token operator">=</span> another.bundle.js
runtime modules <span class="token number">3.23</span> KiB <span class="token number">12</span> modules
cacheable modules <span class="token number">549</span> KiB <span class="token punctuation">(</span>javascript<span class="token punctuation">)</span> <span class="token number">738</span> KiB <span class="token punctuation">(</span>asset<span class="token punctuation">)</span> <span class="token number">2.65</span> KiB <span class="token punctuation">(</span>css/mini-extract<span class="token punctuation">)</span>
  javascript modules <span class="token number">546</span> KiB
    modules by path <span class="token punctuation">..</span>/node_modules/ <span class="token number">540</span> KiB <span class="token number">9</span> modules
    modules by path ./src/ <span class="token number">5.48</span> KiB <span class="token number">8</span> modules
  asset modules <span class="token number">3.1</span> KiB <span class="token punctuation">(</span>javascript<span class="token punctuation">)</span> <span class="token number">738</span> KiB <span class="token punctuation">(</span>asset<span class="token punctuation">)</span>
    ./src/assets/img-1.png <span class="token number">42</span> bytes <span class="token punctuation">(</span>javascript<span class="token punctuation">)</span> <span class="token number">101</span> KiB <span class="token punctuation">(</span>asset<span class="token punctuation">)</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
    ./src/assets/webpack-logo.svg <span class="token number">2.99</span> KiB <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
    ./src/assets/example.txt <span class="token number">25</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
    ./src/assets/qianfeng-sem.jpg <span class="token number">42</span> bytes <span class="token punctuation">(</span>javascript<span class="token punctuation">)</span> <span class="token number">637</span> KiB <span class="token punctuation">(</span>asset<span class="token punctuation">)</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
  json modules <span class="token number">565</span> bytes
    ./src/assets/json/data.toml <span class="token number">188</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
    ./src/assets/json/data.yaml <span class="token number">188</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
    ./src/assets/json/data.json5 <span class="token number">189</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
  css <span class="token punctuation">..</span>/node_modules/css-loader/dist/cjs.js<span class="token operator">!</span>./src/style.css <span class="token number">2.65</span> KiB <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
webpack <span class="token number">5.54</span>.0 compiled successfully <span class="token keyword">in</span> <span class="token number">854</span> ms
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><em>asset another.bundle.js 1.38 MiB [emitted] (name: another)</em> , æˆ‘ä»¬å‘ç° <code>lodash.js</code>ä¹Ÿè¢«æ‰“åŒ…åˆ° <code>another.bundle.js</code> ä¸­ã€‚</p><img src="http://raink.net:8080/md-images/webpack5/img-1.7.1-1.png" alt="image-20211005132302209" style="zoom:50%;" align="left"><p>æŸ¥çœ‹ <code>app.html</code>ï¼š</p><blockquote><p>09-code-splitting/dist/app</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>åƒé”‹å¤§å‰ç«¯æ•™ç ”é™¢-Webpack5å­¦ä¹ æŒ‡å—<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>styles/4a9cff551c7a105e1554.css<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>

	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">defer</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index.bundle.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">defer</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>another.bundle.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>ä¸¤ä¸ªå…¥å£çš„ <code>bundle</code>æ–‡ä»¶éƒ½è¢«é“¾æ¥åˆ°äº† <code>app.html</code>ä¸­ã€‚</p><p>æˆ‘ä»¬å†æ¥ä¿®æ”¹ä¸€ä¸‹ <code>index.js</code>æ–‡ä»¶ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">&#39;lodash&#39;</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>_<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;index&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;module&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;loaded!&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#39; &#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>09-code-splitting/src/index.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// å¯¼å…¥æ¨¡å—</span>
<span class="token comment">//...</span>
<span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">&#39;lodash&#39;</span><span class="token punctuation">;</span>

<span class="token comment">//...</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>_<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;index&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;module&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;loaded!&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#39; &#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>æ‰§è¡Œç¼–è¯‘ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> 09-code-splitting $ npx webpack
assets by status <span class="token number">744</span> KiB <span class="token punctuation">[</span>cached<span class="token punctuation">]</span> <span class="token number">4</span> assets
assets by path <span class="token builtin class-name">.</span> <span class="token number">2.82</span> MiB
  asset index.bundle.js <span class="token number">1.44</span> MiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: index<span class="token punctuation">)</span>
  asset another.bundle.js <span class="token number">1.38</span> MiB <span class="token punctuation">[</span>compared <span class="token keyword">for</span> emit<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: another<span class="token punctuation">)</span>
  asset app.html <span class="token number">441</span> bytes <span class="token punctuation">[</span>compared <span class="token keyword">for</span> emit<span class="token punctuation">]</span>
Entrypoint index <span class="token number">1.44</span> MiB <span class="token punctuation">(</span><span class="token number">740</span> KiB<span class="token punctuation">)</span> <span class="token operator">=</span> styles/4a9cff551c7a105e1554.css <span class="token number">3.81</span> KiB index.bundle.js <span class="token number">1.44</span> MiB <span class="token number">3</span> auxiliary assets
Entrypoint another <span class="token number">1.38</span> MiB <span class="token operator">=</span> another.bundle.js
runtime modules <span class="token number">3.35</span> KiB <span class="token number">13</span> modules
cacheable modules <span class="token number">549</span> KiB <span class="token punctuation">(</span>javascript<span class="token punctuation">)</span> <span class="token number">738</span> KiB <span class="token punctuation">(</span>asset<span class="token punctuation">)</span> <span class="token number">2.65</span> KiB <span class="token punctuation">(</span>css/mini-extract<span class="token punctuation">)</span>
  javascript modules <span class="token number">546</span> KiB
    modules by path <span class="token punctuation">..</span>/node_modules/ <span class="token number">540</span> KiB <span class="token number">9</span> modules
    modules by path ./src/ <span class="token number">5.57</span> KiB <span class="token number">8</span> modules
  asset modules <span class="token number">3.1</span> KiB <span class="token punctuation">(</span>javascript<span class="token punctuation">)</span> <span class="token number">738</span> KiB <span class="token punctuation">(</span>asset<span class="token punctuation">)</span>
    ./src/assets/img-1.png <span class="token number">42</span> bytes <span class="token punctuation">(</span>javascript<span class="token punctuation">)</span> <span class="token number">101</span> KiB <span class="token punctuation">(</span>asset<span class="token punctuation">)</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
    ./src/assets/webpack-logo.svg <span class="token number">2.99</span> KiB <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
    ./src/assets/example.txt <span class="token number">25</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
    ./src/assets/qianfeng-sem.jpg <span class="token number">42</span> bytes <span class="token punctuation">(</span>javascript<span class="token punctuation">)</span> <span class="token number">637</span> KiB <span class="token punctuation">(</span>asset<span class="token punctuation">)</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
  json modules <span class="token number">565</span> bytes
    ./src/assets/json/data.toml <span class="token number">188</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
    ./src/assets/json/data.yaml <span class="token number">188</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
    ./src/assets/json/data.json5 <span class="token number">189</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
  css <span class="token punctuation">..</span>/node_modules/css-loader/dist/cjs.js<span class="token operator">!</span>./src/style.css <span class="token number">2.65</span> KiB <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
webpack <span class="token number">5.54</span>.0 compiled successfully <span class="token keyword">in</span> <span class="token number">898</span> ms
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è§‚å¯Ÿä¸€ä¸‹ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>assets by path <span class="token builtin class-name">.</span> <span class="token number">2.82</span> MiB
  asset index.bundle.js <span class="token number">1.44</span> MiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: index<span class="token punctuation">)</span>
  asset another.bundle.js <span class="token number">1.38</span> MiB <span class="token punctuation">[</span>compared <span class="token keyword">for</span> emit<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: another<span class="token punctuation">)</span>
  asset app.html <span class="token number">441</span> bytes <span class="token punctuation">[</span>compared <span class="token keyword">for</span> emit<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬å‘ç°ï¼š<code>index.bundle.js</code> æ–‡ä»¶å¤§å°ä¹Ÿéª¤ç„¶å¢å¤§äº†ï¼Œå¯ä»¥ <code>lodash.js</code>ä¹Ÿè¢«æ‰“åŒ…åˆ°äº† <code>index.bundle.js</code>ä¸­äº†ã€‚</p><p>æ­£å¦‚å‰é¢æåˆ°çš„ï¼Œè¿™ç§æ–¹å¼çš„ç¡®å­˜åœ¨ä¸€äº›éšæ‚£ï¼š</p><ul><li>å¦‚æœå…¥å£ chunk ä¹‹é—´åŒ…å«ä¸€äº›é‡å¤çš„æ¨¡å—ï¼Œé‚£äº›é‡å¤æ¨¡å—éƒ½ä¼šè¢«å¼•å…¥åˆ°å„ä¸ª bundle ä¸­ã€‚</li><li>è¿™ç§æ–¹æ³•ä¸å¤Ÿçµæ´»ï¼Œå¹¶ä¸”ä¸èƒ½åŠ¨æ€åœ°å°†æ ¸å¿ƒåº”ç”¨ç¨‹åºé€»è¾‘ä¸­çš„ä»£ç æ‹†åˆ†å‡ºæ¥ã€‚</li></ul><p>ä»¥ä¸Šä¸¤ç‚¹ä¸­ï¼Œç¬¬ä¸€ç‚¹å¯¹æˆ‘ä»¬çš„ç¤ºä¾‹æ¥è¯´æ— ç–‘æ˜¯ä¸ªé—®é¢˜ï¼Œå› ä¸ºä¹‹å‰æˆ‘ä»¬åœ¨ <code>./src/index.js</code> ä¸­ä¹Ÿå¼•å…¥è¿‡ <code>lodash</code>ï¼Œè¿™æ ·å°±åœ¨ä¸¤ä¸ª bundle ä¸­é€ æˆé‡å¤å¼•ç”¨ã€‚</p><h3 id="_1-8-2-é˜²æ­¢é‡å¤" tabindex="-1"><a class="header-anchor" href="#_1-8-2-é˜²æ­¢é‡å¤" aria-hidden="true">#</a> 1.8.2 é˜²æ­¢é‡å¤</h3><ul><li><p><strong>å…¥å£ä¾èµ–</strong></p><p>é…ç½® <a href="https://webpack.docschina.org/configuration/entry-context/#dependencies" target="_blank" rel="noopener noreferrer"><code>dependOn</code> option<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> é€‰é¡¹ï¼Œè¿™æ ·å¯ä»¥åœ¨å¤šä¸ª chunk ä¹‹é—´å…±äº«æ¨¡å—ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">index</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token keyword">import</span><span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">,</span>
			<span class="token literal-property property">dependOn</span><span class="token operator">:</span> <span class="token string">&#39;shared&#39;</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token literal-property property">another</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token keyword">import</span><span class="token operator">:</span> <span class="token string">&#39;./src/another-module.js&#39;</span><span class="token punctuation">,</span>
			<span class="token literal-property property">dependOn</span><span class="token operator">:</span> <span class="token string">&#39;shared&#39;</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token literal-property property">shared</span><span class="token operator">:</span> <span class="token string">&#39;lodash&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>09-code-splitting/webpack.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//...</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
 <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
   <span class="token literal-property property">index</span><span class="token operator">:</span> <span class="token punctuation">{</span>
     <span class="token keyword">import</span><span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">,</span>
     <span class="token literal-property property">dependOn</span><span class="token operator">:</span> <span class="token string">&#39;shared&#39;</span><span class="token punctuation">,</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token literal-property property">another</span><span class="token operator">:</span> <span class="token punctuation">{</span>
     <span class="token keyword">import</span><span class="token operator">:</span> <span class="token string">&#39;./src/another-module.js&#39;</span><span class="token punctuation">,</span>
       <span class="token literal-property property">dependOn</span><span class="token operator">:</span> <span class="token string">&#39;shared&#39;</span><span class="token punctuation">,</span>
       <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">shared</span><span class="token operator">:</span> <span class="token string">&#39;lodash&#39;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>

     <span class="token comment">//...</span>
    <span class="token punctuation">}</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span>`
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>æ‰§è¡Œç¼–è¯‘ï¼š</p><blockquote><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> <span class="token number">09</span><span class="token operator">-</span>code<span class="token operator">-</span>splitting $ npx webpack
assets by status <span class="token number">744</span> KiB <span class="token punctuation">[</span>cached<span class="token punctuation">]</span> <span class="token number">4</span> assets
assets by status <span class="token number">1.45</span> MiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
 asset shared<span class="token punctuation">.</span>bundle<span class="token punctuation">.</span>js <span class="token number">1.39</span> MiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">(</span>name<span class="token operator">:</span> shared<span class="token punctuation">)</span>
 asset index<span class="token punctuation">.</span>bundle<span class="token punctuation">.</span>js <span class="token number">57.1</span> KiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">(</span>name<span class="token operator">:</span> index<span class="token punctuation">)</span>
 asset another<span class="token punctuation">.</span>bundle<span class="token punctuation">.</span>js <span class="token number">1.53</span> KiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">(</span>name<span class="token operator">:</span> another<span class="token punctuation">)</span>
 asset app<span class="token punctuation">.</span>html <span class="token number">487</span> bytes <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
Entrypoint index <span class="token number">60.9</span> <span class="token function">KiB</span> <span class="token punctuation">(</span><span class="token number">740</span> KiB<span class="token punctuation">)</span> <span class="token operator">=</span> styles<span class="token operator">/</span>4a9cff551c7a105e1554<span class="token punctuation">.</span>css <span class="token number">3.81</span> KiB index<span class="token punctuation">.</span>bundle<span class="token punctuation">.</span>js <span class="token number">57.1</span> KiB <span class="token number">3</span> auxiliary assets
Entrypoint another <span class="token number">1.53</span> KiB <span class="token operator">=</span> another<span class="token punctuation">.</span>bundle<span class="token punctuation">.</span>js
Entrypoint shared <span class="token number">1.39</span> MiB <span class="token operator">=</span> shared<span class="token punctuation">.</span>bundle<span class="token punctuation">.</span>js
runtime modules <span class="token number">4.47</span> KiB <span class="token number">9</span> modules
cacheable modules <span class="token number">549</span> <span class="token function">KiB</span> <span class="token punctuation">(</span>javascript<span class="token punctuation">)</span> <span class="token number">738</span> <span class="token function">KiB</span> <span class="token punctuation">(</span>asset<span class="token punctuation">)</span> <span class="token number">2.65</span> <span class="token function">KiB</span> <span class="token punctuation">(</span>css<span class="token operator">/</span>mini<span class="token operator">-</span>extract<span class="token punctuation">)</span>
 javascript modules <span class="token number">546</span> KiB
   modules by path <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>node_modules<span class="token operator">/</span> <span class="token number">540</span> KiB <span class="token number">9</span> modules
   modules by path <span class="token punctuation">.</span><span class="token operator">/</span>src<span class="token operator">/</span> <span class="token number">5.57</span> KiB <span class="token number">8</span> modules
 asset modules <span class="token number">3.1</span> <span class="token function">KiB</span> <span class="token punctuation">(</span>javascript<span class="token punctuation">)</span> <span class="token number">738</span> <span class="token function">KiB</span> <span class="token punctuation">(</span>asset<span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token operator">/</span>src<span class="token operator">/</span>assets<span class="token operator">/</span>img<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">.</span>png <span class="token number">42</span> <span class="token function">bytes</span> <span class="token punctuation">(</span>javascript<span class="token punctuation">)</span> <span class="token number">101</span> <span class="token function">KiB</span> <span class="token punctuation">(</span>asset<span class="token punctuation">)</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
   <span class="token punctuation">.</span><span class="token operator">/</span>src<span class="token operator">/</span>assets<span class="token operator">/</span>webpack<span class="token operator">-</span>logo<span class="token punctuation">.</span>svg <span class="token number">2.99</span> KiB <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
   <span class="token punctuation">.</span><span class="token operator">/</span>src<span class="token operator">/</span>assets<span class="token operator">/</span>example<span class="token punctuation">.</span>txt <span class="token number">25</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
   <span class="token punctuation">.</span><span class="token operator">/</span>src<span class="token operator">/</span>assets<span class="token operator">/</span>qianfeng<span class="token operator">-</span>sem<span class="token punctuation">.</span>jpg <span class="token number">42</span> <span class="token function">bytes</span> <span class="token punctuation">(</span>javascript<span class="token punctuation">)</span> <span class="token number">637</span> <span class="token function">KiB</span> <span class="token punctuation">(</span>asset<span class="token punctuation">)</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
 json modules <span class="token number">565</span> bytes
   <span class="token punctuation">.</span><span class="token operator">/</span>src<span class="token operator">/</span>assets<span class="token operator">/</span>json<span class="token operator">/</span>data<span class="token punctuation">.</span>toml <span class="token number">188</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
   <span class="token punctuation">.</span><span class="token operator">/</span>src<span class="token operator">/</span>assets<span class="token operator">/</span>json<span class="token operator">/</span>data<span class="token punctuation">.</span>yaml <span class="token number">188</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
   <span class="token punctuation">.</span><span class="token operator">/</span>src<span class="token operator">/</span>assets<span class="token operator">/</span>json<span class="token operator">/</span>data<span class="token punctuation">.</span>json5 <span class="token number">189</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
 css <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>node_modules<span class="token operator">/</span>css<span class="token operator">-</span>loader<span class="token operator">/</span>dist<span class="token operator">/</span>cjs<span class="token punctuation">.</span>js<span class="token operator">!</span><span class="token punctuation">.</span><span class="token operator">/</span>src<span class="token operator">/</span>style<span class="token punctuation">.</span>css <span class="token number">2.65</span> KiB <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
webpack <span class="token number">5.54</span><span class="token number">.0</span> compiled successfully <span class="token keyword">in</span> <span class="token number">1237</span> ms
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>è§‚å¯Ÿä¸€ä¸‹ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>assets by status <span class="token number">1.45</span> MiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
  asset shared.bundle.js <span class="token number">1.39</span> MiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: shared<span class="token punctuation">)</span>
  asset index.bundle.js <span class="token number">57.1</span> KiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: index<span class="token punctuation">)</span>
  asset another.bundle.js <span class="token number">1.53</span> KiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: another<span class="token punctuation">)</span>
  asset app.html <span class="token number">487</span> bytes <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>index.bundle.js</code>ä¸<code>another.bundle.js</code>å…±äº«çš„æ¨¡å—<code>lodash.js</code>è¢«æ‰“åŒ…åˆ°ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶<code>shared.bundle.js</code>ä¸­ã€‚</p></li><li><p><strong>SplitChunksPlugin</strong></p><p><a href="https://webpack.docschina.org/plugins/split-chunks-plugin" target="_blank" rel="noopener noreferrer"><code>SplitChunksPlugin</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> æ’ä»¶å¯ä»¥å°†å…¬å…±çš„ä¾èµ–æ¨¡å—æå–åˆ°å·²æœ‰çš„å…¥å£ chunk ä¸­ï¼Œæˆ–è€…æå–åˆ°ä¸€ä¸ªæ–°ç”Ÿæˆçš„ chunkã€‚è®©æˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªæ’ä»¶ï¼Œå°†ä¹‹å‰çš„ç¤ºä¾‹ä¸­é‡å¤çš„ <code>lodash</code> æ¨¡å—å»é™¤ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">index</span><span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">another</span><span class="token operator">:</span> <span class="token string">&#39;./src/another-module.js&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  	<span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token string">&#39;all&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>09-code-splitting/webpack.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//...</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">// entry: {</span>
	<span class="token comment">//   index: {</span>
	<span class="token comment">//     import: &#39;./src/index.js&#39;,</span>
	<span class="token comment">//     dependOn: &#39;shared&#39;,</span>
	<span class="token comment">//   },</span>
	<span class="token comment">//   another: {</span>
	<span class="token comment">//     import: &#39;./src/another-module.js&#39;,</span>
	<span class="token comment">//     dependOn: &#39;shared&#39;,</span>
	<span class="token comment">//   },</span>
	<span class="token comment">//   shared: &#39;lodash&#39;,</span>
	<span class="token comment">// },</span>
	<span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">index</span><span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">another</span><span class="token operator">:</span> <span class="token string">&#39;./src/another-module.js&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">//...</span>

	<span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token comment">//...</span>

		<span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token string">&#39;all&#39;</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>æ‰§è¡Œç¼–è¯‘ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> 09-code-splitting $ npx webpack
assets by status <span class="token number">744</span> KiB <span class="token punctuation">[</span>cached<span class="token punctuation">]</span> <span class="token number">4</span> assets
assets by status <span class="token number">1.46</span> MiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
  asset vendors-node_modules_lodash_lodash_js.bundle.js <span class="token number">1.37</span> MiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">(</span>id hint: vendors<span class="token punctuation">)</span>
  asset index.bundle.js <span class="token number">75.3</span> KiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: index<span class="token punctuation">)</span>
  asset another.bundle.js <span class="token number">17.2</span> KiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: another<span class="token punctuation">)</span>
  asset app.html <span class="token number">518</span> bytes <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
Entrypoint index <span class="token number">1.45</span> MiB <span class="token punctuation">(</span><span class="token number">740</span> KiB<span class="token punctuation">)</span> <span class="token operator">=</span> vendors-node_modules_lodash_lodash_js.bundle.js <span class="token number">1.37</span> MiB styles/4a9cff551c7a105e1554.css <span class="token number">3.81</span> KiB index.bundle.js <span class="token number">75.3</span> KiB <span class="token number">3</span> auxiliary assets
Entrypoint another <span class="token number">1.39</span> MiB <span class="token operator">=</span> vendors-node_modules_lodash_lodash_js.bundle.js <span class="token number">1.37</span> MiB another.bundle.js <span class="token number">17.2</span> KiB
runtime modules <span class="token number">8.1</span> KiB <span class="token number">17</span> modules
cacheable modules <span class="token number">549</span> KiB <span class="token punctuation">(</span>javascript<span class="token punctuation">)</span> <span class="token number">738</span> KiB <span class="token punctuation">(</span>asset<span class="token punctuation">)</span> <span class="token number">2.65</span> KiB <span class="token punctuation">(</span>css/mini-extract<span class="token punctuation">)</span>
  javascript modules <span class="token number">546</span> KiB
    modules by path <span class="token punctuation">..</span>/node_modules/ <span class="token number">540</span> KiB <span class="token number">9</span> modules
    modules by path ./src/ <span class="token number">5.57</span> KiB <span class="token number">8</span> modules
  asset modules <span class="token number">3.1</span> KiB <span class="token punctuation">(</span>javascript<span class="token punctuation">)</span> <span class="token number">738</span> KiB <span class="token punctuation">(</span>asset<span class="token punctuation">)</span>
    ./src/assets/img-1.png <span class="token number">42</span> bytes <span class="token punctuation">(</span>javascript<span class="token punctuation">)</span> <span class="token number">101</span> KiB <span class="token punctuation">(</span>asset<span class="token punctuation">)</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
    ./src/assets/webpack-logo.svg <span class="token number">2.99</span> KiB <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
    ./src/assets/example.txt <span class="token number">25</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
    ./src/assets/qianfeng-sem.jpg <span class="token number">42</span> bytes <span class="token punctuation">(</span>javascript<span class="token punctuation">)</span> <span class="token number">637</span> KiB <span class="token punctuation">(</span>asset<span class="token punctuation">)</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
  json modules <span class="token number">565</span> bytes
    ./src/assets/json/data.toml <span class="token number">188</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
    ./src/assets/json/data.yaml <span class="token number">188</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
    ./src/assets/json/data.json5 <span class="token number">189</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
  css <span class="token punctuation">..</span>/node_modules/css-loader/dist/cjs.js<span class="token operator">!</span>./src/style.css <span class="token number">2.65</span> KiB <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
webpack <span class="token number">5.54</span>.0 compiled successfully <span class="token keyword">in</span> <span class="token number">914</span> ms
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è§‚å¯Ÿä¸€ä¸‹ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>assets by status <span class="token number">1.46</span> MiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
  asset vendors-node_modules_lodash_lodash_js.bundle.js <span class="token number">1.37</span> MiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">(</span>id hint: vendors<span class="token punctuation">)</span>
  asset index.bundle.js <span class="token number">75.3</span> KiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: index<span class="token punctuation">)</span>
  asset another.bundle.js <span class="token number">17.2</span> KiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: another<span class="token punctuation">)</span>
  asset app.html <span class="token number">518</span> bytes <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½¿ç”¨ <a href="https://webpack.docschina.org/plugins/split-chunks-plugin/#optimization-splitchunks" target="_blank" rel="noopener noreferrer"><code>optimization.splitChunks</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> é…ç½®é€‰é¡¹ä¹‹åï¼Œç°åœ¨åº”è¯¥å¯ä»¥çœ‹å‡ºï¼Œ<code>index.bundle.js</code> å’Œ <code>another.bundle.js</code> ä¸­å·²ç»ç§»é™¤äº†é‡å¤çš„ä¾èµ–æ¨¡å—ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ’ä»¶å°† <code>lodash</code> åˆ†ç¦»åˆ°å•ç‹¬çš„ chunkï¼Œå¹¶ä¸”å°†å…¶ä» main bundle ä¸­ç§»é™¤ï¼Œå‡è½»äº†å¤§å°ã€‚</p></li></ul><h3 id="_1-8-3-åŠ¨æ€å¯¼å…¥" tabindex="-1"><a class="header-anchor" href="#_1-8-3-åŠ¨æ€å¯¼å…¥" aria-hidden="true">#</a> 1.8.3 åŠ¨æ€å¯¼å…¥</h3><p>å½“æ¶‰åŠåˆ°åŠ¨æ€ä»£ç æ‹†åˆ†æ—¶ï¼Œwebpack æä¾›äº†ä¸¤ä¸ªç±»ä¼¼çš„æŠ€æœ¯ã€‚ç¬¬ä¸€ç§ï¼Œä¹Ÿæ˜¯æ¨èé€‰æ‹©çš„æ–¹å¼æ˜¯ï¼Œä½¿ç”¨ç¬¦åˆ <a href="https://github.com/tc39/proposal-dynamic-import" target="_blank" rel="noopener noreferrer">ECMAScript ææ¡ˆ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> çš„ <a href="https://webpack.docschina.org/api/module-methods/#import-1" target="_blank" rel="noopener noreferrer"><code>import()</code> è¯­æ³•<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> æ¥å®ç°åŠ¨æ€å¯¼å…¥ã€‚ç¬¬äºŒç§ï¼Œåˆ™æ˜¯ webpack çš„é—ç•™åŠŸèƒ½ï¼Œä½¿ç”¨ webpack ç‰¹å®šçš„ <a href="https://webpack.docschina.org/api/module-methods/#requireensure" target="_blank" rel="noopener noreferrer"><code>require.ensure</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚è®©æˆ‘ä»¬å…ˆå°è¯•ä½¿ç”¨ç¬¬ä¸€ç§â€¦â€¦</p><p>åˆ›å»º <code>async-module.js</code>æ–‡ä»¶ï¼š</p><img src="http://raink.net:8080/md-images/webpack5/img-1.7.3-1.png" alt="image-20211007074451722" style="zoom:50%;" align="left"><p>å†…å®¹å¦‚ä¸‹ï¼š</p><blockquote><p>09-code-splitting/src/async-module.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">getComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;lodash&#39;</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token operator">:</span> _ <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			<span class="token keyword">const</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;div&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;Hello&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;webpack&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#39; &#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> element<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&#39;An error occurred while loading the component&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">getComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">component</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>component<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>åœ¨å…¥å£æ–‡ä»¶ä¸­å¯¼å…¥ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token string">&#39;./async-module&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>09-code-splitting/src/index.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// å¯¼å…¥æ¨¡å—</span>
<span class="token comment">//...</span>
<span class="token keyword">import</span> <span class="token string">&#39;./async-module&#39;</span><span class="token punctuation">;</span>

<span class="token comment">//...</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>æ‰§è¡Œç¼–è¯‘ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> 09-code-splitting $ npx webpack
assets by status <span class="token number">744</span> KiB <span class="token punctuation">[</span>cached<span class="token punctuation">]</span> <span class="token number">4</span> assets
assets by status <span class="token number">1.53</span> MiB <span class="token punctuation">[</span>compared <span class="token keyword">for</span> emit<span class="token punctuation">]</span>
  assets by chunk <span class="token number">1.46</span> MiB <span class="token punctuation">(</span>id hint: vendors<span class="token punctuation">)</span>
    asset vendors-node_modules_lodash_lodash_js.bundle.js <span class="token number">1.37</span> MiB <span class="token punctuation">[</span>compared <span class="token keyword">for</span> emit<span class="token punctuation">]</span> <span class="token punctuation">(</span>id hint: vendors<span class="token punctuation">)</span>
    asset vendors-node_modules_babel_runtime_regenerator_index_js-node_modules_css-loader_dist_runtime_-86adfe.bundle.js <span class="token number">93.8</span> KiB <span class="token punctuation">[</span>compared <span class="token keyword">for</span> emit<span class="token punctuation">]</span> <span class="token punctuation">(</span>id hint: vendors<span class="token punctuation">)</span>
  asset index.bundle.js <span class="token number">54.3</span> KiB <span class="token punctuation">[</span>compared <span class="token keyword">for</span> emit<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: index<span class="token punctuation">)</span>
  asset another.bundle.js <span class="token number">17.2</span> KiB <span class="token punctuation">[</span>compared <span class="token keyword">for</span> emit<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: another<span class="token punctuation">)</span>
  asset app.html <span class="token number">658</span> bytes <span class="token punctuation">[</span>compared <span class="token keyword">for</span> emit<span class="token punctuation">]</span>
Entrypoint index <span class="token number">1.52</span> MiB <span class="token punctuation">(</span><span class="token number">740</span> KiB<span class="token punctuation">)</span> <span class="token operator">=</span> vendors-node_modules_lodash_lodash_js.bundle.js <span class="token number">1.37</span> MiB vendors-node_modules_babel_runtime_regenerator_index_js-node_modules_css-loader_dist_runtime_-86adfe.bundle.js <span class="token number">93.8</span> KiB styles/4a9cff551c7a105e1554.css <span class="token number">3.81</span> KiB index.bundle.js <span class="token number">54.3</span> KiB <span class="token number">3</span> auxiliary assets
Entrypoint another <span class="token number">1.39</span> MiB <span class="token operator">=</span> vendors-node_modules_lodash_lodash_js.bundle.js <span class="token number">1.37</span> MiB another.bundle.js <span class="token number">17.2</span> KiB
runtime modules <span class="token number">9.21</span> KiB <span class="token number">18</span> modules
<span class="token punctuation">..</span><span class="token punctuation">..</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»æ‰“å°çš„ç»“æœçœ‹ï¼Œé™¤äº†å…¬å…±çš„ <code>lodash</code> ä»£ç è¢«å•ç‹¬æ‰“åŒ…åˆ°ä¸€ä¸ªæ–‡ä»¶å¤–ï¼Œè¿˜ç”Ÿæˆäº†ä¸€ä¸ª <code>vendors-node_modules_babel_runtime_regenerator_index_js-node_modules_css-loader_dist_runtime_-86adfe.bundle.js</code> æ–‡ä»¶ã€‚</p><img src="http://raink.net:8080/md-images/webpack5/img-1.7.3-2.png" alt="image-20211007083617826" style="zoom:50%;"><p>æˆ‘ä»¬çœ‹åˆ°ï¼Œé™æ€å’ŒåŠ¨æ€è½½å…¥çš„æ¨¡å—éƒ½æ­£å¸¸å·¥ä½œäº†ã€‚</p><h3 id="_1-8-4-æ‡’åŠ è½½" tabindex="-1"><a class="header-anchor" href="#_1-8-4-æ‡’åŠ è½½" aria-hidden="true">#</a> 1.8.4 æ‡’åŠ è½½</h3><p>æ‡’åŠ è½½æˆ–è€…æŒ‰éœ€åŠ è½½ï¼Œæ˜¯ä¸€ç§å¾ˆå¥½çš„ä¼˜åŒ–ç½‘é¡µæˆ–åº”ç”¨çš„æ–¹å¼ã€‚è¿™ç§æ–¹å¼å®é™…ä¸Šæ˜¯å…ˆæŠŠä½ çš„ä»£ç åœ¨ä¸€äº›é€»è¾‘æ–­ç‚¹å¤„åˆ†ç¦»å¼€ï¼Œç„¶ååœ¨ä¸€äº›ä»£ç å—ä¸­å®ŒæˆæŸäº›æ“ä½œåï¼Œç«‹å³å¼•ç”¨æˆ–å³å°†å¼•ç”¨å¦å¤–ä¸€äº›æ–°çš„ä»£ç å—ã€‚è¿™æ ·åŠ å¿«äº†åº”ç”¨çš„åˆå§‹åŠ è½½é€Ÿåº¦ï¼Œå‡è½»äº†å®ƒçš„æ€»ä½“ä½“ç§¯ï¼Œå› ä¸ºæŸäº›ä»£ç å—å¯èƒ½æ°¸è¿œä¸ä¼šè¢«åŠ è½½ã€‚</p><p>åˆ›å»ºä¸€ä¸ª <code>math.js</code> æ–‡ä»¶ï¼Œåœ¨ä¸»é¡µé¢ä¸­é€šè¿‡ç‚¹å‡»æŒ‰é’®è°ƒç”¨å…¶ä¸­çš„å‡½æ•°ï¼š</p><blockquote><p>09-code-splitting/src/math.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">minus</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> x <span class="token operator">-</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>ç¼–è¾‘ <code>index.js</code>æ–‡ä»¶ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> button <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;button&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
button<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">&#39;ç‚¹å‡»æ‰§è¡ŒåŠ æ³•è¿ç®—&#39;</span><span class="token punctuation">;</span>
button<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: &#39;math&#39; */</span> <span class="token string">&#39;./math.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> add <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>button<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œæœ‰å¥æ³¨é‡Šï¼Œæˆ‘ä»¬æŠŠå®ƒç§°ä¸º webpack é­”æ³•æ³¨é‡Šï¼š<code>webpackChunkName: &#39;math&#39;</code>, å‘Šè¯‰ webpack æ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶åä¸º <code>math</code>ã€‚</p><p>å¯åŠ¨æœåŠ¡ï¼Œåœ¨æµè§ˆå™¨ä¸ŠæŸ¥çœ‹ï¼š</p><img src="http://raink.net:8080/md-images/webpack5/img-1.7.4-6.png" alt="image-20211008205054635" style="zoom:50%;"><p>ç¬¬ä¸€æ¬¡åŠ è½½å®Œé¡µé¢ï¼Œ<code>math.bundle.js</code>ä¸ä¼šåŠ è½½ï¼Œå½“ç‚¹å‡»æŒ‰é’®åï¼Œæ‰åŠ è½½ <code>math.bundle.js</code>æ–‡ä»¶ã€‚</p><h3 id="_1-8-5-é¢„è·å–-é¢„åŠ è½½æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#_1-8-5-é¢„è·å–-é¢„åŠ è½½æ¨¡å—" aria-hidden="true">#</a> 1.8.5 é¢„è·å–/é¢„åŠ è½½æ¨¡å—</h3><p>Webpack v4.6.0+ å¢åŠ äº†å¯¹é¢„è·å–å’Œé¢„åŠ è½½çš„æ”¯æŒã€‚</p><p>åœ¨å£°æ˜ import æ—¶ï¼Œä½¿ç”¨ä¸‹é¢è¿™äº›å†…ç½®æŒ‡ä»¤ï¼Œå¯ä»¥è®© webpack è¾“å‡º &quot;resource hint(èµ„æºæç¤º)&quot;ï¼Œæ¥å‘ŠçŸ¥æµè§ˆå™¨ï¼š</p><ul><li><strong>prefetch</strong>(é¢„è·å–)ï¼šå°†æ¥æŸäº›å¯¼èˆªä¸‹å¯èƒ½éœ€è¦çš„èµ„æº</li><li><strong>preload</strong>(é¢„åŠ è½½)ï¼šå½“å‰å¯¼èˆªä¸‹å¯èƒ½éœ€è¦èµ„æº</li></ul><p>ä¸‹é¢è¿™ä¸ª prefetch çš„ç®€å•ç¤ºä¾‹ä¸­ï¼Œç¼–è¾‘ <code>index.js</code>æ–‡ä»¶ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> button <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;button&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
button<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">&#39;ç‚¹å‡»æ‰§è¡ŒåŠ æ³•è¿ç®—&#39;</span><span class="token punctuation">;</span>
button<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: &#39;math&#39;, webpackPrefetch: true */</span> <span class="token string">&#39;./math.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> add <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>button<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ·»åŠ ç¬¬äºŒå¥é­”æ³•æ³¨é‡Šï¼š<code>webpackPrefetch: true</code></p><p>å‘Šè¯‰ webpack æ‰§è¡Œé¢„è·å–ã€‚è¿™ä¼šç”Ÿæˆ <code>&lt;link rel=&quot;prefetch&quot; href=&quot;math.js&quot;&gt;</code> å¹¶è¿½åŠ åˆ°é¡µé¢å¤´éƒ¨ï¼ŒæŒ‡ç¤ºç€æµè§ˆå™¨åœ¨é—²ç½®æ—¶é—´é¢„å– <code>math.js</code> æ–‡ä»¶ã€‚</p><blockquote><p>09-code-splitting/src/index.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// å¯¼å…¥æ¨¡å—</span>
<span class="token comment">//...</span>
<span class="token keyword">import</span> <span class="token string">&#39;./async-module&#39;</span><span class="token punctuation">;</span>

<span class="token comment">//...</span>

<span class="token keyword">const</span> button <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;button&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
button<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">&#39;ç‚¹å‡»æ‰§è¡ŒåŠ æ³•è¿ç®—&#39;</span><span class="token punctuation">;</span>
button<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: &#39;math&#39;, webpackPrefetch: true */</span> <span class="token string">&#39;./math.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> add <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>button<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>å¯åŠ¨æœåŠ¡ï¼Œåœ¨æµè§ˆå™¨ä¸ŠæŸ¥çœ‹ï¼š</p><img src="http://raink.net:8080/md-images/webpack5/img-1.7.4-1.png" alt="image-20211007092632530" style="zoom:50%;"><p>æˆ‘ä»¬å‘ç°ï¼Œåœ¨è¿˜æ²¡æœ‰ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œ<code>math.bundle.js</code>å°±å·²ç»ä¸‹è½½ä¸‹æ¥äº†ã€‚åŒæ—¶ï¼Œåœ¨ <code>app.html</code>é‡Œ webpack è‡ªåŠ¨æ·»åŠ äº†ä¸€å¥ï¼š</p><img src="http://raink.net:8080/md-images/webpack5/img-1.7.4-2.png" alt="image-20211007093411484" style="zoom:50%;" align="left"><p>ç‚¹å‡»æŒ‰é’®ï¼Œä¼šç«‹å³è°ƒç”¨å·²ç»ä¸‹è½½å¥½çš„ <code>math.bundle.js</code>æ–‡ä»¶ä¸­çš„ <code>add</code> æ–¹æ³•ï¼š</p><img src="http://raink.net:8080/md-images/webpack5/img-1.7.4-3.png" alt="image-20211007093806759" style="zoom:50%;"><p>ç‚¹å‡»æŒ‰é’®ï¼Œæ‰§è¡Œ <code>4+5</code>çš„åŠ æ³•è¿ç®—ã€‚</p><p>ä¸ prefetch æŒ‡ä»¤ç›¸æ¯”ï¼Œpreload æŒ‡ä»¤æœ‰è®¸å¤šä¸åŒä¹‹å¤„ï¼š</p><ul><li>preload chunk ä¼šåœ¨çˆ¶ chunk åŠ è½½æ—¶ï¼Œä»¥å¹¶è¡Œæ–¹å¼å¼€å§‹åŠ è½½ã€‚prefetch chunk ä¼šåœ¨çˆ¶ chunk åŠ è½½ç»“æŸåå¼€å§‹åŠ è½½ã€‚</li><li>preload chunk å…·æœ‰ä¸­ç­‰ä¼˜å…ˆçº§ï¼Œå¹¶ç«‹å³ä¸‹è½½ã€‚prefetch chunk åœ¨æµè§ˆå™¨é—²ç½®æ—¶ä¸‹è½½ã€‚</li><li>preload chunk ä¼šåœ¨çˆ¶ chunk ä¸­ç«‹å³è¯·æ±‚ï¼Œç”¨äºå½“ä¸‹æ—¶åˆ»ã€‚prefetch chunk ä¼šç”¨äºæœªæ¥çš„æŸä¸ªæ—¶åˆ»ã€‚</li><li>æµè§ˆå™¨æ”¯æŒç¨‹åº¦ä¸åŒã€‚</li></ul><p>åˆ›å»ºä¸€ä¸ª <code>print.js</code>æ–‡ä»¶ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">print</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;preload chunk.&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¿®æ”¹ <code>index.js</code>æ–‡ä»¶ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> button2 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;button&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
button2<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">&#39;ç‚¹å‡»æ‰§è¡Œå­—ç¬¦ä¸²æ‰“å°&#39;</span><span class="token punctuation">;</span>
button2<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: &#39;print&#39;, webpackPreload: true */</span> <span class="token string">&#39;./print.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> print <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token function">print</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>button2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>09-code-splitting/src/index.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// å¯¼å…¥æ¨¡å—</span>
<span class="token comment">//...</span>

<span class="token keyword">import</span> <span class="token string">&#39;./async-module&#39;</span><span class="token punctuation">;</span>

<span class="token comment">//...</span>

<span class="token keyword">const</span> button2 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;button&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
button2<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">&#39;ç‚¹å‡»æ‰§è¡Œå­—ç¬¦ä¸²æ‰“å°&#39;</span><span class="token punctuation">;</span>
button2<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: &#39;print&#39;, webpackPreload: true */</span> <span class="token string">&#39;./print.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
		<span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> print <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			<span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>button2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>å¯åŠ¨æœåŠ¡ï¼Œæ‰“å¼€æµè§ˆå™¨ï¼š</p><img src="http://raink.net:8080/md-images/webpack5/img-1.7.3.3.png" alt="image-20211007104846669" style="zoom:50%;"><p>ä»”ç»†è§‚å¯Ÿï¼Œå‘ç° <code>print.bundle.js</code>æœªè¢«ä¸‹è½½ï¼Œå› ä¸ºæˆ‘ä»¬é…ç½®çš„æ˜¯ <code>webpackPreload</code>, æ˜¯åœ¨çˆ¶ chunk åŠ è½½æ—¶ï¼Œä»¥å¹¶è¡Œæ–¹å¼å¼€å§‹åŠ è½½ã€‚ç‚¹å‡»æŒ‰é’®æ‰åŠ è½½çš„æ¨¡å—ä¸ä¼šäº‹å…ˆåŠ è½½çš„ã€‚</p><p>æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹å¼•å…¥æ–¹å¼ï¼š</p><blockquote><p>09-code-splitting/src/index.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//...</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: &#39;print&#39;, webpackPreload: true */</span> <span class="token string">&#39;./print.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> print <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>å†æ¬¡åˆ·æ–°æµè§ˆå™¨é¡µé¢ï¼š</p><img src="http://raink.net:8080/md-images/webpack5/img-1.7.4-5.png" alt="image-20211007105858087" style="zoom:50%;"><p><code>print.bundle.js</code>è¢«åŠ è½½ä¸‹æ¥ï¼Œæ˜¯å’Œå½“å‰<code>index.bundle.js</code>å¹¶è¡ŒåŠ è½½çš„ã€‚</p><h2 id="_1-9-ç¼“å­˜" tabindex="-1"><a class="header-anchor" href="#_1-9-ç¼“å­˜" aria-hidden="true">#</a> 1.9 ç¼“å­˜</h2><p>ä»¥ä¸Šï¼Œæˆ‘ä»¬ä½¿ç”¨ webpack æ¥æ‰“åŒ…æˆ‘ä»¬çš„æ¨¡å—åŒ–åçš„åº”ç”¨ç¨‹åºï¼Œwebpack ä¼šç”Ÿæˆä¸€ä¸ªå¯éƒ¨ç½²çš„ <code>/dist</code> ç›®å½•ï¼Œç„¶åæŠŠæ‰“åŒ…åçš„å†…å®¹æ”¾ç½®åœ¨æ­¤ç›®å½•ä¸­ã€‚åªè¦ <code>/dist</code> ç›®å½•ä¸­çš„å†…å®¹éƒ¨ç½²åˆ° server ä¸Šï¼Œclientï¼ˆé€šå¸¸æ˜¯æµè§ˆå™¨ï¼‰å°±èƒ½å¤Ÿè®¿é—®æ­¤ server çš„ç½‘ç«™åŠå…¶èµ„æºã€‚è€Œæœ€åä¸€æ­¥è·å–èµ„æºæ˜¯æ¯”è¾ƒè€—è´¹æ—¶é—´çš„ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæµè§ˆå™¨ä½¿ç”¨ä¸€ç§åä¸º <a href="https://en.wikipedia.org/wiki/Cache_(computing)" target="_blank" rel="noopener noreferrer">ç¼“å­˜<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> çš„æŠ€æœ¯ã€‚å¯ä»¥é€šè¿‡å‘½ä¸­ç¼“å­˜ï¼Œä»¥é™ä½ç½‘ç»œæµé‡ï¼Œä½¿ç½‘ç«™åŠ è½½é€Ÿåº¦æ›´å¿«ï¼Œç„¶è€Œï¼Œå¦‚æœæˆ‘ä»¬åœ¨éƒ¨ç½²æ–°ç‰ˆæœ¬æ—¶ä¸æ›´æ”¹èµ„æºçš„æ–‡ä»¶åï¼Œæµè§ˆå™¨å¯èƒ½ä¼šè®¤ä¸ºå®ƒæ²¡æœ‰è¢«æ›´æ–°ï¼Œå°±ä¼šä½¿ç”¨å®ƒçš„ç¼“å­˜ç‰ˆæœ¬ã€‚ç”±äºç¼“å­˜çš„å­˜åœ¨ï¼Œå½“ä½ éœ€è¦è·å–æ–°çš„ä»£ç æ—¶ï¼Œå°±ä¼šæ˜¾å¾—å¾ˆæ£˜æ‰‹ã€‚</p><p>æœ¬èŠ‚é€šè¿‡å¿…è¦çš„é…ç½®ï¼Œä»¥ç¡®ä¿ webpack ç¼–è¯‘ç”Ÿæˆçš„æ–‡ä»¶èƒ½å¤Ÿè¢«å®¢æˆ·ç«¯ç¼“å­˜ï¼Œè€Œåœ¨æ–‡ä»¶å†…å®¹å˜åŒ–åï¼Œèƒ½å¤Ÿè¯·æ±‚åˆ°æ–°çš„æ–‡ä»¶ã€‚</p><h3 id="_1-9-1-è¾“å‡ºæ–‡ä»¶çš„æ–‡ä»¶å" tabindex="-1"><a class="header-anchor" href="#_1-9-1-è¾“å‡ºæ–‡ä»¶çš„æ–‡ä»¶å" aria-hidden="true">#</a> 1.9.1 è¾“å‡ºæ–‡ä»¶çš„æ–‡ä»¶å</h3><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡æ›¿æ¢ <code>output.filename</code> ä¸­çš„ <a href="https://webpack.docschina.org/configuration/output/#outputfilename" target="_blank" rel="noopener noreferrer">substitutions<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> è®¾ç½®ï¼Œæ¥å®šä¹‰è¾“å‡ºæ–‡ä»¶çš„åç§°ã€‚webpack æä¾›äº†ä¸€ç§ä½¿ç”¨ç§°ä¸º <strong>substitution(å¯æ›¿æ¢æ¨¡æ¿å­—ç¬¦ä¸²)</strong> çš„æ–¹å¼ï¼Œé€šè¿‡å¸¦æ‹¬å·å­—ç¬¦ä¸²æ¥æ¨¡æ¿åŒ–æ–‡ä»¶åã€‚å…¶ä¸­ï¼Œ<code>[contenthash]</code> substitution å°†æ ¹æ®èµ„æºå†…å®¹åˆ›å»ºå‡ºå”¯ä¸€ hashã€‚å½“èµ„æºå†…å®¹å‘ç”Ÿå˜åŒ–æ—¶ï¼Œ<code>[contenthash]</code> ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ã€‚</p><p>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;[name].[contenthash].js&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>10-caching/webpack.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//...</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">//...</span>
	<span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;[name].[contenthash].js&#39;</span><span class="token punctuation">,</span>

		<span class="token comment">//...</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">//...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>æ‰§è¡Œæ‰“åŒ…ç¼–è¯‘ï¼š</p><img src="http://raink.net:8080/md-images/webpack5/img-1.8.1-1.png" alt="image-20211008210912001" style="zoom:50%;" align="left"><p>å¯ä»¥çœ‹åˆ°ï¼Œbundle çš„åç§°æ˜¯å®ƒå†…å®¹ï¼ˆé€šè¿‡ hashï¼‰çš„æ˜ å°„ã€‚å¦‚æœæˆ‘ä»¬ä¸åšä¿®æ”¹ï¼Œç„¶åå†æ¬¡è¿è¡Œæ„å»ºï¼Œæ–‡ä»¶åä¼šä¿æŒä¸å˜ã€‚</p><h3 id="_1-9-2-ç¼“å­˜ç¬¬ä¸‰æ–¹åº“" tabindex="-1"><a class="header-anchor" href="#_1-9-2-ç¼“å­˜ç¬¬ä¸‰æ–¹åº“" aria-hidden="true">#</a> 1.9.2 ç¼“å­˜ç¬¬ä¸‰æ–¹åº“</h3><p>å°†ç¬¬ä¸‰æ–¹åº“(library)ï¼ˆä¾‹å¦‚ <code>lodash</code>ï¼‰æå–åˆ°å•ç‹¬çš„ <code>vendor</code> chunk æ–‡ä»¶ä¸­ï¼Œæ˜¯æ¯”è¾ƒæ¨èçš„åšæ³•ï¼Œè¿™æ˜¯å› ä¸ºï¼Œå®ƒä»¬å¾ˆå°‘åƒæœ¬åœ°çš„æºä»£ç é‚£æ ·é¢‘ç¹ä¿®æ”¹ã€‚å› æ­¤é€šè¿‡å®ç°ä»¥ä¸Šæ­¥éª¤ï¼Œåˆ©ç”¨ client çš„é•¿æ•ˆç¼“å­˜æœºåˆ¶ï¼Œå‘½ä¸­ç¼“å­˜æ¥æ¶ˆé™¤è¯·æ±‚ï¼Œå¹¶å‡å°‘å‘ server è·å–èµ„æºï¼ŒåŒæ—¶è¿˜èƒ½ä¿è¯ client ä»£ç å’Œ server ä»£ç ç‰ˆæœ¬ä¸€è‡´ã€‚ æˆ‘ä»¬åœ¨ <code>optimization.splitChunks</code> æ·»åŠ å¦‚ä¸‹ <code>cacheGroups</code> å‚æ•°å¹¶æ„å»ºï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">cacheGroups</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">vendor</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\\/]node_modules[\\/]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;vendors&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token string">&#39;all&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>10-caching/webpack.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//...</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">//...</span>

	<span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token comment">//...</span>

		<span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">cacheGroups</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">vendor</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\\/]node_modules[\\/]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
					<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;vendors&#39;</span><span class="token punctuation">,</span>
					<span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token string">&#39;all&#39;</span><span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>æ‰§è¡Œç¼–è¯‘ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> <span class="token number">10</span>-caching $ npx webpack
assets by status <span class="token number">746</span> KiB <span class="token punctuation">[</span>cached<span class="token punctuation">]</span> <span class="token number">6</span> assets
assets by status <span class="token number">1.55</span> MiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
  asset vendors.cc405abb852d5860354f.js <span class="token number">1.46</span> MiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">[</span>immutable<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: vendors<span class="token punctuation">)</span> <span class="token punctuation">(</span>id hint: vendor<span class="token punctuation">)</span>
  asset index.ac97de18bcd04fe84ceb.js <span class="token number">67.4</span> KiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">[</span>immutable<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: index<span class="token punctuation">)</span>
  asset another.e82e921ba518380decce.js <span class="token number">17.2</span> KiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">[</span>immutable<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: another<span class="token punctuation">)</span>
  asset app.html <span class="token number">530</span> bytes <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
  <span class="token punctuation">..</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><img src="http://raink.net:8080/md-images/webpack5/img-1.8.2-2.png" alt="image-20211008212019923" style="zoom:50%;" align="left"><h3 id="_1-9-3-å°†-js-æ–‡ä»¶æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­" tabindex="-1"><a class="header-anchor" href="#_1-9-3-å°†-js-æ–‡ä»¶æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­" aria-hidden="true">#</a> 1.9.3 å°† js æ–‡ä»¶æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­</h3><p>ç›®å‰ï¼Œå…¨éƒ¨ js æ–‡ä»¶éƒ½åœ¨ <code>dist</code>æ–‡ä»¶å¤¹æ ¹ç›®å½•ä¸‹ï¼Œæˆ‘ä»¬å°è¯•æŠŠå®ƒä»¬æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œè¿™ä¸ªå…¶å®ä¹Ÿç®€å•ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;scripts/[name].[contenthash].js&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>10-caching/webpack.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//...</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">//...</span>

	<span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;scripts/[name].[contenthash].js&#39;</span><span class="token punctuation">,</span>

		<span class="token comment">//...</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">//...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>æˆ‘ä»¬åœ¨è¾“å‡ºé…ç½®ä¸­ä¿®æ”¹<code>filename</code>ï¼Œåœ¨å‰é¢åŠ ä¸Šè·¯å¾„å³å¯ã€‚æ‰§è¡Œç¼–è¯‘ï¼š</p><img src="http://raink.net:8080/md-images/webpack5/img-1.8.3-3.png" alt="image-20211008213755692" style="zoom:50%;" align="left"><p>æˆªæ­¢ç›®å‰ï¼Œæˆ‘ä»¬å·²ç»æŠŠ JS æ–‡ä»¶ã€æ ·å¼æ–‡ä»¶åŠå›¾ç‰‡ç­‰èµ„æºæ–‡ä»¶åˆ†åˆ«æ”¾åˆ°äº† <code>scripts</code>ã€<code>styles</code>ã€<code>images</code>ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ã€‚</p><h2 id="_1-10-æ‹†åˆ†å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒé…ç½®" tabindex="-1"><a class="header-anchor" href="#_1-10-æ‹†åˆ†å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒé…ç½®" aria-hidden="true">#</a> 1.10 æ‹†åˆ†å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒé…ç½®</h2><p>ç°åœ¨ï¼Œæˆ‘ä»¬åªèƒ½æ‰‹å·¥çš„æ¥è°ƒæ•´ <code>mode</code>é€‰é¡¹ï¼Œå®ç°ç”Ÿäº§ç¯å¢ƒå’Œå¼€å‘ç¯å¢ƒçš„åˆ‡æ¢ï¼Œä¸”å¾ˆå¤šé…ç½®åœ¨ç”Ÿäº§ç¯å¢ƒå’Œå¼€å‘ç¯å¢ƒä¸­å­˜åœ¨ä¸ä¸€è‡´çš„æƒ…å†µï¼Œæ¯”å¦‚å¼€å‘ç¯å¢ƒæ²¡æœ‰å¿…è¦è®¾ç½®ç¼“å­˜ï¼Œç”Ÿäº§ç¯å¢ƒè¿˜éœ€è¦è®¾ç½®å…¬å…±è·¯å¾„ç­‰ç­‰ã€‚</p><p>æœ¬èŠ‚ä»‹ç»æ‹†åˆ†å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒï¼Œè®©æ‰“åŒ…æ›´çµæ´»ã€‚</p><h3 id="_1-10-1-å…¬å…±è·¯å¾„" tabindex="-1"><a class="header-anchor" href="#_1-10-1-å…¬å…±è·¯å¾„" aria-hidden="true">#</a> 1.10.1 å…¬å…±è·¯å¾„</h3><p><a href="https://webpack.docschina.org/configuration/output/#outputpublicpath" target="_blank" rel="noopener noreferrer"><code>publicPath</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> é…ç½®é€‰é¡¹åœ¨å„ç§åœºæ™¯ä¸­éƒ½éå¸¸æœ‰ç”¨ã€‚ä½ å¯ä»¥é€šè¿‡å®ƒæ¥æŒ‡å®šåº”ç”¨ç¨‹åºä¸­æ‰€æœ‰èµ„æºçš„åŸºç¡€è·¯å¾„ã€‚</p><ul><li><p>åŸºäºç¯å¢ƒè®¾ç½®</p><p>åœ¨å¼€å‘ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬é€šå¸¸æœ‰ä¸€ä¸ª <code>assets/</code> æ–‡ä»¶å¤¹ï¼Œå®ƒä¸ç´¢å¼•é¡µé¢ä½äºåŒä¸€çº§åˆ«ã€‚è¿™æ²¡å¤ªå¤§é—®é¢˜ï¼Œä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬å°†æ‰€æœ‰é™æ€èµ„æºæ‰˜ç®¡è‡³ CDNï¼Œç„¶åæƒ³åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨å‘¢ï¼Ÿ</p><p>æƒ³è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ä¸€ä¸ª environment variable(ç¯å¢ƒå˜é‡)ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå˜é‡ <code>ASSET_PATH</code>ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> webpack <span class="token keyword">from</span> <span class="token string">&#39;webpack&#39;</span><span class="token punctuation">;</span>

<span class="token comment">// å°è¯•ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼Œå¦åˆ™ä½¿ç”¨æ ¹è·¯å¾„</span>
<span class="token keyword">const</span> <span class="token constant">ASSET_PATH</span> <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">ASSET_PATH</span> <span class="token operator">||</span> <span class="token string">&#39;/&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token constant">ASSET_PATH</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token comment">// è¿™å¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨ä»£ç ä¸­å®‰å…¨åœ°ä½¿ç”¨ç¯å¢ƒå˜é‡</span>
		<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token string-property property">&#39;p<wbr>rocess.env.ASSET_PATH&#39;</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token constant">ASSET_PATH</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>11-multiple-env/webpack.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//...</span>
<span class="token keyword">import</span> webpack <span class="token keyword">from</span> <span class="token string">&#39;webpack&#39;</span><span class="token punctuation">;</span>

<span class="token comment">// å°è¯•ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼Œå¦åˆ™ä½¿ç”¨æ ¹è·¯å¾„</span>
<span class="token keyword">const</span> <span class="token constant">ASSET_PATH</span> <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">ASSET_PATH</span> <span class="token operator">||</span> <span class="token string">&#39;/&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token comment">//...</span>

		<span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token constant">ASSET_PATH</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token comment">// è¿™å¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨ä»£ç ä¸­å®‰å…¨åœ°ä½¿ç”¨ç¯å¢ƒå˜é‡</span>
		<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token string-property property">&#39;p<wbr>rocess.env.ASSET_PATH&#39;</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token constant">ASSET_PATH</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

		<span class="token comment">//...</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote></li><li><h3 id="automatic-publicpath" tabindex="-1"><a class="header-anchor" href="#automatic-publicpath" aria-hidden="true">#</a> Automatic publicPath</h3><p>æœ‰å¯èƒ½ä½ äº‹å…ˆä¸çŸ¥é“ publicPath æ˜¯ä»€ä¹ˆï¼Œwebpack ä¼šè‡ªåŠ¨æ ¹æ® <a href="https://webpack.docschina.org/api/module-variables/#importmetaurl" target="_blank" rel="noopener noreferrer"><code>i<wbr>mport.meta.url</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€<a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/currentScript" target="_blank" rel="noopener noreferrer"><code>document.currentScript</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€<code>script.src</code> æˆ–è€… <code>self.location</code> å˜é‡è®¾ç½® publicPathã€‚ä½ éœ€è¦åšçš„æ˜¯å°† <a href="https://webpack.docschina.org/configuration/output/#outputpublicpath" target="_blank" rel="noopener noreferrer"><code>output.publicPath</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> è®¾ä¸º <code>&#39;auto&#39;</code>ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token string">&#39;auto&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¯·æ³¨æ„åœ¨æŸäº›æƒ…å†µä¸‹ä¸æ”¯æŒ <code>document.currentScript</code>ï¼Œä¾‹å¦‚ï¼šIE æµè§ˆå™¨ï¼Œä½ ä¸å¾—ä¸å¼•å…¥ä¸€ä¸ª polyfillï¼Œä¾‹å¦‚ <a href="https://github.com/amiller-gh/currentScript-polyfill" target="_blank" rel="noopener noreferrer"><code>currentScript Polyfill</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚</p></li></ul><h3 id="_1-10-2-ç¯å¢ƒå˜é‡" tabindex="-1"><a class="header-anchor" href="#_1-10-2-ç¯å¢ƒå˜é‡" aria-hidden="true">#</a> 1.10.2 ç¯å¢ƒå˜é‡</h3><p>æƒ³è¦æ¶ˆé™¤ <code>webpack.config.js</code> åœ¨ <a href="https://webpack.docschina.org/guides/development" target="_blank" rel="noopener noreferrer">å¼€å‘ç¯å¢ƒ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> å’Œ <a href="https://webpack.docschina.org/guides/production" target="_blank" rel="noopener noreferrer">ç”Ÿäº§ç¯å¢ƒ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ä¹‹é—´çš„å·®å¼‚ï¼Œä½ å¯èƒ½éœ€è¦ç¯å¢ƒå˜é‡(environment variable)ã€‚</p><p>webpack å‘½ä»¤è¡Œ <a href="https://webpack.docschina.org/api/cli/#environment-options" target="_blank" rel="noopener noreferrer">ç¯å¢ƒé…ç½®<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> çš„ <code>--env</code> å‚æ•°ï¼Œå¯ä»¥å…è®¸ä½ ä¼ å…¥ä»»æ„æ•°é‡çš„ç¯å¢ƒå˜é‡ã€‚è€Œåœ¨ <code>webpack.config.js</code> ä¸­å¯ä»¥è®¿é—®åˆ°è¿™äº›ç¯å¢ƒå˜é‡ã€‚ä¾‹å¦‚ï¼Œ<code>--env production</code> æˆ– <code>--env goal=local</code>ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>npx webpack <span class="token parameter variable">--env</span> <span class="token assign-left variable">goal</span><span class="token operator">=</span>local <span class="token parameter variable">--env</span> production <span class="token parameter variable">--progress</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¯¹äºæˆ‘ä»¬çš„ webpack é…ç½®ï¼Œæœ‰ä¸€ä¸ªå¿…é¡»è¦ä¿®æ”¹ä¹‹å¤„ã€‚é€šå¸¸ï¼Œ<code>module.exports</code> æŒ‡å‘é…ç½®å¯¹è±¡ã€‚è¦ä½¿ç”¨ <code>env</code> å˜é‡ï¼Œä½ å¿…é¡»å°† <code>module.exports</code> è½¬æ¢æˆä¸€ä¸ªå‡½æ•°ï¼š</p><blockquote><p>11-multiple-env/webpack.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//...</span>
module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">env</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token punctuation">{</span>
		<span class="token comment">//...</span>
		<span class="token comment">// æ ¹æ®å‘½ä»¤è¡Œå‚æ•° env æ¥è®¾ç½®ä¸åŒç¯å¢ƒçš„ mode</span>
		<span class="token literal-property property">mode</span><span class="token operator">:</span> env<span class="token punctuation">.</span>production <span class="token operator">?</span> <span class="token string">&#39;production&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;development&#39;</span><span class="token punctuation">,</span>
		<span class="token comment">//...</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h3 id="_1-10-3-æ‹†åˆ†é…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_1-10-3-æ‹†åˆ†é…ç½®æ–‡ä»¶" aria-hidden="true">#</a> 1.10.3 æ‹†åˆ†é…ç½®æ–‡ä»¶</h3><p>ç›®å‰ï¼Œç”Ÿäº§ç¯å¢ƒå’Œå¼€å‘ç¯å¢ƒä½¿ç”¨çš„æ˜¯ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™ä¸¤ä¸ªæ–‡ä»¶å•ç‹¬æ”¾åˆ°ä¸åŒçš„é…ç½®æ–‡ä»¶ä¸­ã€‚å¦‚<code>webpack.config.dev.js</code>ï¼ˆå¼€å‘ç¯å¢ƒé…ç½®ï¼‰å’Œ <code>webpack.config.prod.js</code>ï¼ˆç”Ÿäº§ç¯å¢ƒé…ç½®ï¼‰ã€‚åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶å¤¹ <code>config</code> æ¥å­˜æ”¾ä»–ä»¬ã€‚</p><p><code>webpack.config.dev.js</code> é…ç½®å¦‚ä¸‹ï¼š</p><blockquote><p>11-multiple-env/config/webpack.config.dev.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;html-webpack-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;mini-css-extract-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> toml <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;toml&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> yaml <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;yaml&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> json5 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;json5&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">index</span><span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">another</span><span class="token operator">:</span> <span class="token string">&#39;./src/another-module.js&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;scripts/[name].js&#39;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;./dist&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token literal-property property">clean</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">assetModuleFilename</span><span class="token operator">:</span> <span class="token string">&#39;images/[contenthash][ext]&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;development&#39;</span><span class="token punctuation">,</span>

	<span class="token literal-property property">devtool</span><span class="token operator">:</span> <span class="token string">&#39;inline-source-map&#39;</span><span class="token punctuation">,</span>

	<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">&#39;./index.html&#39;</span><span class="token punctuation">,</span>
			<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;app.html&#39;</span><span class="token punctuation">,</span>
			<span class="token literal-property property">inject</span><span class="token operator">:</span> <span class="token string">&#39;body&#39;</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

		<span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;styles/[contenthash].css&#39;</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>

	<span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token keyword">static</span><span class="token operator">:</span> <span class="token string">&#39;./dist&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.png$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset/resource&#39;</span><span class="token punctuation">,</span>
				<span class="token literal-property property">generator</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;images/[contenthash][ext]&#39;</span><span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.svg$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset/inline&#39;</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.txt$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset/source&#39;</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.jpg$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset&#39;</span><span class="token punctuation">,</span>
				<span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">dataUrlCondition</span><span class="token operator">:</span> <span class="token punctuation">{</span>
						<span class="token literal-property property">maxSize</span><span class="token operator">:</span> <span class="token number">4</span> <span class="token operator">*</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">,</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(css|less)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> <span class="token string">&#39;css-loader&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;less-loader&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(woff|woff2|eot|ttf|otf)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset/resource&#39;</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(csv|tsv)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token string">&#39;csv-loader&#39;</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.xml$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token string">&#39;xml-loader&#39;</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.toml$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;json&#39;</span><span class="token punctuation">,</span>
				<span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">parse</span><span class="token operator">:</span> toml<span class="token punctuation">.</span>parse<span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.yaml$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;json&#39;</span><span class="token punctuation">,</span>
				<span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">parse</span><span class="token operator">:</span> yaml<span class="token punctuation">.</span>parse<span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.json5$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;json&#39;</span><span class="token punctuation">,</span>
				<span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">parse</span><span class="token operator">:</span> json5<span class="token punctuation">.</span>parse<span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;babel-loader&#39;</span><span class="token punctuation">,</span>
					<span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
						<span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;@babel/preset-env&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
						<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&#39;@babel/plugin-transform-runtime&#39;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">cacheGroups</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">vendor</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\\/]node_modules[\\/]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
					<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;vendors&#39;</span><span class="token punctuation">,</span>
					<span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token string">&#39;all&#39;</span><span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p><code>webpack.config.prod.js</code> é…ç½®å¦‚ä¸‹ï¼š</p><blockquote><p>11-multiple-env/config/webpack.config.prod.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;html-webpack-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;mini-css-extract-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> CssMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;css-minimizer-webpack-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> toml <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;toml&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> yaml <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;yaml&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> json5 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;json5&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">index</span><span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">another</span><span class="token operator">:</span> <span class="token string">&#39;./src/another-module.js&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;scripts/[name].[contenthash].js&#39;</span><span class="token punctuation">,</span>
		<span class="token comment">// æ‰“åŒ…çš„distæ–‡ä»¶å¤¹è¦æ”¾åˆ°ä¸Šä¸€å±‚ç›®å½•</span>
		<span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;../dist&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token literal-property property">clean</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">assetModuleFilename</span><span class="token operator">:</span> <span class="token string">&#39;images/[contenthash][ext]&#39;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token string">&#39;http://localhost:8080/&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;production&#39;</span><span class="token punctuation">,</span>

	<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">&#39;./index.html&#39;</span><span class="token punctuation">,</span>
			<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;app.html&#39;</span><span class="token punctuation">,</span>
			<span class="token literal-property property">inject</span><span class="token operator">:</span> <span class="token string">&#39;body&#39;</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

		<span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;styles/[contenthash].css&#39;</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>

	<span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.png$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset/resource&#39;</span><span class="token punctuation">,</span>
				<span class="token literal-property property">generator</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;images/[contenthash][ext]&#39;</span><span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.svg$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset/inline&#39;</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.txt$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset/source&#39;</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.jpg$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset&#39;</span><span class="token punctuation">,</span>
				<span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">dataUrlCondition</span><span class="token operator">:</span> <span class="token punctuation">{</span>
						<span class="token literal-property property">maxSize</span><span class="token operator">:</span> <span class="token number">4</span> <span class="token operator">*</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">,</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(css|less)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> <span class="token string">&#39;css-loader&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;less-loader&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(woff|woff2|eot|ttf|otf)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset/resource&#39;</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(csv|tsv)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token string">&#39;csv-loader&#39;</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.xml$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token string">&#39;xml-loader&#39;</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.toml$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;json&#39;</span><span class="token punctuation">,</span>
				<span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">parse</span><span class="token operator">:</span> toml<span class="token punctuation">.</span>parse<span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.yaml$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;json&#39;</span><span class="token punctuation">,</span>
				<span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">parse</span><span class="token operator">:</span> yaml<span class="token punctuation">.</span>parse<span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.json5$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;json&#39;</span><span class="token punctuation">,</span>
				<span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">parse</span><span class="token operator">:</span> json5<span class="token punctuation">.</span>parse<span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;babel-loader&#39;</span><span class="token punctuation">,</span>
					<span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
						<span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;@babel/preset-env&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
						<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&#39;@babel/plugin-transform-runtime&#39;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">minimizer</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

		<span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">cacheGroups</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">vendor</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\\/]node_modules[\\/]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
					<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;vendors&#39;</span><span class="token punctuation">,</span>
					<span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token string">&#39;all&#39;</span><span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">//å…³é—­ webpack çš„æ€§èƒ½æç¤º</span>
	<span class="token literal-property property">performance</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">hints</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>æ‹†åˆ†æˆä¸¤ä¸ªé…ç½®æ–‡ä»¶åï¼Œåˆ†åˆ«è¿è¡Œè¿™ä¸¤ä¸ªæ–‡ä»¶ï¼š</p><p>å¼€å‘ç¯å¢ƒï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> <span class="token number">10</span>-multiple-env $ npx webpack serve <span class="token parameter variable">-c</span> ./config/webpack.config.dev.js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç”Ÿäº§ç¯å¢ƒï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> <span class="token number">10</span>-multiple-env $ npx webpack <span class="token parameter variable">-c</span> ./config/webpack.config.prod.js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_1-10-4-npm-è„šæœ¬" tabindex="-1"><a class="header-anchor" href="#_1-10-4-npm-è„šæœ¬" aria-hidden="true">#</a> 1.10.4 npm è„šæœ¬</h3><p>æ¯æ¬¡æ‰“åŒ…æˆ–å¯åŠ¨æœåŠ¡æ—¶ï¼Œéƒ½éœ€è¦åœ¨å‘½ä»¤è¡Œé‡Œè¾“å…¥ä¸€é•¿ä¸²çš„å‘½ä»¤ã€‚æˆ‘ä»¬å°†çˆ¶ç›®å½•çš„ <code>package.json</code>ã€<code>node_modules</code> ä¸ <code>package-lock.json </code>æ‹·è´åˆ°å½“å‰ç›®å½•ä¸‹ï¼Œ</p><img src="http://raink.net:8080/md-images/webpack5/img-1.10.3-1.png" alt="image-20211023161251468" style="zoom:50%;" align="left"><p>é…ç½® npm è„šæœ¬æ¥ç®€åŒ–å‘½ä»¤è¡Œçš„è¾“å…¥ï¼Œè¿™æ—¶å¯ä»¥çœç•¥ <code>npx</code>ï¼š</p><blockquote><p>11-multiple-env/package.json</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack serve -c ./config/webpack.config.dev.js&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack -c ./config/webpack.config.prod.js&quot;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>å¼€å‘ç¯å¢ƒè¿è¡Œè„šæœ¬ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> <span class="token number">10</span>-multiple-env $ <span class="token function">npm</span> run start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> <span class="token number">10</span>-multiple-env $ <span class="token function">npm</span> run build
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_1-10-5-æå–å…¬å…±é…ç½®" tabindex="-1"><a class="header-anchor" href="#_1-10-5-æå–å…¬å…±é…ç½®" aria-hidden="true">#</a> 1.10.5 æå–å…¬å…±é…ç½®</h3><p>è¿™æ—¶ï¼Œæˆ‘ä»¬å‘ç°è¿™ä¸¤ä¸ªé…ç½®æ–‡ä»¶é‡Œå­˜åœ¨å¤§é‡çš„é‡å¤ä»£ç ï¼Œå¯ä»¥æ‰‹åŠ¨çš„å°†è¿™äº›é‡å¤çš„ä»£ç å•ç‹¬æå–åˆ°ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œ</p><p>åˆ›å»º <code>webpack.config.common.js</code>ï¼Œé…ç½®å…¬å…±çš„å†…å®¹ï¼š</p><blockquote><p>11-multiple-env/config/webpack.config.common.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;html-webpack-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;mini-css-extract-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> toml <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;toml&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> yaml <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;yaml&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> json5 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;json5&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">index</span><span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">another</span><span class="token operator">:</span> <span class="token string">&#39;./src/another-module.js&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token comment">// æ³¨æ„è¿™ä¸ªdistçš„è·¯å¾„è®¾ç½®æˆä¸Šä¸€çº§</span>
		<span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;../dist&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token literal-property property">clean</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">assetModuleFilename</span><span class="token operator">:</span> <span class="token string">&#39;images/[contenthash][ext]&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">&#39;./index.html&#39;</span><span class="token punctuation">,</span>
			<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;app.html&#39;</span><span class="token punctuation">,</span>
			<span class="token literal-property property">inject</span><span class="token operator">:</span> <span class="token string">&#39;body&#39;</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

		<span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;styles/[contenthash].css&#39;</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>

	<span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.png$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset/resource&#39;</span><span class="token punctuation">,</span>
				<span class="token literal-property property">generator</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;images/[contenthash][ext]&#39;</span><span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.svg$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset/inline&#39;</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.txt$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset/source&#39;</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.jpg$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset&#39;</span><span class="token punctuation">,</span>
				<span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">dataUrlCondition</span><span class="token operator">:</span> <span class="token punctuation">{</span>
						<span class="token literal-property property">maxSize</span><span class="token operator">:</span> <span class="token number">4</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">,</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(css|less)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> <span class="token string">&#39;css-loader&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;less-loader&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(woff|woff2|eot|ttf|otf)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;asset/resource&#39;</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(csv|tsv)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token string">&#39;csv-loader&#39;</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.xml$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token string">&#39;xml-loader&#39;</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.toml$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;json&#39;</span><span class="token punctuation">,</span>
				<span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">parse</span><span class="token operator">:</span> toml<span class="token punctuation">.</span>parse<span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.yaml$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;json&#39;</span><span class="token punctuation">,</span>
				<span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">parse</span><span class="token operator">:</span> yaml<span class="token punctuation">.</span>parse<span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.json5$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;json&#39;</span><span class="token punctuation">,</span>
				<span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">parse</span><span class="token operator">:</span> json5<span class="token punctuation">.</span>parse<span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;babel-loader&#39;</span><span class="token punctuation">,</span>
					<span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
						<span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;@babel/preset-env&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
						<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&#39;@babel/plugin-transform-runtime&#39;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">cacheGroups</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">vendor</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\\/]node_modules[\\/]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
					<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;vendors&#39;</span><span class="token punctuation">,</span>
					<span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token string">&#39;all&#39;</span><span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">//å…³é—­ webpack çš„æ€§èƒ½æç¤º</span>
	<span class="token literal-property property">performance</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">hints</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>æ”¹å†™ <code>webpack.config.dev.js</code>:</p><blockquote><p>11-multiple-env/config/webpack.config.dev.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">// å¼€å‘ç¯å¢ƒä¸éœ€è¦é…ç½®ç¼“å­˜</span>
	<span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;scripts/[name].js&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// å¼€å‘æ¨¡å¼</span>
	<span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;development&#39;</span><span class="token punctuation">,</span>

	<span class="token comment">// é…ç½® source-map</span>
	<span class="token literal-property property">devtool</span><span class="token operator">:</span> <span class="token string">&#39;inline-source-map&#39;</span><span class="token punctuation">,</span>

	<span class="token comment">// æœ¬åœ°æœåŠ¡é…ç½®</span>
	<span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token keyword">static</span><span class="token operator">:</span> <span class="token string">&#39;./dist&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>ä¿®æ”¹ <code>webpack.config.prod.js</code>:</p><blockquote><p>11-multiple-env/config/webpack.config.prod.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> CssMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;css-minimizer-webpack-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">// ç”Ÿäº§ç¯å¢ƒéœ€è¦ç¼“å­˜</span>
	<span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;scripts/[name].[contenthash].js&#39;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token string">&#39;http://localhost:8080/&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token comment">// ç”Ÿäº§ç¯å¢ƒæ¨¡å¼</span>
	<span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;production&#39;</span><span class="token punctuation">,</span>

	<span class="token comment">// ç”Ÿäº§ç¯å¢ƒ css å‹ç¼©</span>
	<span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">minimizer</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h3 id="_1-10-6-åˆå¹¶é…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_1-10-6-åˆå¹¶é…ç½®æ–‡ä»¶" aria-hidden="true">#</a> 1.10.6 åˆå¹¶é…ç½®æ–‡ä»¶</h3><p>é…ç½®æ–‡ä»¶æ‹†åˆ†å¥½åï¼Œæ–°çš„é—®é¢˜æ¥äº†ï¼Œå¦‚ä½•ä¿è¯é…ç½®åˆå¹¶æ²¡ç”¨é—®é¢˜å‘¢ï¼Ÿ<a href="https://www.npmjs.com/package/webpack-merge" target="_blank" rel="noopener noreferrer">webpack-merge<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> è¿™ä¸ªå·¥å…·å¯ä»¥å®Œç¾è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><img src="http://raink.net:8080/md-images/webpack5/img-1.10.2-1.png" alt="image-20211023142058484" style="zoom:33%;"><p>å®‰è£… <code>webpack-merge</code>:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[felix] felixcourses $ npm install webpack-merge -D
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åˆ›å»º <code>webpack.config.js</code>ï¼Œåˆå¹¶ä»£ç ï¼š</p><blockquote><p>11-multiple-env/config/webpack.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> merge <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack-merge&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> commonConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./webpack.config.common.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> productionConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./webpack.config.prod.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> developmentConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./webpack.config.dev&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">env</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">case</span> env<span class="token punctuation">.</span>development<span class="token operator">:</span>
			<span class="token keyword">return</span> <span class="token function">merge</span><span class="token punctuation">(</span>commonConfig<span class="token punctuation">,</span> developmentConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> env<span class="token punctuation">.</span>production<span class="token operator">:</span>
			<span class="token keyword">return</span> <span class="token function">merge</span><span class="token punctuation">(</span>commonConfig<span class="token punctuation">,</span> productionConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">default</span><span class="token operator">:</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#39;No matching configuration was found!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>-- æœ¬ç¯‡å®Œ --</p><h1 id="äºŒã€é«˜çº§åº”ç”¨ç¯‡" tabindex="-1"><a class="header-anchor" href="#äºŒã€é«˜çº§åº”ç”¨ç¯‡" aria-hidden="true">#</a> äºŒã€é«˜çº§åº”ç”¨ç¯‡</h1><p>ä¸Šè¿°æˆ‘ä»¬åŸºäº webpack æ„å»ºäº†æˆ‘ä»¬çš„åŸºç¡€å·¥ç¨‹åŒ–ç¯å¢ƒï¼Œå°†æˆ‘ä»¬è®¤ä¸ºéœ€è¦çš„åŠŸèƒ½é…ç½®äº†ä¸Šå»ã€‚ é™¤å¼€å…¬å…±åŸºç¡€é…ç½®ä¹‹å¤–ï¼Œæˆ‘ä»¬æ„è¯†åˆ°ä¸¤ç‚¹:</p><ol><li>å¼€å‘ç¯å¢ƒ(mode=development),è¿½æ±‚å¼ºå¤§çš„å¼€å‘åŠŸèƒ½å’Œæ•ˆç‡ï¼Œé…ç½®å„ç§æ–¹ä¾¿å¼€å‘çš„åŠŸèƒ½;</li><li>ç”Ÿäº§ç¯å¢ƒ(mode=production),è¿½æ±‚æ›´å°æ›´è½»é‡çš„ bundle(å³æ‰“åŒ…äº§ç‰©);</li></ol><p>æ¥ä¸‹æ¥åŸºäºæˆ‘ä»¬çš„å¼€å‘éœ€æ±‚ï¼Œå®Œå–„æˆ‘ä»¬çš„å·¥ç¨‹åŒ–é…ç½®çš„åŒæ—¶ï¼Œæ¥ä»‹ç»ä¸€äº›å¸¸ç”¨å¹¶å¼ºå¤§çš„å·¥å…·ã€‚</p><h2 id="_2-1-æé«˜å¼€å‘æ•ˆç‡-å®Œå–„å›¢é˜Ÿå¼€å‘è§„èŒƒ" tabindex="-1"><a class="header-anchor" href="#_2-1-æé«˜å¼€å‘æ•ˆç‡-å®Œå–„å›¢é˜Ÿå¼€å‘è§„èŒƒ" aria-hidden="true">#</a> 2.1 æé«˜å¼€å‘æ•ˆç‡ï¼Œå®Œå–„å›¢é˜Ÿå¼€å‘è§„èŒƒ</h2><h3 id="_2-1-1-source-map" tabindex="-1"><a class="header-anchor" href="#_2-1-1-source-map" aria-hidden="true">#</a> 2.1.1 source-map</h3><p>ä½œä¸ºä¸€ä¸ªå¼€å‘å·¥ç¨‹å¸ˆâ€”â€”æ— è®ºæ˜¯ä»€ä¹ˆå¼€å‘ï¼Œè¦æ±‚å¼€å‘ç¯å¢ƒæœ€ä¸å¯å°‘çš„ä¸€ç‚¹åŠŸèƒ½å°±æ˜¯â€”â€”debug åŠŸèƒ½ã€‚ ä¹‹å‰æˆ‘ä»¬é€šè¿‡ webpack, å°†æˆ‘ä»¬çš„æºç æ‰“åŒ…æˆäº†<code>bundle.js</code>ã€‚ è¯•æƒ³ï¼šå®é™…ä¸Šå®¢æˆ·ç«¯(æµè§ˆå™¨)è¯»å–çš„æ˜¯æ‰“åŒ…åçš„ <code>bundle.js</code>,é‚£ä¹ˆå½“æµè§ˆå™¨æ‰§è¡Œä»£ç æŠ¥é”™çš„æ—¶å€™ï¼ŒæŠ¥é”™çš„ä¿¡æ¯è‡ªç„¶ä¹Ÿæ˜¯ bundle çš„å†…å®¹ã€‚ æˆ‘ä»¬å¦‚ä½•å°†æŠ¥é”™ä¿¡æ¯(bundle é”™è¯¯çš„è¯­å¥åŠå…¶æ‰€åœ¨è¡Œåˆ—)æ˜ å°„åˆ°æºç ä¸Šï¼Ÿ</p><p>æ˜¯çš„ï¼Œsouce-mapã€‚</p><p>webpack å·²ç»å†…ç½®äº† sourcemap çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬åªéœ€è¦é€šè¿‡ç®€å•çš„é…ç½®ï¼Œå°†å¯ä»¥å¼€å¯å®ƒã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">// å¼€å¯ source map</span>
	<span class="token comment">// å¼€å‘ä¸­æ¨èä½¿ç”¨ &#39;source-map&#39;</span>
	<span class="token comment">// ç”Ÿäº§ç¯å¢ƒä¸€èˆ¬ä¸å¼€å¯ sourcemap</span>
	<span class="token literal-property property">devtool</span><span class="token operator">:</span> <span class="token string">&#39;source-map&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“æˆ‘ä»¬æ‰§è¡Œæ‰“åŒ…å‘½ä»¤ä¹‹åï¼Œæˆ‘ä»¬å‘ç° bundle çš„æœ€åä¸€è¡Œæ€»æ˜¯ä¼šå¤šå‡ºä¸€ä¸ªæ³¨é‡Šï¼ŒæŒ‡å‘æ‰“åŒ…å‡ºçš„ bundle.map.js(sourcemap æ–‡ä»¶)ã€‚ sourcemap æ–‡ä»¶ç”¨æ¥æè¿° æºç æ–‡ä»¶å’Œ bundle æ–‡ä»¶çš„ä»£ç ä½ç½®æ˜ å°„å…³ç³»ã€‚åŸºäºå®ƒï¼Œæˆ‘ä»¬å°† bundle æ–‡ä»¶çš„é”™è¯¯ä¿¡æ¯æ˜ å°„åˆ°æºç æ–‡ä»¶ä¸Šã€‚</p><p>é™¤å¼€&#39;source-map&#39;å¤–ï¼Œè¿˜å¯ä»¥åŸºäºæˆ‘ä»¬çš„éœ€æ±‚è®¾ç½®å…¶ä»–å€¼ï¼Œwebpackâ€”â€”devtool ä¸€å…±æä¾›äº† 7 ç§ SourceMap æ¨¡å¼ï¼š</p><table><thead><tr><th>æ¨¡å¼</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>eval</td><td>æ¯ä¸ª module ä¼šå°è£…åˆ° eval é‡ŒåŒ…è£¹èµ·æ¥æ‰§è¡Œï¼Œå¹¶ä¸”ä¼šåœ¨æœ«å°¾è¿½åŠ æ³¨é‡Š //@ sourceURL.</td></tr><tr><td>source-map</td><td>ç”Ÿæˆä¸€ä¸ª SourceMap æ–‡ä»¶.</td></tr><tr><td>hidden-source-map</td><td>å’Œ source-map ä¸€æ ·ï¼Œä½†ä¸ä¼šåœ¨ bundle æœ«å°¾è¿½åŠ æ³¨é‡Š.</td></tr><tr><td>inline-source-map</td><td>ç”Ÿæˆä¸€ä¸ª DataUrl å½¢å¼çš„ SourceMap æ–‡ä»¶.</td></tr><tr><td>eval-source-map</td><td>æ¯ä¸ª module ä¼šé€šè¿‡ eval()æ¥æ‰§è¡Œï¼Œå¹¶ä¸”ç”Ÿæˆä¸€ä¸ª DataUrl å½¢å¼çš„ SourceMap.</td></tr><tr><td>cheap-source-map</td><td>ç”Ÿæˆä¸€ä¸ªæ²¡æœ‰åˆ—ä¿¡æ¯ï¼ˆcolumn-mappingsï¼‰çš„ SourceMaps æ–‡ä»¶ï¼Œä¸åŒ…å« loader çš„ sourcemapï¼ˆè­¬å¦‚ babel çš„ sourcemapï¼‰</td></tr><tr><td>cheap-module-source-map</td><td>ç”Ÿæˆä¸€ä¸ªæ²¡æœ‰åˆ—ä¿¡æ¯ï¼ˆcolumn-mappingsï¼‰çš„ SourceMaps æ–‡ä»¶ï¼ŒåŒæ—¶ loader çš„ sourcemap ä¹Ÿè¢«ç®€åŒ–ä¸ºåªåŒ…å«å¯¹åº”è¡Œçš„ã€‚</td></tr></tbody></table><p>è¦æ³¨æ„çš„æ˜¯ï¼Œç”Ÿäº§ç¯å¢ƒæˆ‘ä»¬ä¸€èˆ¬ä¸ä¼šå¼€å¯ sourcemap åŠŸèƒ½ï¼Œä¸»è¦æœ‰ä¸¤ç‚¹åŸå› :</p><ol><li>é€šè¿‡ bundle å’Œ sourcemap æ–‡ä»¶ï¼Œå¯ä»¥åç¼–è¯‘å‡ºæºç â€”â€”â€”â€”ä¹Ÿå°±æ˜¯è¯´ï¼Œçº¿ä¸Šäº§ç‰©æœ‰ soucemap æ–‡ä»¶çš„è¯ï¼Œå°±æ„å‘³ç€æœ‰æš´æ¼æºç çš„é£é™©ã€‚</li><li>æˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°ï¼Œsourcemap æ–‡ä»¶çš„ä½“ç§¯ç›¸å¯¹æ¯”è¾ƒå·¨å¤§,è¿™è·Ÿæˆ‘ä»¬ç”Ÿäº§ç¯å¢ƒçš„è¿½æ±‚ä¸åŒ(ç”Ÿäº§ç¯å¢ƒè¿½æ±‚æ›´å°æ›´è½»é‡çš„ bundle)ã€‚</li></ol><blockquote><p>ä¸€é“æ€è€ƒé¢˜: æœ‰æ—¶å€™æˆ‘ä»¬æœŸæœ›èƒ½ç¬¬ä¸€æ—¶é—´é€šè¿‡çº¿ä¸Šçš„é”™è¯¯ä¿¡æ¯ï¼Œæ¥è¿½è¸ªåˆ°æºç ä½ç½®ï¼Œä»è€Œå¿«é€Ÿè§£å†³æ‰ bug ä»¥å‡è½»æŸå¤±ã€‚ä½†åˆä¸å¸Œæœ› sourcemap æ–‡ä»¶æŠ¥æ¼åœ¨ç”Ÿäº§ç¯å¢ƒï¼Œæœ‰æ¯”è¾ƒå¥½çš„æ–¹æ¡ˆå—ï¼Ÿ</p></blockquote><h3 id="_2-1-2-devserver" tabindex="-1"><a class="header-anchor" href="#_2-1-2-devserver" aria-hidden="true">#</a> 2.1.2 devServer</h3><p>å¼€å‘ç¯å¢ƒä¸‹ï¼Œæˆ‘ä»¬å¾€å¾€éœ€è¦å¯åŠ¨ä¸€ä¸ª web æœåŠ¡ï¼Œæ–¹ä¾¿æˆ‘ä»¬æ¨¡æ‹Ÿä¸€ä¸ªç”¨æˆ·ä»æµè§ˆå™¨ä¸­è®¿é—®æˆ‘ä»¬çš„ web æœåŠ¡ï¼Œè¯»å–æˆ‘ä»¬çš„æ‰“åŒ…äº§ç‰©ï¼Œä»¥è§‚æµ‹æˆ‘ä»¬çš„ä»£ç åœ¨å®¢æˆ·ç«¯çš„è¡¨ç°ã€‚ webpack å†…ç½®äº†è¿™æ ·çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬åªéœ€è¦ç®€å•çš„é…ç½®å°±å¯ä»¥å¼€å¯å®ƒã€‚</p><p>åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…å®ƒ</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>yarn add -D webpack-dev-server
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>devServer.proxy åŸºäºå¼ºå¤§çš„ä¸­é—´ä»¶ <code>http-proxy-middleware</code> å®ç°çš„ï¼Œå› æ­¤å®ƒæ”¯æŒå¾ˆå¤šçš„é…ç½®é¡¹ï¼Œæˆ‘ä»¬åŸºäºæ­¤ï¼Œå¯ä»¥åšåº”å¯¹ç»å¤§å¤šæ•°å¼€å‘åœºæ™¯çš„å®šåˆ¶åŒ–é…ç½®ã€‚</p><p>åŸºç¡€ä½¿ç”¨ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>const path = require(&#39;path&#39;);
module.exports = {
  //...
  devServer: {
    // static: {
    //   directory: path.join(__dirname, &#39;dist&#39;),
    // }, // é»˜è®¤æ˜¯æŠŠ/distç›®å½•å½“ä½œwebæœåŠ¡çš„æ ¹ç›®å½•
    compress: true, //å¯é€‰æ‹©å¼€å¯gzipså‹ç¼©åŠŸèƒ½ï¼Œå¯¹åº”é™æ€èµ„æºè¯·æ±‚çš„å“åº”å¤´é‡Œçš„Content-Encoding: gzip
    port: 3000, // ç«¯å£å·
  },
};
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬é…ç½®ä¸€ä¸‹å·¥ç¨‹çš„è„šæœ¬å‘½ä»¤ï¼Œåœ¨ package.json çš„ scripts é‡Œã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>{
  //...
  &quot;scripts&quot;: {
    //...
    &quot;dev&quot;: &quot;webpack serve --mode development&quot;

  }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼å¦‚æœæ‚¨éœ€è¦æŒ‡å®šé…ç½®æ–‡ä»¶çš„è·¯å¾„ï¼Œè¯·åœ¨å‘½ä»¤çš„åé¢æ·»åŠ  --config [path], æ¯”å¦‚:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>webpack serve --mode development --config webpack.config.js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™æ—¶ï¼Œå½“æˆ‘ä»¬ yarn dev(æˆ–è€… npm run dev)æ—¶ï¼Œå°±å¯ä»¥åœ¨æ—¥å¿—é‡Œçœ‹åˆ°â€”â€”â€”â€”å®ƒå¯åŠ¨äº†ä¸€ä¸ª http æœåŠ¡ã€‚ (webpack-dev-server çš„æœ€åº•å±‚å®ç°æ˜¯æºè‡ªäº node çš„ http æ¨¡å—ã€‚)</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>&gt; webpack serve --mode development

&lt;i&gt; [webpack-dev-server] Project is running at:
&lt;i&gt; [webpack-dev-server] Loopback: http://localhost:3000/
&lt;i&gt; [webpack-dev-server] On Your Network (IPv4): http://192.168.0.107:3000/
&lt;i&gt; [webpack-dev-server] On Your Network (IPv6): http://[fe80::1]:3000/
&lt;i&gt; [webpack-dev-server] Content not from webpack is served from &#39;/Users/wxy/codeWorks/githubPros/demos/webpack5demo/public&#39; directory
asset bundle.js 289 KiB [emitted] (name: main) 1 related asset
asset index.html 161 bytes [emitted]
runtime modules 27.2 KiB 13 modules
modules by path ./node_modules/ 207 KiB 36 modules
modules by path ./src/ 6.06 KiB
  modules by path ./src/*.css 2.92 KiB
    ./src/styles.css 2.25 KiB [built] [code generated]
    ./node_modules/css-loader/dist/cjs.js!./src/styles.css 684 bytes [built] [code generated]
  modules by path ./src/*.less 3.07 KiB
    ./src/styles.less 2.37 KiB [built] [code generated]
    ./node_modules/css-loader/dist/cjs.js!./node_modules/less-loader/dist/cjs.js!./src/styles.less 717 bytes [built] [code generated]
  ./src/index.js 75 bytes [built] [code generated]
webpack 5.60.0 compiled successfully in 1004 ms
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šè¿°æ˜¯ä¸€ä¸ªåŸºæœ¬çš„ç¤ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚å®šåˆ¶åŒ– devServer çš„å‚æ•°å¯¹è±¡ï¼Œæ¯”å¦‚æ·»åŠ å“åº”å¤´ï¼Œå¼€å¯ä»£ç†æ¥è§£å†³è·¨åŸŸé—®é¢˜, http2, https ç­‰åŠŸèƒ½ã€‚</p><ul><li><p><strong>æ·»åŠ å“åº”å¤´</strong></p><p>æœ‰äº›åœºæ™¯éœ€æ±‚ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºæ‰€æœ‰å“åº”æ·»åŠ  headers,æ¥å¯¹èµ„æºçš„è¯·æ±‚å’Œå“åº”æ‰“å…¥æ ‡å¿—ï¼Œä»¥ä¾¿åšä¸€äº›å®‰å…¨é˜²èŒƒï¼Œæˆ–è€…æ–¹ä¾¿å‘ç”Ÿå¼‚å¸¸ååšè¯·æ±‚çš„é“¾è·¯è¿½è¸ªã€‚æ¯”å¦‚:</p></li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>// webpack-config
module.exports = {
  //...
  devServer: {
    headers: {
      &#39;X-Fast-Id&#39;: &#39;p3fdg42njghm34gi9ukj&#39;,
    },
  },
};
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ—¶ï¼Œåœ¨æµè§ˆå™¨ä¸­å³é”®æ£€æŸ¥(æˆ–è€…ä½¿ç”¨ f12 å¿«æ·é”®)ï¼Œåœ¨ Network ä¸€æ æŸ¥çœ‹ä»»æ„èµ„æºè®¿é—®ï¼Œæˆ‘ä»¬å‘ç°å“åº”å¤´é‡ŒæˆåŠŸæ‰“å…¥äº†ä¸€ä¸ª FastIdã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>Response Headers
  /** some others**/
  X-Fast-Id: p3fdg42njghm34gi9ukj
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>headers çš„é…ç½®ä¹Ÿå¯ä»¥ä¼ ä¸€ä¸ªå‡½æ•°ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>module.exports = {
  //...
  devServer: {
    headers: () =&gt; {
      return { &#39;X-Bar&#39;: [&#39;key1=value1&#39;, &#39;key2=value2&#39;] };
    },
  },
};
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¯”å¦‚æˆ‘ä»¬çš„æ ‡å¿— ID(X-Fast-Id)ï¼Œå¾ˆæ˜æ˜¾è¿™ä¸ª id ä¸åº”è¯¥å†™æ­»ï¼Œè€Œæ˜¯éšæœºç”Ÿæˆçš„â€”â€”â€”â€”è¿™æ—¶å€™ä½ å°±å¯ä»¥ç”¨å‡½æ•°å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚</p><ul><li><p><strong>å¼€å¯ä»£ç†</strong></p><p>æˆ‘ä»¬æ‰“åŒ…å‡ºçš„<code>js bundle</code>é‡Œæœ‰æ—¶ä¼šå«æœ‰ä¸€äº›å¯¹ç‰¹å®šæ¥å£çš„ç½‘ç»œè¯·æ±‚(ajax/fetch). è¦æ³¨æ„ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯åœ°å€æ˜¯åœ¨ <a href="http://localhost:3000/" target="_blank" rel="noopener noreferrer">http://localhost:3000/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ä¸‹ï¼Œå‡è®¾æˆ‘ä»¬çš„æ¥å£æ¥è‡ª <a href="http://localhost:4001/" target="_blank" rel="noopener noreferrer">http://localhost:4001/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ï¼Œé‚£ä¹ˆæ¯«æ— ç–‘é—®ï¼Œæ­¤æ—¶æ§åˆ¶å°é‡Œä¼šæŠ¥é”™å¹¶æç¤ºä½ è·¨åŸŸã€‚ å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿ åœ¨å¼€å‘ç¯å¢ƒä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ devServer è‡ªå¸¦çš„ proxy åŠŸèƒ½ï¼š</p></li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>module.exports = {
  //...
  devServer: {
    proxy: {
      &#39;/api&#39;: &#39;http://localhost:4001&#39;,
    },
  },
};
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨ï¼Œå¯¹ /api/users çš„è¯·æ±‚ä¼šå°†è¯·æ±‚ä»£ç†åˆ° <a href="http://localhost:4001/api/users" target="_blank" rel="noopener noreferrer">http://localhost:4001/api/users<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ã€‚ å¦‚æœä¸å¸Œæœ›ä¼ é€’/apiï¼Œåˆ™éœ€è¦é‡å†™è·¯å¾„ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>module.exports = {
  //...
  devServer: {
    proxy: {
      &#39;/api&#39;: {
        target: &#39;http://localhost:4001&#39;,
        pathRewrite: { &#39;^/api&#39;: &#39;&#39; },
      },
    },
  },
};
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå°†ä¸æ¥å—åœ¨ HTTPS ä¸Šè¿è¡Œä¸”è¯ä¹¦æ— æ•ˆçš„åç«¯æœåŠ¡å™¨ã€‚ å¦‚æœéœ€è¦ï¼Œå¯ä»¥è¿™æ ·ä¿®æ”¹é…ç½®ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>module.exports = {
  //...
  devServer: {
    proxy: {
      &#39;/api&#39;: {
        target: &#39;https://other-server.example.com&#39;,
        secure: false,
      },
    },
  },
};
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><strong>https</strong></p><p>å¦‚æœæƒ³è®©æˆ‘ä»¬çš„æœ¬åœ° http æœåŠ¡å˜æˆ https æœåŠ¡ï¼Œæˆ‘ä»¬åªéœ€è¦è¿™æ ·é…ç½®:</p></li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>module.exports = {
  //...
  devServer: {
    https: true,  // https//localhost...
  },
};
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼Œæ­¤æ—¶æˆ‘ä»¬è®¿é—®<a href="http://localhost:port/" target="_blank" rel="noopener noreferrer">http://localhost:port<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> æ˜¯æ— æ³•è®¿é—®æˆ‘ä»¬çš„æœåŠ¡çš„ï¼Œæˆ‘ä»¬éœ€è¦åœ¨åœ°å€æ é‡ŒåŠ å‰ç¼€ï¼šhttps: æ³¨æ„:ç”±äºé»˜è®¤é…ç½®ä½¿ç”¨çš„æ˜¯è‡ªç­¾åè¯ä¹¦ï¼Œæ‰€ä»¥æœ‰å¾—æµè§ˆå™¨ä¼šå‘Šè¯‰ä½ æ˜¯ä¸å®‰å…¨çš„ï¼Œä½†æˆ‘ä»¬ä¾ç„¶å¯ä»¥ç»§ç»­è®¿é—®å®ƒã€‚ å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥æä¾›è‡ªå·±çš„è¯ä¹¦â€”â€”å¦‚æœæœ‰çš„è¯ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>module.exports = {
  devServer: {
    https: {
      cacert: &#39;./server.pem&#39;,
      pfx: &#39;./server.pfx&#39;,
      key: &#39;./server.key&#39;,
      cert: &#39;./server.crt&#39;,
      passphrase: &#39;webpack-dev-server&#39;,
      requestCert: true,
    },
  },
};
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><strong>http2</strong></p><p>å¦‚æœæƒ³è¦é…ç½® http2ï¼Œé‚£ä¹ˆç›´æ¥è®¾ç½®ï¼š</p></li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code> devServer: {
    http2: true,  // https//localhost...
  },
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å³å¯ï¼Œhttp2 é»˜è®¤è‡ªå¸¦ https è‡ªç­¾åè¯ä¹¦ï¼Œå½“ç„¶æˆ‘ä»¬ä»ç„¶å¯ä»¥é€šè¿‡ https é…ç½®é¡¹æ¥ä½¿ç”¨è‡ªå·±çš„è¯ä¹¦ã€‚</p><ul><li><p><strong>historyApiFallback</strong></p><p>å¦‚æœæˆ‘ä»¬çš„åº”ç”¨æ˜¯ä¸ª SPA(å•é¡µé¢åº”ç”¨)ï¼Œå½“è·¯ç”±åˆ°/some æ—¶(å¯ä»¥ç›´æ¥åœ¨åœ°å€æ é‡Œè¾“å…¥)ï¼Œä¼šå‘ç°æ­¤æ—¶åˆ·æ–°é¡µé¢åï¼Œæ§åˆ¶å°ä¼šæŠ¥é”™ã€‚</p></li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>GET http://localhost:3000/some 404 (Not Found)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ­¤æ—¶æ‰“å¼€ networkï¼Œåˆ·æ–°å¹¶æŸ¥çœ‹ï¼Œå°±ä¼šå‘ç°é—®é¢˜æ‰€åœ¨â€”â€”â€”æµè§ˆå™¨æŠŠè¿™ä¸ªè·¯ç”±å½“ä½œäº†é™æ€èµ„æºåœ°å€å»è¯·æ±‚ï¼Œç„¶è€Œæˆ‘ä»¬å¹¶æ²¡æœ‰æ‰“åŒ…å‡º/some è¿™æ ·çš„èµ„æºï¼Œæ‰€ä»¥è¿™ä¸ªè®¿é—®æ— ç–‘æ˜¯ 404 çš„ã€‚ å¦‚ä½•è§£å†³å®ƒï¼Ÿ è¿™ç§æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡é…ç½®æ¥æä¾›é¡µé¢ä»£æ›¿ä»»ä½• 404 çš„é™æ€èµ„æºå“åº”ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>module.exports = {
  //...
  devServer: {
    historyApiFallback: true,
  },
};
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ­¤æ—¶é‡å¯æœåŠ¡åˆ·æ–°åå‘ç°è¯·æ±‚å˜æˆäº† index.htmlã€‚ å½“ç„¶ï¼Œåœ¨å¤šæ•°ä¸šåŠ¡åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®ä¸åŒçš„è®¿é—®è·¯å¾„å®šåˆ¶æ›¿ä»£çš„é¡µé¢ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ rewrites è¿™ä¸ªé…ç½®é¡¹ã€‚ ç±»ä¼¼è¿™æ ·ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>module.exports = {
  //...
  devServer: {
    historyApiFallback: {
      rewrites: [
        { from: /^\/$/, to: &#39;/views/landing.html&#39; },
        { from: /^\/subpage/, to: &#39;/views/subpage.html&#39; },
        { from: /./, to: &#39;/views/404.html&#39; },
      ],
    },
  },
};
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><strong>å¼€å‘æœåŠ¡å™¨ä¸»æœº</strong></p><p>å¦‚æœä½ åœ¨å¼€å‘ç¯å¢ƒä¸­èµ·äº†ä¸€ä¸ª devserve æœåŠ¡ï¼Œå¹¶æœŸæœ›ä½ çš„åŒäº‹èƒ½è®¿é—®åˆ°å®ƒï¼Œä½ åªéœ€è¦é…ç½®ï¼š</p></li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>module.exports = {
  //...
  devServer: {
    host: &#39;0.0.0.0&#39;,
  },
};
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ—¶å€™ï¼Œå¦‚æœä½ çš„åŒäº‹è·Ÿä½ å¤„åœ¨åŒä¸€å±€åŸŸç½‘ä¸‹ï¼Œå°±å¯ä»¥é€šè¿‡å±€åŸŸç½‘ ip æ¥è®¿é—®ä½ çš„æœåŠ¡å•¦ã€‚</p><h3 id="_2-1-3-æ¨¡å—çƒ­æ›¿æ¢ä¸çƒ­åŠ è½½" tabindex="-1"><a class="header-anchor" href="#_2-1-3-æ¨¡å—çƒ­æ›¿æ¢ä¸çƒ­åŠ è½½" aria-hidden="true">#</a> 2.1.3 æ¨¡å—çƒ­æ›¿æ¢ä¸çƒ­åŠ è½½</h3><ul><li>æ¨¡å—çƒ­æ›¿æ¢</li></ul><blockquote><p>æ¨¡å—çƒ­æ›¿æ¢(HMR - hot module replacement)åŠŸèƒ½ä¼šåœ¨åº”ç”¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œæ›¿æ¢ã€æ·»åŠ æˆ–åˆ é™¤ <a href="https://webpack.docschina.org/concepts/modules/" target="_blank" rel="noopener noreferrer">æ¨¡å—<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼Œè€Œæ— éœ€é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢ã€‚</p></blockquote><p>å¯ç”¨ webpack çš„ çƒ­æ¨¡å—æ›¿æ¢ ç‰¹æ€§ï¼Œéœ€è¦é…ç½® devServer.hot å‚æ•°ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>module.exports = {
  //...
  devServer: {
    hot: true,
  },
};
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ­¤æ—¶æˆ‘ä»¬å®ç°äº†åŸºæœ¬çš„æ¨¡å—çƒ­æ›¿æ¢åŠŸèƒ½ã€‚</p><ul><li>HMR åŠ è½½æ ·å¼ å¦‚æœä½ é…ç½®äº† style-loaderï¼Œé‚£ä¹ˆç°åœ¨å·²ç»åŒæ ·æ”¯æŒæ ·å¼æ–‡ä»¶çš„çƒ­æ›¿æ¢åŠŸèƒ½äº†ã€‚</li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>module.exports={
  module: {
    rules: [
      {
        test: /\.css$/,
        use: [&#39;style-loader&#39;, &#39;css-loader&#39;],
      },
    ],
  },
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ˜¯å› ä¸º style-loader çš„å®ç°ä½¿ç”¨äº† module.hot.acceptï¼Œåœ¨ CSS ä¾èµ–æ¨¡å—æ›´æ–°ä¹‹åï¼Œä¼šå¯¹ style æ ‡ç­¾æ‰“è¡¥ä¸ã€‚ä»è€Œå®ç°äº†è¿™ä¸ªåŠŸèƒ½ã€‚</p><ul><li>çƒ­åŠ è½½(æ–‡ä»¶æ›´æ–°æ—¶ï¼Œè‡ªåŠ¨åˆ·æ–°æˆ‘ä»¬çš„æœåŠ¡å’Œé¡µé¢) æ–°ç‰ˆçš„ webpack-dev-server é»˜è®¤å·²ç»å¼€å¯äº†çƒ­åŠ è½½çš„åŠŸèƒ½ã€‚ å®ƒå¯¹åº”çš„å‚æ•°æ˜¯ devServer.liveReloadï¼Œé»˜è®¤ä¸º trueã€‚ æ³¨æ„ï¼Œå¦‚æœæƒ³è¦å…³æ‰å®ƒï¼Œè¦å°† liveReload è®¾ç½®ä¸º false çš„åŒæ—¶ï¼Œä¹Ÿè¦å…³æ‰ hot</li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>module.exports = {
  //...
  devServer: {
    liveReload: false, //é»˜è®¤ä¸ºtrueï¼Œå³å¼€å¯çƒ­æ›´æ–°åŠŸèƒ½ã€‚
  },
};
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-1-4-eslint" tabindex="-1"><a class="header-anchor" href="#_2-1-4-eslint" aria-hidden="true">#</a> 2.1.4 eslint</h3><p>eslint æ˜¯ç”¨æ¥æ‰«ææˆ‘ä»¬æ‰€å†™çš„ä»£ç æ˜¯å¦ç¬¦åˆè§„èŒƒçš„å·¥å…·ã€‚ å¾€å¾€æˆ‘ä»¬çš„é¡¹ç›®æ˜¯å¤šäººåä½œå¼€å‘çš„ï¼Œæˆ‘ä»¬æœŸæœ›ç»Ÿä¸€çš„ä»£ç è§„èŒƒï¼Œè¿™æ—¶å€™å¯ä»¥è®© eslint æ¥å¯¹æˆ‘ä»¬è¿›è¡Œçº¦æŸã€‚ ä¸¥æ ¼æ„ä¹‰ä¸Šæ¥è¯´ï¼Œeslint é…ç½®è·Ÿ webpack æ— å…³ï¼Œä½†åœ¨å·¥ç¨‹åŒ–å¼€å‘ç¯å¢ƒä¸­ï¼Œå®ƒå¾€å¾€æ˜¯ä¸å¯æˆ–ç¼ºçš„ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> eslint <span class="token parameter variable">-D</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>é…ç½® eslintï¼Œåªéœ€è¦åœ¨æ ¹ç›®å½•ä¸‹æ·»åŠ ä¸€ä¸ª.eslintrc æ–‡ä»¶(æˆ–è€….eslintrc.json, .js ç­‰)ã€‚ å½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ eslint å·¥å…·æ¥è‡ªåŠ¨ç”Ÿæˆå®ƒï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>npx eslint <span class="token parameter variable">--init</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ§åˆ¶å°é‡Œçš„å±•ç¤ºï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>wxy@melodyWxydeMacBook-Pro webpack5demo % npx eslint <span class="token parameter variable">--init</span>
âœ” How would you like to use ESLint? Â· syntax
âœ” What <span class="token builtin class-name">type</span> of modules does your project use? Â· esm
âœ” Which framework does your project use? Â· react
âœ” Does your project use TypeScript? Â· No / Yes
âœ” Where does your code run? Â· browser
âœ” What <span class="token function">format</span> <span class="token keyword">do</span> you want your config <span class="token function">file</span> to be in? Â· JSON
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¹¶ç”Ÿæˆäº†ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼ˆ.eslintrc.json)ï¼Œè¿™æ ·æˆ‘ä»¬å°±å®Œæˆäº† eslint çš„åŸºæœ¬è§„åˆ™é…ç½®ã€‚ eslint é…ç½®æ–‡ä»¶é‡Œçš„é…ç½®é¡¹å«ä¹‰å¦‚ä¸‹ï¼š</p><ol><li>env æŒ‡å®šè„šæœ¬çš„è¿è¡Œç¯å¢ƒã€‚æ¯ç§ç¯å¢ƒéƒ½æœ‰ä¸€ç»„ç‰¹å®šçš„é¢„å®šä¹‰å…¨å±€å˜é‡ã€‚æ­¤å¤„ä½¿ç”¨çš„ browser é¢„å®šä¹‰äº†æµè§ˆå™¨ç¯å¢ƒä¸­çš„å…¨å±€å˜é‡ï¼Œes6 å¯ç”¨é™¤äº† modules ä»¥å¤–çš„æ‰€æœ‰ ECMAScript 6 ç‰¹æ€§ï¼ˆè¯¥é€‰é¡¹ä¼šè‡ªåŠ¨è®¾ç½® ecmaVersion è§£æå™¨é€‰é¡¹ä¸º 6ï¼‰ã€‚</li><li>globals è„šæœ¬åœ¨æ‰§è¡ŒæœŸé—´è®¿é—®çš„é¢å¤–çš„å…¨å±€å˜é‡ã€‚ä¹Ÿå°±æ˜¯ env ä¸­æœªé¢„å®šä¹‰ï¼Œä½†æˆ‘ä»¬åˆéœ€è¦ä½¿ç”¨çš„å…¨å±€å˜é‡ã€‚</li><li>extends æ£€æµ‹ä¸­ä½¿ç”¨çš„é¢„å®šä¹‰çš„è§„åˆ™é›†åˆã€‚</li><li>rules å¯ç”¨çš„è§„åˆ™åŠå…¶å„è‡ªçš„é”™è¯¯çº§åˆ«ï¼Œä¼šåˆå¹¶ extends ä¸­çš„åŒåè§„åˆ™ï¼Œå®šä¹‰å†²çªæ—¶ä¼˜å…ˆçº§æ›´é«˜ã€‚</li><li>parserOptions ESLint å…è®¸ä½ æŒ‡å®šä½ æƒ³è¦æ”¯æŒçš„ JavaScript è¯­è¨€é€‰é¡¹ã€‚ecmaFeatures æ˜¯ä¸ªå¯¹è±¡ï¼Œè¡¨ç¤ºä½ æƒ³ä½¿ç”¨çš„é¢å¤–çš„è¯­è¨€ç‰¹æ€§ï¼Œè¿™é‡Œ jsx ä»£è¡¨å¯ç”¨ JSXã€‚ecmaVersion ç”¨æ¥æŒ‡å®šæ”¯æŒçš„ ECMAScript ç‰ˆæœ¬ ã€‚é»˜è®¤ä¸º 5ï¼Œå³ä»…æ”¯æŒ es5ï¼Œä½ å¯ä»¥ä½¿ç”¨ 6ã€7ã€8ã€9 æˆ– 10 æ¥æŒ‡å®šä½ æƒ³è¦ä½¿ç”¨çš„ ECMAScript ç‰ˆæœ¬ã€‚ä½ ä¹Ÿå¯ä»¥ç”¨ä½¿ç”¨å¹´ä»½å‘½åçš„ç‰ˆæœ¬å·æŒ‡å®šä¸º 2015ï¼ˆåŒ 6ï¼‰ï¼Œ2016ï¼ˆåŒ 7ï¼‰ï¼Œæˆ– 2017ï¼ˆåŒ 8ï¼‰æˆ– 2018ï¼ˆåŒ 9ï¼‰æˆ– 2019 (same as 10)ã€‚ä¸Šé¢çš„ env ä¸­å¯ç”¨äº† es6ï¼Œè‡ªåŠ¨è®¾ç½®äº† ecmaVersion è§£æå™¨é€‰é¡¹ä¸º 6ã€‚ plugins plugins æ˜¯ä¸€ä¸ª npm åŒ…ï¼Œé€šå¸¸è¾“å‡º eslint å†…éƒ¨æœªå®šä¹‰çš„è§„åˆ™å®ç°ã€‚rules å’Œ extends ä¸­å®šä¹‰çš„è§„åˆ™ï¼Œå¹¶ä¸éƒ½åœ¨ eslint å†…éƒ¨ä¸­æœ‰å®ç°ã€‚æ¯”å¦‚ extends ä¸­çš„ plugin:react/recommendedï¼Œå…¶ä¸­å®šä¹‰äº†è§„åˆ™å¼€å…³å’Œç­‰çº§ï¼Œä½†æ˜¯è¿™äº›è§„åˆ™å¦‚ä½•ç”Ÿæ•ˆçš„é€»è¾‘æ˜¯åœ¨å…¶å¯¹åº”çš„æ’ä»¶ â€˜reactâ€™ ä¸­å®ç°çš„ã€‚</li></ol><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨è¿™ä¸ªé…ç½®æ–‡ä»¶é‡Œé¢å¤–æ·»åŠ ä¸€ä¸ªè§„åˆ™ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token comment">// ...others</span>
  <span class="token string-property property">&quot;rules&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;no-console&quot;</span><span class="token operator">:</span> <span class="token string">&quot;warn&quot;</span> <span class="token comment">// æˆ‘ä»¬åœ¨rulesé‡Œè‡ªå®šä¹‰æˆ‘ä»¬çš„çº¦æŸè§„èŒƒ</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬é€šè¿‡å‘½ä»¤æ¥è®© elisnt æ£€æµ‹ä»£ç â€”â€”åœ¨æˆ‘ä»¬çš„ package.scripts é‡Œæ·»åŠ ä¸€ä¸ªè„šæœ¬å‘½ä»¤:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
  <span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...others</span>
    <span class="token string-property property">&quot;eslint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eslint ./src&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åæ‰§è¡Œå®ƒ:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>xxx@MacBook-Pro webpack5demo % <span class="token function">npm</span> run eslint
<span class="token operator">&gt;</span> eslint src

/Users/wxy/codeWorks/githubPros/demos/webpack5demo/src/index.js
  <span class="token number">3</span>:1  warning  Unexpected console statement  no-console
  <span class="token number">4</span>:1  warning  Unexpected console statement  no-console

âœ– <span class="token number">2</span> problems <span class="token punctuation">(</span><span class="token number">0</span> errors, <span class="token number">2</span> warnings<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœç„¶ï¼Œå› ä¸ºä»£ç ä¸­å«æœ‰ console.log,æ‰€ä»¥è¢«è­¦å‘Šäº†ã€‚</p><ul><li><strong>ç»“åˆ webpack ä½¿ç”¨</strong></li></ul><p>æˆ‘ä»¬æœŸæœ› eslint èƒ½å¤Ÿå®æ—¶æç¤ºæŠ¥é”™è€Œä¸å¿…ç­‰å¾…æ‰§è¡Œå‘½ä»¤ã€‚ è¿™ä¸ªåŠŸèƒ½å¯ä»¥é€šè¿‡ç»™è‡ªå·±çš„ IDE(ä»£ç ç¼–è¾‘å™¨)å®‰è£…å¯¹åº”çš„ eslint æ’ä»¶æ¥å®ç°ã€‚ ç„¶è€Œï¼Œä¸æ˜¯æ¯ä¸ª IDE éƒ½æœ‰æ’ä»¶ï¼Œå¦‚æœä¸æƒ³ä½¿ç”¨æ’ä»¶ï¼Œåˆæƒ³å®æ—¶æç¤ºæŠ¥é”™ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç»“åˆ webpack çš„æ‰“åŒ…ç¼–è¯‘åŠŸèƒ½æ¥å®ç°ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>  <span class="token comment">//...</span>
  <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(js|jsx)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node-modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;babel-loader&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;eslint-loader&#39;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token comment">// ...</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å› ä¸ºæˆ‘ä»¬ä½¿ç”¨äº† devServerï¼Œå› æ­¤éœ€è¦åœ¨ devServer ä¸‹æ·»åŠ ä¸€ä¸ªå¯¹åº”çš„é…ç½®å‚æ•°ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">//...</span>
	<span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">liveReload</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//é»˜è®¤ä¸ºtrueï¼Œå³å¼€å¯çƒ­æ›´æ–°åŠŸèƒ½ã€‚</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨æˆ‘ä»¬å°±å¯ä»¥å®æ—¶åœ°çœ‹åˆ°ä»£ç é‡Œçš„ä¸è§„èŒƒæŠ¥é”™å•¦ã€‚</p><h3 id="_2-1-5-git-hooks-ä¸-husky" tabindex="-1"><a class="header-anchor" href="#_2-1-5-git-hooks-ä¸-husky" aria-hidden="true">#</a> 2.1.5 git-hooks ä¸ husky</h3><p>ä¸ºäº†ä¿è¯å›¢é˜Ÿé‡Œçš„å¼€å‘äººå‘˜æäº¤çš„ä»£ç ç¬¦åˆè§„èŒƒï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¼€å‘è€…ä¸Šä¼ ä»£ç æ—¶è¿›è¡Œæ ¡éªŒã€‚ æˆ‘ä»¬å¸¸ç”¨ husky æ¥ååŠ©è¿›è¡Œä»£ç æäº¤æ—¶çš„ eslint æ ¡éªŒã€‚åœ¨ä½¿ç”¨ husky ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥ç ”ç©¶ä¸€ä¸‹ <code>git-hooks</code>ã€‚</p><ul><li><strong>git-hooks</strong></li></ul><p>æˆ‘ä»¬å›åˆ°é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ã€‚è¿è¡Œ ls -a å‘½ä»¤ â€”â€”â€”â€” â€œ-aâ€å¯ä»¥æ˜¾ç¤ºéšè—ç›®å½•(ç›®å½•åçš„ç¬¬ä¸€ä½æ˜¯.)ã€‚ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå­˜åœ¨ä¸€ä¸ª&quot;.git&quot;åç§°çš„æ–‡ä»¶å¤¹ã€‚</p><p>äº‹å®ä¸Šï¼Œåœ¨æˆ‘ä»¬é¡¹ç›®ä¸­æ ¹ç›®å½•ä¸‹è¿è¡Œ git å‘½ä»¤æ—¶ï¼Œgit ä¼šæ ¹æ®å®ƒæ¥å·¥ä½œã€‚</p><p>æ¥æ¥ä¸‹æˆ‘ä»¬è¿›å…¥åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œè¿›ä¸€æ­¥æŸ¥çœ‹å®ƒå†…éƒ¨çš„å†…å®¹ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> .git
<span class="token function">ls</span> <span class="token parameter variable">-a</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬å‘ç°å®ƒå†…éƒ¨è¿˜æŒºæœ‰æ–™ï¼ä¸æ…Œï¼Œæˆ‘ä»¬è¿™èŠ‚è¯¾ä»…ä»…åªè®²åˆ°å…¶ä¸­çš„ä¸€ä¸ªå†…å®¹ â€”â€”â€”â€” hooksï¼Œå¯ä»¥çœ‹åˆ°ï¼Œå½“å‰ç›®å½•ä¸‹å­˜åœ¨ä¸€ä¸ª hooks æ–‡ä»¶å¤¹ï¼Œé¡¾åæ€ä¹‰ï¼Œè¿™ä¸ªæ–‡ä»¶å¤¹æä¾›äº† git å‘½ä»¤ç›¸å…³çš„é’©å­ã€‚</p><p>ç»§ç»­å¾€é‡Œçœ‹ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> hooks
<span class="token function">ls</span> <span class="token parameter variable">-a</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>okï¼Œé‚£æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ‰å¾ˆå¤š git å‘½ä»¤ç›¸å…³çš„æ–‡ä»¶åã€‚æ¯”å¦‚&quot;pre-commit.sample pre-push.sample&quot;ã€‚ å›åˆ°æ­£é¢˜â€”â€”æˆ‘ä»¬æœŸæœ›åœ¨ git æäº¤(commit)å‰ï¼Œå¯¹æˆ‘ä»¬çš„ä»£ç è¿›è¡Œæ£€æµ‹ï¼Œå¦‚æœä¸èƒ½é€šè¿‡æ£€æµ‹ï¼Œå°±æ— æ³•æäº¤æˆ‘ä»¬çš„ä»£ç ã€‚</p><p>è‡ªç„¶è€Œç„¶çš„ï¼Œè¿™ä¸ªåŠ¨ä½œçš„æ—¶æœºåº”è¯¥æ˜¯ï¼Ÿâ€”â€”â€”â€”&quot;pre commit&quot;,ä¹Ÿå°±æ˜¯ commit ä¹‹å‰ã€‚</p><p>ç°åœ¨ï¼Œæˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹ pre-commit.sample çš„å†…å®¹ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># catå‘½ä»¤å¯ä»¥æŸ¥çœ‹ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹</span>
<span class="token function">cat</span> pre-commit.sample
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>OKï¼Œå®ƒè¿”å›äº†è¿™æ ·çš„å†…å®¹ï¼Œæ˜¯ä¸€ä¸² shell æ³¨é‡Šã€‚ç¿»è¯‘è¿‡æ¥å¤§æ¦‚æ„æ€æ˜¯ï¼Œè¿™æ˜¯ä¸ªç¤ºä¾‹é’©å­ï¼Œç„¶åæˆ‘ä»¬çœ‹åˆ°äº†è¿™ä¸€å¥è¯</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># To enable this hook, rename this file to &quot;pre-commit&quot;.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ„æ€æ˜¯è¦å¯ç”¨è¿™ä¸ªé’©å­çš„è¯ï¼Œæˆ‘ä»¬å°±æŠŠè¿™ä¸ªæ–‡ä»¶çš„åç¼€åå»æ‰ã€‚</p><p>è™½ç„¶è¿™æ ·å¯¹æˆ‘ä»¬æœ¬åœ°æ¥è®²æ˜¯å¯è¡Œçš„ï¼Œä½†è¦æ³¨æ„ï¼Œ.git æ–‡ä»¶å¤¹çš„æ”¹åŠ¨æ— æ³•åŒæ­¥åˆ°è¿œç«¯ä»“åº“ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬æœŸæœ›å°† git-hook çš„æ‰§è¡Œæƒç§»äº¤åˆ°å¤–é¢æ¥ã€‚</p><p>å¥½çš„ï¼Œæˆ‘ä»¬å›åˆ°é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ï¼Œç„¶åæˆ‘ä»¬æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œæš‚æ—¶å‘½åä¸º&quot;.mygithooks&quot; ç„¶ååœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å¢ä¸€ä¸ª git-hook æ–‡ä»¶,å‘½åä¸º&quot;pre-commit&quot;ï¼Œå¹¶å†™å…¥ä»¥ä¸‹å†…å®¹ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> pre-commitæ‰§è¡Œå•¦
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¥½äº†ï¼Œæˆ‘ä»¬æ–°å»ºäº†è‡ªå·±çš„ git-hookï¼Œä½†æ­¤æ—¶ git å¹¶ä¸èƒ½è¯†åˆ«ã€‚ä¸‹é¢æˆ‘ä»¬æ‰§è¡Œè¿™è¡Œå‘½ä»¤ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># é¡¹ç›®æ ¹ç›®å½•ä¸‹</span>
<span class="token function">git</span> config core.hooksPath .mygithooks
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šè¿°å‘½ä»¤ç»™æˆ‘ä»¬è‡ªå·±çš„æ–‡ä»¶ï¼Œé…ç½®äº† git-hook çš„æ‰§è¡Œæƒé™ã€‚</p><p>ä½†è¿™ä¸ªæ—¶å€™æˆ‘ä»¬ git commit çš„è¯ï¼Œå¯èƒ½ä¼šæŠ¥è¿™æ ·çš„ waringï¼Œå¹¶ä¸”æ²¡æœ‰æ‰§è¡Œæˆ‘ä»¬çš„ shellï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>hint: The <span class="token string">&#39;pre-commit&#39;</span> hook was ignored because it&#39;s not <span class="token builtin class-name">set</span> as executable.
hint: You can disable this warning with <span class="token variable"><span class="token variable">`</span><span class="token function">git</span> config advice.ignoredHook <span class="token boolean">false</span><span class="token variable">`</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ˜¯å› ä¸ºæˆ‘ä»¬çš„æ“ä½œç³»ç»Ÿæ²¡æœ‰ç»™å‡ºè¿™ä¸ªæ–‡ä»¶çš„å¯æ‰§è¡Œæƒé™ã€‚</p><p>å› æ­¤æˆ‘ä»¬å¾—å†æ‰§è¡Œè¿™æ ·ä¸€å¥å‘½ä»¤ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">chmod</span> +x .mygithooks/pre-commit
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>okï¼ç°åœ¨æˆ‘ä»¬å°è¯•æ‰§è¡Œ git add . &amp;&amp; git commit -m &quot;any meesage&quot;ã€‚</p><p>æˆ‘ä»¬å‘ç°æ§åˆ¶å°æ—¥å¿—ä¼šå…ˆæ‰“å° â€œpre-commit æ‰§è¡Œå•¦â€ã€‚</p><p>è¿™æ„å‘³ç€æˆåŠŸå•¦ï¼</p><p><strong>æ€»ç»“ï¼š</strong></p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬æ git-hook çš„è¯ï¼Œè¦åˆ†ä¸‰æ­¥èµ°ï¼š</p><ol><li>æ–°å¢ä»»æ„åç§°æ–‡ä»¶å¤¹ä»¥åŠæ–‡ä»¶ pre-commit(è¿™ä¸ªæ–‡ä»¶åå­—æ¯”å¦‚è·Ÿè¦ä½¿ç”¨çš„ git-hook åå­—ä¸€è‡´)ï¼</li><li>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥ç§»äº¤ git-hook çš„é…ç½®æƒé™</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">git</span> config core.hooksPath .mygithooks
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li>ç»™è¿™ä¸ªæ–‡ä»¶æ·»åŠ å¯æ‰§è¡Œæƒé™ï¼š</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">chmod</span> +x .mygithooks/pre-commit
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç„¶åå°±æˆåŠŸå•¦ã€‚</p><p>è¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥åœ¨ pre-commit é‡Œå†™ä»»æ„è„šæœ¬ï¼Œæ¯”å¦‚ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>eslint src
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å½“ eslint æ‰«æä»£ç ï¼Œå‡ºç° error æ—¶ï¼Œä¼šåœ¨ç»“æŸæ‰«ææ—¶å°†é€€å‡ºç è®¾ä¸ºå¤§äº 0 çš„æ•°å­—ã€‚ ä¹Ÿå°±æ˜¯ä¼šæŠ¥é”™ï¼Œè¿™æ—¶å€™ commit å°±æ— æ³•å¾€ä¸‹æ‰§è¡Œå•¦ï¼Œæˆ‘ä»¬æˆåŠŸçš„æ‹¦æˆªäº†æ­¤æ¬¡é”™è¯¯æ“ä½œã€‚</p><ul><li><strong>husky</strong></li></ul><p>husky åœ¨å‡çº§åˆ° 7.x åï¼Œåšäº†è·Ÿæˆ‘ä»¬ä¸Šè¿°åŒæ ·çš„äº‹ã€‚ å®‰è£…å®ƒä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ package.json ä¸­çš„ script é‡Œï¼Œå…ˆæ·»åŠ </p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token string-property property">&quot;sctript&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">//...others</span>
    <span class="token string-property property">&quot;prepare&quot;</span><span class="token operator">:</span> <span class="token string">&quot;husky install&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>prepare æ˜¯ä¸€ä¸ª npm é’©å­ï¼Œæ„æ€æ˜¯å®‰è£…ä¾èµ–çš„æ—¶å€™ï¼Œä¼šå…ˆæ‰§è¡Œ husky install å‘½ä»¤ã€‚ è¿™ä¸ªå‘½ä»¤å°±åšäº†ä¸Šè¿°çš„ 123 è¿™ä¸‰ä»¶äº‹ï¼ æˆ‘ä»¬å®‰è£…äº† 7.x çš„ husky ä¼šå‘ç°ï¼Œé¡¹ç›®æ ¹ç›®å½•ä¸‹ç”Ÿæˆäº†.husky çš„æ–‡ä»¶å¤¹ã€‚ å½“ç„¶ï¼Œ7.x çš„ husky ä¼¼ä¹æ˜¯æœ‰ bug çš„ï¼Œå¦‚æœä¸èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦éªŒè¯ä¸¤ä»¶äº‹ï¼š</p><ol><li>æ˜¯å¦ç§»äº¤äº† git-hook çš„é…ç½®æƒé™ï¼Ÿ æ‰§è¡Œå‘½ä»¤ &quot;git config --list&quot;æŸ¥çœ‹ core.hooksPath é…ç½®æ˜¯å¦å­˜åœ¨ï¼Œæ˜¯å¦æ­£ç¡®æŒ‡å‘äº†.huskyã€‚ å¦‚æœæ²¡æœ‰ï¼Œæˆ‘ä»¬åªéœ€è¦æ‰‹åŠ¨çš„ç»™åŠ ä¸Šå°±è¡Œï¼š</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">git</span> config core.hooksPath .husky
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>æ˜¯å¦æ˜¯å¯æ‰§è¡Œæ–‡ä»¶ï¼Ÿ å‚è€ƒä¸Šè¿°æ€»ç»“ä¸­çš„ 3 å³å¯ è¿™æ—¶æˆ‘ä»¬çš„ husky å°±æ­£å¸¸äº†ã€‚</li></ol><h2 id="_2-2-æ¨¡å—ä¸ä¾èµ–" tabindex="-1"><a class="header-anchor" href="#_2-2-æ¨¡å—ä¸ä¾èµ–" aria-hidden="true">#</a> 2.2 æ¨¡å—ä¸ä¾èµ–</h2><p>åœ¨æ¨¡å—åŒ–ç¼–ç¨‹ä¸­ï¼Œå¼€å‘è€…å°†ç¨‹åºåˆ†è§£ä¸ºåŠŸèƒ½ç¦»æ•£çš„æ–‡ä»¶ï¼Œå¹¶ç§°ä¹‹ä¸ºæ¨¡å—ã€‚ æ¯ä¸ªæ¨¡å—éƒ½æ‹¥æœ‰å°äºå®Œæ•´ç¨‹åºçš„ä½“ç§¯ï¼Œä½¿å¾—éªŒè¯ã€è°ƒè¯•åŠæµ‹è¯•å˜å¾—è½»è€Œæ˜“ä¸¾ã€‚ ç²¾å¿ƒç¼–å†™çš„æ¨¡å—æä¾›äº†å¯é çš„æŠ½è±¡å’Œå°è£…ç•Œé™ï¼Œä½¿å¾—åº”ç”¨ç¨‹åºä¸­æ¯ä¸ªæ¨¡å—éƒ½å…·å¤‡äº†æ¡ç†æ¸…æ™°çš„è®¾è®¡å’Œæ˜ç¡®çš„ç›®çš„ã€‚</p><p>Node.js ä»ä¸€å¼€å§‹å°±æ”¯æŒæ¨¡å—åŒ–ç¼–ç¨‹ã€‚ ä½†ï¼Œæµè§ˆå™¨ç«¯çš„æ¨¡å—åŒ–è¿˜åœ¨ç¼“æ…¢æ”¯æŒä¸­â€”â€”æˆªæ­¢åˆ° 2021ï¼Œå¤§å¤šä¸»æµæµè§ˆå™¨å·²æ”¯æŒ ESM æ¨¡å—åŒ–ï¼Œå› æ­¤åŸºäº ESM çš„æ‰“åŒ…å·¥å…·ç”Ÿæ€é€æ¸å¼€å§‹æ´»è·ƒã€‚</p><p>åœ¨å‰ç«¯å·¥ç¨‹åŒ–åœˆå­é‡Œå­˜åœ¨å¤šç§æ”¯æŒ JavaScript æ¨¡å—åŒ–çš„å·¥å…·ï¼Œè¿™äº›å·¥å…·å„æœ‰ä¼˜åŠ¿å’Œé™åˆ¶ã€‚ Webpack ä»è¿™äº›ç³»ç»Ÿä¸­æ±²å–äº†ç»éªŒå’Œæ•™è®­ï¼Œå¹¶å°† æ¨¡å— çš„æ¦‚å¿µåº”ç”¨åˆ°é¡¹ç›®çš„ä»»ä½•æ–‡ä»¶ä¸­ã€‚</p><h3 id="_2-2-1-webpack-æ¨¡å—ä¸è§£æåŸç†" tabindex="-1"><a class="header-anchor" href="#_2-2-1-webpack-æ¨¡å—ä¸è§£æåŸç†" aria-hidden="true">#</a> 2.2.1 Webpack æ¨¡å—ä¸è§£æåŸç†</h3><p>åœ¨è®² webpack æ¨¡å—è§£æä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆäº†è§£ä¸‹ webpack æ¨¡å—çš„æ¦‚å¿µï¼Œä»¥åŠç®€å•æ¢ç©¶ä¸‹ webpack çš„å…·ä½“å®ç°ã€‚</p><p><strong>1ã€webpack æ¨¡å—</strong></p><ul><li><p>ä½•ä¸º webpack æ¨¡å—</p><p>èƒ½åœ¨ webpack å·¥ç¨‹åŒ–ç¯å¢ƒé‡ŒæˆåŠŸå¯¼å…¥çš„æ¨¡å—ï¼Œéƒ½å¯ä»¥è§†ä½œ webpack æ¨¡å—ã€‚ ä¸ Node.js æ¨¡å—ç›¸æ¯”ï¼Œwebpack æ¨¡å— èƒ½ä»¥å„ç§æ–¹å¼è¡¨è¾¾å®ƒä»¬çš„ä¾èµ–å…³ç³»ã€‚ä¸‹é¢æ˜¯ä¸€äº›ç¤ºä¾‹ï¼š</p><ul><li>ES2015 import è¯­å¥</li><li>CommonJS require() è¯­å¥</li><li>AMD define å’Œ require è¯­å¥</li><li>css/sass/less æ–‡ä»¶ä¸­çš„ @import è¯­å¥</li><li>stylesheet <code>url(...)</code> æˆ–è€… HTML<code>&lt;img src=...&gt;</code> æ–‡ä»¶ä¸­çš„å›¾ç‰‡é“¾æ¥</li></ul></li><li><p>æ”¯æŒçš„æ¨¡å—ç±»å‹ Webpack å¤©ç”Ÿæ”¯æŒå¦‚ä¸‹æ¨¡å—ç±»å‹ï¼š</p><ul><li>ECMAScript æ¨¡å—</li><li>CommonJS æ¨¡å—</li><li>AMD æ¨¡å—</li><li>Assets</li><li>WebAssembly æ¨¡å—</li></ul></li></ul><p>è€Œæˆ‘ä»¬æ—©å°±å‘ç°â€”â€”é€šè¿‡ loader å¯ä»¥ä½¿ webpack æ”¯æŒå¤šç§è¯­è¨€å’Œé¢„å¤„ç†å™¨è¯­æ³•ç¼–å†™çš„æ¨¡å—ã€‚loader å‘ webpack æè¿°äº†å¦‚ä½•å¤„ç†éåŸç”Ÿæ¨¡å—ï¼Œå¹¶å°†ç›¸å…³ä¾èµ–å¼•å…¥åˆ°ä½ çš„ bundles ä¸­ã€‚åŒ…æ‹¬ä¸”ä¸é™äºï¼š</p><ul><li>TypeScript</li><li>Sass</li><li>Less</li><li>JSON</li><li>YAML</li></ul><p>æ€»çš„æ¥è®²ï¼Œè¿™äº›éƒ½å¯ä»¥è¢«è®¤ä¸ºæ˜¯ webpack æ¨¡å—ã€‚</p><p><strong>2ã€compiler ä¸ Resolvers</strong></p><p>åœ¨æˆ‘ä»¬è¿è¡Œ webpack çš„æ—¶å€™(å°±æ˜¯æˆ‘ä»¬æ‰§è¡Œ webpack å‘½ä»¤è¿›è¡Œæ‰“åŒ…æ—¶)ï¼Œå…¶å®å°±æ˜¯ç›¸å½“äºæ‰§è¡Œäº†ä¸‹é¢çš„ä»£ç ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> compiler <span class="token operator">=</span> <span class="token function">webpack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token comment">// ...è¿™æ˜¯æˆ‘ä»¬é…ç½®çš„webpackconfigå¯¹è±¡</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>webpack çš„æ‰§è¡Œä¼šè¿”å›ä¸€ä¸ªæè¿° webpack æ‰“åŒ…ç¼–è¯‘æ•´ä¸ªæµç¨‹çš„å¯¹è±¡ï¼Œæˆ‘ä»¬å°†å…¶ç§°ä¹‹ä¸º compilerã€‚ compiler å¯¹è±¡æè¿°æ•´ä¸ª webpack æ‰“åŒ…æµç¨‹â€”â€”â€”å®ƒå†…ç½®äº†ä¸€ä¸ªæ‰“åŒ…çŠ¶æ€ï¼Œéšç€æ‰“åŒ…è¿‡ç¨‹çš„è¿›è¡Œï¼ŒçŠ¶æ€ä¹Ÿä¼šå®æ—¶å˜æ›´ï¼ŒåŒæ—¶è§¦å‘å¯¹åº”çš„ webpack ç”Ÿå‘½å‘¨æœŸé’©å­ã€‚ (ç®€å•ç‚¹è®²ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶ç±»æ¯”ä¸ºä¸€ä¸ª Promise å¯¹è±¡ï¼ŒçŠ¶æ€ä»æ‰“åŒ…å‰ï¼Œæ‰“åŒ…ä¸­åˆ°æ‰“åŒ…å®Œæˆæˆ–è€…æ‰“åŒ…å¤±è´¥ã€‚) æ¯ä¸€æ¬¡ webpack æ‰“åŒ…ï¼Œå°±æ˜¯åˆ›å»ºä¸€ä¸ª compiler å¯¹è±¡ï¼Œèµ°å®Œæ•´ä¸ªç”Ÿå‘½å‘¨æœŸçš„è¿‡ç¨‹ã€‚</p><p>è€Œ webpack ä¸­æ‰€æœ‰å…³äºæ¨¡å—çš„è§£æï¼Œéƒ½æ˜¯ compiler å¯¹è±¡é‡Œçš„å†…ç½®æ¨¡å—è§£æå™¨å»å·¥ä½œçš„â€”â€”â€”â€”ç®€å•ç‚¹è®²ï¼Œä½ å¯ä»¥ç†è§£ä¸ºè¿™ä¸ªå¯¹è±¡ä¸Šçš„ä¸€ä¸ªå±æ€§ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º Resolversã€‚ webpack çš„ Resolvers è§£æå™¨çš„ä¸»ä½“åŠŸèƒ½å°±æ˜¯æ¨¡å—è§£æï¼Œå®ƒæ˜¯åŸºäº<code>enhanced-resolve</code> è¿™ä¸ªåŒ…å®ç°çš„ã€‚æ¢å¥è¯è®²ï¼Œåœ¨ webpack ä¸­ï¼Œæ— è®ºä½ ä½¿ç”¨æ€æ ·çš„æ¨¡å—å¼•å…¥è¯­å¥ï¼Œæœ¬è´¨å…¶å®éƒ½æ˜¯åœ¨è°ƒç”¨è¿™ä¸ªåŒ…çš„ api è¿›è¡Œæ¨¡å—è·¯å¾„è§£æã€‚</p><h3 id="_2-2-2-æ¨¡å—è§£æ-resolve" tabindex="-1"><a class="header-anchor" href="#_2-2-2-æ¨¡å—è§£æ-resolve" aria-hidden="true">#</a> 2.2.2 æ¨¡å—è§£æ(resolve)</h3><p>webpack é€šè¿‡ Resolvers å®ç°äº†æ¨¡å—ä¹‹é—´çš„ä¾èµ–å’Œå¼•ç”¨ã€‚ä¸¾ä¸ªä¾‹å­ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">&#39;lodash&#39;</span><span class="token punctuation">;</span>
<span class="token comment">// æˆ–è€…</span>
<span class="token keyword">const</span> add <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./utils/add&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰€å¼•ç”¨çš„æ¨¡å—å¯ä»¥æ˜¯æ¥è‡ªåº”ç”¨ç¨‹åºçš„ä»£ç ï¼Œä¹Ÿå¯ä»¥æ˜¯ç¬¬ä¸‰æ–¹åº“ã€‚ resolver å¸®åŠ© webpack ä»æ¯ä¸ª require/import è¯­å¥ä¸­ï¼Œæ‰¾åˆ°éœ€è¦å¼•å…¥åˆ° bundle ä¸­çš„æ¨¡å—ä»£ç ã€‚ å½“æ‰“åŒ…æ¨¡å—æ—¶ï¼Œwebpack ä½¿ç”¨ enhanced-resolve æ¥è§£ææ–‡ä»¶è·¯å¾„ã€‚ (webpack_resolver çš„ä»£ç å®ç°å¾ˆæœ‰æ€æƒ³ï¼Œwebpack åŸºäºæ­¤è¿›è¡Œ treeshakingï¼Œè¿™ä¸ªæ¦‚å¿µæˆ‘ä»¬åé¢ä¼šè®²åˆ°)ã€‚</p><p><strong>1ã€webpack ä¸­çš„æ¨¡å—è·¯å¾„è§£æè§„åˆ™</strong></p><p>é€šè¿‡å†…ç½®çš„ enhanced-resolveï¼Œwebpack èƒ½è§£æä¸‰ç§æ–‡ä»¶è·¯å¾„ï¼š</p><ul><li>ç»å¯¹è·¯å¾„</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token string">&#39;/home/me/file&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&#39;C:\\Users\\me\\file&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ç”±äºå·²ç»è·å¾—æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ï¼Œå› æ­¤ä¸éœ€è¦å†åšè¿›ä¸€æ­¥è§£æã€‚</p><ul><li>ç›¸å¯¹è·¯å¾„</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token string">&#39;../utils/reqFetch&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&#39;./styles.css&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ç§æƒ…å†µä¸‹ï¼Œä½¿ç”¨ import æˆ– require çš„èµ„æºæ–‡ä»¶æ‰€å¤„çš„ç›®å½•ï¼Œè¢«è®¤ä¸ºæ˜¯ä¸Šä¸‹æ–‡ç›®å½•ã€‚ åœ¨ import/require ä¸­ç»™å®šçš„ç›¸å¯¹è·¯å¾„ï¼Œenhanced-resolve ä¼šæ‹¼æ¥æ­¤ä¸Šä¸‹æ–‡è·¯å¾„ï¼Œæ¥ç”Ÿæˆæ¨¡å—çš„ç»å¯¹è·¯å¾„(path.resolve(__dirname, RelativePath) ã€‚ è¿™ä¹Ÿæ˜¯æˆ‘ä»¬åœ¨å†™ä»£ç æ—¶æœ€å¸¸ç”¨çš„æ–¹å¼ä¹‹ä¸€ï¼Œå¦ä¸€ç§æœ€å¸¸ç”¨çš„æ–¹å¼åˆ™æ˜¯æ¨¡å—è·¯å¾„ã€‚</p><ul><li>æ¨¡å—è·¯å¾„</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token string">&#39;module&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&#39;module/lib/file&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¹Ÿå°±æ˜¯åœ¨ resolve.modules ä¸­æŒ‡å®šçš„æ‰€æœ‰ç›®å½•æ£€ç´¢æ¨¡å—(node_modules é‡Œçš„æ¨¡å—å·²ç»è¢«é»˜è®¤é…ç½®äº†)ã€‚ ä½ å¯ä»¥é€šè¿‡é…ç½®åˆ«åçš„æ–¹å¼æ¥æ›¿æ¢åˆå§‹æ¨¡å—è·¯å¾„ï¼Œ å…·ä½“è¯·å‚ç…§ä¸‹é¢ <code>resolve.alias</code> é…ç½®é€‰é¡¹ã€‚</p><p><strong>2ã€resolve</strong></p><ul><li>alias</li></ul><p>ä¸Šæ–‡ä¸­æåˆ°æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>resolve.alias</code> æ¥è‡ªå®šä¹‰é…ç½®æ¨¡å—è·¯å¾„ã€‚ç°åœ¨æˆ‘ä»¬æ¥æ˜¯å®ç°ä¸€ä¸‹: é¦–å…ˆï¼Œæˆ‘ä»¬ src ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª utils æ–‡ä»¶å¤¹ï¼Œå¹¶æ–°å»ºä¸€ä¸ª add.js æ–‡ä»¶ï¼Œå¯¹å¤–æš´éœ²å‡ºä¸€ä¸ª add å‡½æ•°ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// src/utils/add.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åæˆ‘ä»¬åœ¨ src/index.js ä¸­åŸºäºç›¸å¯¹è·¯å¾„å¼•ç”¨å¹¶ä½¿ç”¨å®ƒï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> add <span class="token keyword">from</span> <span class="token string">&#39;./utils/add&#39;</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>add<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¾ˆå¥½ï¼Œä»£ç è·‘èµ·æ¥äº†å¹¶ä¸”æ²¡æœ‰æŠ¥é”™ã€‚ è¿™æ—¶æˆ‘ä»¬æœŸæœ›èƒ½ç”¨@utils/add çš„æ–¹å¼å»å¼•ç”¨å®ƒï¼Œäºæ˜¯æˆ‘ä»¬è¿™æ ·å†™äº†ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> add <span class="token keyword">from</span> <span class="token string">&#39;@utils/add&#39;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>å¾ˆæ˜æ˜¾å®ƒä¼šæŠ¥é”™ï¼Œå› ä¸º webpack ä¼šå°†å…¶å½“åšä¸€ä¸ªæ¨¡å—è·¯å¾„æ¥è¯†åˆ«â€”â€”â€”æ‰€ä»¥æ— æ³•æ‰¾åˆ°@utils è¿™ä¸ªæ¨¡å—ã€‚ è¿™æ—¶ï¼Œæˆ‘ä»¬é…ç½®ä¸‹ resolveï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">//...</span>
	<span class="token literal-property property">resolve</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token string-property property">&#39;@utils&#39;</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;src/utils/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚ä»£ç æ‰€ç¤ºï¼Œæˆ‘ä»¬è®² utils æ–‡ä»¶å¤¹çš„ç»å¯¹è·¯å¾„é…ç½®ä¸ºä¸€ä¸ªæ¨¡å—è·¯å¾„ï¼Œèµ·ä¸€ä¸ªåˆ«åä¸ºâ€œ@utilsâ€ã€‚ é‡å¯æœåŠ¡å‘ç°ï¼Œä»£ç è·‘èµ·æ¥äº†ã€‚æ¨¡å—è¯†åˆ«æˆåŠŸäº†ã€‚</p><ul><li><strong>extentions</strong></li></ul><p>ä¸Šè¿°ä»£ç ä¸­æˆ‘ä»¬å‘ç°ï¼Œåªéœ€è¦â€œimport add from &#39;@utils/add&#39;â€, webpack å°±å¯ä»¥å¸®æˆ‘ä»¬æ‰¾åˆ° add.jsã€‚ äº‹å®ä¸Šï¼Œè¿™ä¸ import add from &#39;@utils/add.js&#39; çš„æ•ˆæœæ˜¯ä¸€è‡´çš„ã€‚ ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ åŸæ¥ webpack çš„å†…ç½®è§£æå™¨å·²ç»é»˜è®¤å®šä¹‰å¥½äº†ä¸€äº› æ–‡ä»¶/ç›®å½• çš„è·¯å¾„è§£æè§„åˆ™ã€‚ æ¯”å¦‚å½“æˆ‘ä»¬</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> utils <span class="token keyword">from</span> <span class="token string">&#39;./utils&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>utils æ˜¯ä¸€ä¸ªæ–‡ä»¶ç›®å½•è€Œä¸æ˜¯æ¨¡å—(æ–‡ä»¶)ï¼Œä½† webpack åœ¨è¿™ç§æƒ…å†µä¸‹é»˜è®¤å¸®æˆ‘ä»¬æ·»åŠ äº†åç¼€â€œ/index.jsâ€ï¼Œä»è€Œå°†æ­¤ç›¸å¯¹è·¯å¾„æŒ‡å‘åˆ° utils é‡Œçš„ index.jsã€‚ è¿™æ˜¯ webpack è§£æå™¨é»˜è®¤å†…ç½®å¥½çš„è§„åˆ™ã€‚ é‚£ä¹ˆç°åœ¨æœ‰ä¸€ä¸ªé—®é¢˜ï¼š å½“ utils æ–‡ä»¶å¤¹ä¸‹åŒæ—¶æ‹¥æœ‰ add.js add.json æ—¶ï¼Œ&quot;@utils/add&quot;ä¼šæŒ‡å‘è°å‘¢ï¼Ÿ @utils/add.json</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;add&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬å‘ç°ä»ç„¶æŒ‡å‘åˆ° add.jsã€‚ å½“æˆ‘ä»¬åˆ æ‰ add.js,ä¼šå‘ç°æ­¤æ—¶çš„å¼•å…¥çš„ add å˜æˆäº†ä¸€ä¸ª json å¯¹è±¡ã€‚ ä¸Šè¿°ç°è±¡ä¼¼ä¹è¡¨æ˜äº†è¿™æ˜¯ä¸€ä¸ªé»˜è®¤é…ç½®çš„ä¼˜å…ˆçº§çš„é—®é¢˜ã€‚ è€Œ webpack å¯¹å¤–æš´éœ²äº†é…ç½®å±æ€§: <code>resolve.extentions</code>, å®ƒçš„ç”¨æ³•å½¢å¦‚ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">//...</span>
	<span class="token literal-property property">resolve</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">extensions</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;.js&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;.json&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;.wasm&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>webpack ä¼šæŒ‰ç…§æ•°ç»„é¡ºåºå»è§£æè¿™äº›åç¼€åï¼Œå¯¹äºåŒåçš„æ–‡ä»¶ï¼Œwebpack æ€»æ˜¯ä¼šå…ˆè§£æåˆ—åœ¨æ•°ç»„é¦–ä½çš„åç¼€åçš„æ–‡ä»¶ã€‚</p><h3 id="_2-2-3-å¤–éƒ¨æ‰©å±•-externals" tabindex="-1"><a class="header-anchor" href="#_2-2-3-å¤–éƒ¨æ‰©å±•-externals" aria-hidden="true">#</a> 2.2.3 å¤–éƒ¨æ‰©å±•(Externals)</h3><p>æœ‰æ—¶å€™æˆ‘ä»¬ä¸ºäº†å‡å° bundle çš„ä½“ç§¯ï¼Œä»è€ŒæŠŠä¸€äº›ä¸å˜çš„ç¬¬ä¸‰æ–¹åº“ç”¨ cdn çš„å½¢å¼å¼•å…¥è¿›æ¥ï¼Œæ¯”å¦‚ jQueryï¼š index.html</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬æƒ³åœ¨æˆ‘ä»¬çš„ä»£ç é‡Œä½¿ç”¨å¼•å…¥çš„ jqueryâ€”â€”â€”ä½†ä¼¼ä¹ä¸‰ç§æ¨¡å—å¼•å…¥æ–¹å¼éƒ½ä¸è¡Œï¼Œè¿™æ—¶å€™æ€ä¹ˆåŠå‘¢ï¼Ÿ webpack ç»™æˆ‘ä»¬æä¾›äº† Externals çš„é…ç½®å±æ€§ï¼Œè®©æˆ‘ä»¬å¯ä»¥é…ç½®å¤–éƒ¨æ‰©å±•æ¨¡å—:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">//...</span>
	<span class="token literal-property property">externals</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">jquery</span><span class="token operator">:</span> <span class="token string">&#39;jQuery&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬å°è¯•åœ¨ä»£ç ä¸­ä½¿ç”¨ jQuery:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// index.js</span>
<span class="token keyword">import</span> $ <span class="token keyword">from</span> <span class="token string">&#39;jquery&#39;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>$<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å‘ç°æ‰“å°æˆåŠŸï¼Œè¿™è¯´æ˜æˆ‘ä»¬å·²ç»åœ¨ä»£ç ä¸­ä½¿ç”¨å®ƒã€‚ æ³¨æ„ï¼šæˆ‘ä»¬å¦‚ä½•å¾—çŸ¥ { jquery: &#39;jQuery&#39;} ä¸­çš„ &#39;jQuery&#39;? å…¶å®å°±æ˜¯ cdn é‡Œæ‰“å…¥åˆ° window ä¸­çš„å˜é‡åï¼Œæ¯”å¦‚ jQuery ä¸ä»…æœ‰ jQuery å˜é‡åï¼Œè¿˜æœ‰$ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¹Ÿå¯ä»¥å†™æˆè¿™æ ·å­:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>module.exports = {
  //...
  externals: {
    jquery: &#39;$&#39;,
  },
};
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‡å¯æœåŠ¡åå‘ç°ï¼Œæ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚</p><h3 id="_2-2-4-ä¾èµ–å›¾-dependency-graph" tabindex="-1"><a class="header-anchor" href="#_2-2-4-ä¾èµ–å›¾-dependency-graph" aria-hidden="true">#</a> 2.2.4 ä¾èµ–å›¾(dependency graph)</h3><p>æ¯å½“ä¸€ä¸ªæ–‡ä»¶ä¾èµ–å¦ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œwebpack ä¼šç›´æ¥å°†æ–‡ä»¶è§†ä¸ºå­˜åœ¨ä¾èµ–å…³ç³»ã€‚ è¿™ä½¿å¾— webpack å¯ä»¥è·å–éä»£ç èµ„æºï¼Œå¦‚ images æˆ– web å­—ä½“ç­‰ã€‚å¹¶ä¼šæŠŠå®ƒä»¬ä½œä¸º ä¾èµ– æä¾›ç»™åº”ç”¨ç¨‹åºã€‚ å½“ webpack å¼€å§‹å·¥ä½œæ—¶ï¼Œå®ƒä¼šæ ¹æ®æˆ‘ä»¬å†™å¥½çš„é…ç½®,ä» å…¥å£(entry) å¼€å§‹ï¼Œwebpack ä¼šé€’å½’çš„æ„å»ºä¸€ä¸ª ä¾èµ–å…³ç³»å›¾ï¼Œè¿™ä¸ªä¾èµ–å›¾åŒ…å«ç€åº”ç”¨ç¨‹åºä¸­æ‰€éœ€çš„æ¯ä¸ªæ¨¡å—ï¼Œç„¶åå°†æ‰€æœ‰æ¨¡å—æ‰“åŒ…ä¸º bundle(ä¹Ÿå°±æ˜¯ output çš„é…ç½®é¡¹)ã€‚</p><p>å•çº¯è®²ä¼¼ä¹å¾ˆæŠ½è±¡ï¼Œæˆ‘ä»¬æ›´æœŸæœ›èƒ½å¤Ÿå¯è§†åŒ–æ‰“åŒ…äº§ç‰©çš„ä¾èµ–å›¾ï¼Œä¸‹è¾¹åˆ—ç¤ºäº†ä¸€äº› bundle åˆ†æå·¥å…·ã€‚</p><p><strong>bundle åˆ†æ(bundle analysis) å·¥å…·ï¼š</strong></p><p><a href="https://github.com/webpack/analyse" target="_blank" rel="noopener noreferrer">å®˜æ–¹åˆ†æå·¥å…·<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> æ˜¯ä¸€ä¸ªä¸é”™çš„å¼€å§‹ã€‚è¿˜æœ‰ä¸€äº›å…¶ä»–ç¤¾åŒºæ”¯æŒçš„å¯é€‰é¡¹ï¼š</p><ul><li><a href="https://alexkuz.github.io/webpack-chart/" target="_blank" rel="noopener noreferrer">webpack-chart<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>: webpack stats å¯äº¤äº’é¥¼å›¾ã€‚</li><li><a href="https://chrisbateman.github.io/webpack-visualizer/" target="_blank" rel="noopener noreferrer">webpack-visualizer<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>: å¯è§†åŒ–å¹¶åˆ†æä½ çš„ bundleï¼Œæ£€æŸ¥å“ªäº›æ¨¡å—å ç”¨ç©ºé—´ï¼Œå“ªäº›å¯èƒ½æ˜¯é‡å¤ä½¿ç”¨çš„ã€‚</li><li><a href="https://github.com/webpack-contrib/webpack-bundle-analyzer" target="_blank" rel="noopener noreferrer">webpack-bundle-analyzer<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼šä¸€ä¸ª plugin å’Œ CLI å·¥å…·ï¼Œå®ƒå°† bundle å†…å®¹å±•ç¤ºä¸ºä¸€ä¸ªä¾¿æ·çš„ã€äº¤äº’å¼ã€å¯ç¼©æ”¾çš„æ ‘çŠ¶å›¾å½¢å¼ã€‚</li><li><a href="https://webpack.jakoblind.no/optimize" target="_blank" rel="noopener noreferrer">webpack bundle optimize helper<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼šè¿™ä¸ªå·¥å…·ä¼šåˆ†æä½ çš„ bundleï¼Œå¹¶æä¾›å¯æ“ä½œçš„æ”¹è¿›æªæ–½ï¼Œä»¥å‡å°‘ bundle çš„å¤§å°ã€‚</li><li><a href="https://github.com/bundle-stats/bundle-stats" target="_blank" rel="noopener noreferrer">bundle-stats<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼šç”Ÿæˆä¸€ä¸ª bundle æŠ¥å‘Šï¼ˆbundle å¤§å°ã€èµ„æºã€æ¨¡å—ï¼‰ï¼Œå¹¶æ¯”è¾ƒä¸åŒæ„å»ºä¹‹é—´çš„ç»“æœã€‚</li></ul><p>æˆ‘ä»¬æ¥ä½¿ç”¨ <code>webpack-bundle-analyzer</code> å®ç°ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># é¦–å…ˆå®‰è£…è¿™ä¸ªæ’ä»¶ä½œä¸ºå¼€å‘ä¾èµ–</span>
<span class="token comment"># NPM</span>
<span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack-bundle-analyzer
<span class="token comment"># Yarn</span>
<span class="token function">yarn</span> <span class="token function">add</span> <span class="token parameter variable">-D</span> webpack-bundle-analyzer
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åæˆ‘ä»¬é…ç½®å®ƒ:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> BundleAnalyzerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack-bundle-analyzer&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>BundleAnalyzerPlugin<span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token comment">// ...others</span>
		<span class="token keyword">new</span> <span class="token class-name">BundleAnalyzerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ—¶æˆ‘ä»¬æ‰§è¡Œæ‰“åŒ…å‘½ä»¤ï¼Œå‘ç°æ§åˆ¶å°é‡Œæ‰“å°å‡ºä¸‹é¢è¿™æ ·çš„æ—¥å¿—ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>Webpack Bundle Analyzer is started at http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">8888</span>
Use Ctrl<span class="token operator">+</span><span class="token constant">C</span> to close it
asset bundle<span class="token punctuation">.</span>js <span class="token number">5.46</span> KiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">[</span>minimized<span class="token punctuation">]</span> <span class="token punctuation">(</span>name<span class="token operator">:</span> main<span class="token punctuation">)</span> <span class="token number">1</span> related asset
asset index<span class="token punctuation">.</span>html <span class="token number">352</span> bytes <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
orphan modules <span class="token number">2.35</span> KiB <span class="token punctuation">[</span>orphan<span class="token punctuation">]</span> <span class="token number">3</span> modules
<span class="token operator">...</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€<a href="http://127.0.0.1:8888%EF%BC%8C%E6%88%91%E4%BB%AC%E6%88%90%E5%8A%9F%E5%8F%AF%E8%A7%86%E5%8C%96%E4%BA%86%E6%89%93%E5%8C%85%E4%BA%A7%E7%89%A9%E4%BE%9D%E8%B5%96%E5%9B%BE%EF%BC%81/" target="_blank" rel="noopener noreferrer">http://127.0.0.1:8888ï¼Œæˆ‘ä»¬æˆåŠŸå¯è§†åŒ–äº†æ‰“åŒ…äº§ç‰©ä¾èµ–å›¾ï¼<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>æ³¨æ„ï¼š å¯¹äº HTTP/1.1 çš„åº”ç”¨ç¨‹åºæ¥è¯´ï¼Œç”± webpack æ„å»ºçš„ bundle éå¸¸å¼ºå¤§ã€‚å½“æµè§ˆå™¨å‘èµ·è¯·æ±‚æ—¶ï¼Œå®ƒèƒ½æœ€å¤§ç¨‹åº¦çš„å‡å°‘åº”ç”¨çš„ç­‰å¾…æ—¶é—´ã€‚ è€Œå¯¹äº HTTP/2 æ¥è¯´ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ä»£ç åˆ†å‰²è¿›è¡Œè¿›ä¸€æ­¥ä¼˜åŒ–ã€‚(å¼€å‘ç¯å¢ƒè§‚æµ‹çš„è¯éœ€è¦åœ¨ DevServer é‡Œè¿›è¡Œé…ç½®{http2:true, https:false})ã€‚è¿™ä¸ªæˆ‘ä»¬ä¼šåœ¨ä¹‹åçš„è¯¾ç¨‹é‡Œè®²ã€‚</p><h2 id="_2-3-æ‰©å±•åŠŸèƒ½" tabindex="-1"><a class="header-anchor" href="#_2-3-æ‰©å±•åŠŸèƒ½" aria-hidden="true">#</a> 2.3 æ‰©å±•åŠŸèƒ½</h2><h3 id="_2-3-1-postcss-ä¸-css-æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#_2-3-1-postcss-ä¸-css-æ¨¡å—" aria-hidden="true">#</a> 2.3.1 PostCSS ä¸ CSS æ¨¡å—</h3><p><a href="https://github.com/postcss/postcss#usage" target="_blank" rel="noopener noreferrer">PostCSS<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> æ˜¯ä¸€ä¸ªç”¨ JavaScript å·¥å…·å’Œæ’ä»¶è½¬æ¢ CSS ä»£ç çš„å·¥å…·ã€‚æ¯”å¦‚å¯ä»¥ä½¿ç”¨ <a href="https://github.com/postcss/autoprefixer" target="_blank" rel="noopener noreferrer">Autoprefixer<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> æ’ä»¶è‡ªåŠ¨è·å–æµè§ˆå™¨çš„æµè¡Œåº¦å’Œèƒ½å¤Ÿæ”¯æŒçš„å±æ€§ï¼Œå¹¶æ ¹æ®è¿™äº›æ•°æ®å¸®æˆ‘ä»¬è‡ªåŠ¨çš„ ä¸º CSS è§„åˆ™æ·»åŠ å‰ç¼€ï¼Œå°†æœ€æ–°çš„ CSS è¯­æ³•è½¬æ¢æˆå¤§å¤šæ•°æµè§ˆå™¨éƒ½èƒ½ç†è§£çš„è¯­æ³•ã€‚</p><p><a href="https://github.com/css-modules/css-modules" target="_blank" rel="noopener noreferrer">CSS æ¨¡å—<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> èƒ½è®©ä½ æ°¸è¿œä¸ç”¨æ‹…å¿ƒå‘½åå¤ªå¤§ä¼—åŒ–è€Œé€ æˆå†²çªï¼Œåªè¦ç”¨æœ€æœ‰æ„ä¹‰çš„åå­—å°±è¡Œäº†ã€‚</p><ul><li><strong>PostCSS</strong></li></ul><p><code>PosetCSS</code> ä¸ <code>Webpack</code> ç»“åˆï¼Œéœ€è¦å®‰è£… <code>style-loader</code>, <code>css-loader</code>, <code>postcss-loader</code>ä¸‰ä¸ª loaderï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
					<span class="token punctuation">{</span>
						<span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;style-loader&#39;</span><span class="token punctuation">,</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>
					<span class="token punctuation">{</span>
						<span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;css-loader&#39;</span><span class="token punctuation">,</span>
						<span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
							<span class="token literal-property property">importLoaders</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
						<span class="token punctuation">}</span><span class="token punctuation">,</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>
					<span class="token punctuation">{</span>
						<span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;postcss-loader&#39;</span><span class="token punctuation">,</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶ååœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º <code>postcss.config.js</code>:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;autoprefixer&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;postcss-nested&#39;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ’ä»¶ <code>autoprefixer</code> æä¾›è‡ªåŠ¨ç»™æ ·å¼åŠ å‰ç¼€å»å…¼å®¹æµè§ˆå™¨ï¼Œ<code>postcss-nested</code> æä¾›ç¼–å†™åµŒå¥—çš„æ ·å¼è¯­æ³•ã€‚</p><p>æœ€åï¼Œåœ¨ <code>package.json</code> å†…å¢åŠ å¦‚ä¸‹å®ä¾‹å†…å®¹ï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token property">&quot;browserslist&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token string">&quot;&gt; 1%&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;last 2 versions&quot;</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ•°ç»„å†…çš„å€¼å¯¹åº”çš„å«ä¹‰ï¼š</p><ol><li><p><code>last 2 versions</code>: æ¯ä¸ªæµè§ˆå™¨ä¸­æœ€æ–°çš„ä¸¤ä¸ªç‰ˆæœ¬ã€‚</p></li><li><p><code>&gt; 1%</code> or <code>&gt;= 1%</code>: å…¨çƒæµè§ˆå™¨ä½¿ç”¨ç‡å¤§äº 1%æˆ–å¤§äºç­‰äº 1%ã€‚</p></li></ol><ul><li><strong>CSS æ¨¡å—</strong></li></ul><p>ç›®å‰è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å¤šäººç¼–å†™çš„æ ·å¼å¯èƒ½ä¼šå†²çªï¼Œå¼€å¯ CSS æ¨¡å—å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚<code>webpack.config.js</code>é…ç½®ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token punctuation">{</span>
			<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
			<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
				<span class="token string">&#39;style-loader&#39;</span><span class="token punctuation">,</span>
				<span class="token punctuation">{</span>
					<span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;css-loader&#39;</span><span class="token punctuation">,</span>
					<span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
						<span class="token comment">// å¼€å¯cssæ¨¡å—</span>
						<span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token string">&#39;postcss-loader&#39;</span><span class="token punctuation">,</span>
			<span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åŠ å…¥é¡¹ç›®é‡Œæœ‰æ ·å¼æ–‡ä»¶ <code>style.css</code>:</p><div class="language-css line-numbers-mode" data-ext="css"><pre class="language-css"><code><span class="token selector">body</span> <span class="token punctuation">{</span>
	<span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
	<span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
	<span class="token selector">.box</span> <span class="token punctuation">{</span>
		<span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
		<span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
		<span class="token property">background</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ js æ–‡ä»¶é‡Œå¯¼å…¥ css æ–‡ä»¶ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// å¼€å¯ css æ¨¡å—åï¼Œå¯ä»¥å¯¼å…¥æ¨¡å—</span>
<span class="token keyword">import</span> style <span class="token keyword">from</span> <span class="token string">&#39;./style.css&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;div&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">&#39;hello webpack&#39;</span><span class="token punctuation">;</span>

<span class="token comment">// style é‡Œå¯ä»¥è¯†åˆ« class æ ·å¼</span>
div<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>style<span class="token punctuation">.</span>box<span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¹Ÿå¯ä»¥éƒ¨åˆ†å¼€å¯ CSS æ¨¡å—æ¨¡å¼ï¼Œæ¯”å¦‚å…¨å±€æ ·å¼å¯ä»¥å† ä»¥ <code>.global</code>å‰ç¼€ï¼Œå¦‚ï¼š</p><ol><li><p>*.global.css æ™®é€šæ¨¡å¼</p></li><li><p>*.css css module æ¨¡å¼</p></li></ol><p>è¿™é‡Œç»Ÿä¸€ç”¨ global å…³é”®è¯è¿›è¡Œè¯†åˆ«ã€‚ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ–‡ä»¶ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// css module</span>
<span class="token punctuation">{</span>
  <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">^(?!.*\\.global).*\\.css</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;style-loader&#39;</span>
    <span class="token punctuation">}</span>ï¼Œ
    <span class="token punctuation">{</span>
      <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;css-loader&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">localIdentName</span><span class="token operator">:</span> <span class="token string">&#39;[hash:base64:6]&#39;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;postcss-loader&#39;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">exclude</span><span class="token operator">:</span><span class="token punctuation">[</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;..&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;node_modules&#39;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token comment">// æ™®é€šæ¨¡å¼</span>
<span class="token punctuation">{</span>
  <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">^(.*\\.global).*\\.css</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;style-loader&#39;</span>
    <span class="token punctuation">}</span>ï¼Œ
    <span class="token punctuation">{</span>
      <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;css-loader&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;postcss-loader&#39;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">exclude</span><span class="token operator">:</span><span class="token punctuation">[</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;..&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;node_modules&#39;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-3-2-web-works" tabindex="-1"><a class="header-anchor" href="#_2-3-2-web-works" aria-hidden="true">#</a> 2.3.2 Web Works</h3><p>æœ‰æ—¶æˆ‘ä»¬éœ€è¦åœ¨å®¢æˆ·ç«¯è¿›è¡Œå¤§é‡çš„è¿ç®—ï¼Œä½†åˆä¸æƒ³è®©å®ƒé˜»å¡æˆ‘ä»¬çš„ js ä¸»çº¿ç¨‹ã€‚ä½ å¯èƒ½ç¬¬ä¸€æ—¶é—´è€ƒè™‘åˆ°çš„æ˜¯å¼‚æ­¥ã€‚ ä½†äº‹å®ä¸Šï¼Œè¿ç®—é‡è¿‡å¤§(æ‰§è¡Œæ—¶é—´è¿‡é•¿)çš„å¼‚æ­¥ä¹Ÿä¼šé˜»å¡ js äº‹ä»¶å¾ªç¯ï¼Œç”šè‡³ä¼šå¯¼è‡´æµè§ˆå™¨å‡æ­»çŠ¶æ€ã€‚ è¿™æ—¶å€™ï¼ŒHTML5 çš„æ–°ç‰¹æ€§ WebWorker å°±æ´¾ä¸Šäº†ç”¨åœºã€‚ åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬ç®€å•çš„äº†è§£ä¸‹è¿™ä¸ªç‰¹æ€§ã€‚</p><p>html5 ä¹‹å‰ï¼Œæ‰“å¼€ä¸€ä¸ªå¸¸è§„çš„ç½‘é¡µï¼Œæµè§ˆå™¨ä¼šå¯ç”¨å‡ ä¸ªçº¿ç¨‹ï¼Ÿ ä¸€èˆ¬è€Œè¨€ï¼Œè‡³å°‘å­˜åœ¨ä¸‰ä¸ªçº¿ç¨‹(å…¬ç”¨çº¿ç¨‹ä¸è®¡å…¥åœ¨å†…): åˆ†åˆ«æ˜¯ js å¼•æ“çº¿ç¨‹(å¤„ç† js)ã€GUI æ¸²æŸ“çº¿ç¨‹(æ¸²æŸ“é¡µé¢)ã€æµè§ˆå™¨äº‹ä»¶è§¦å‘çº¿ç¨‹(æ§åˆ¶äº¤äº’)ã€‚</p><p>å½“ä¸€æ®µ JS è„šæœ¬é•¿æ—¶é—´å ç”¨ç€å¤„ç†æœº,å°±ä¼šæŒ‚èµ·æµè§ˆå™¨çš„ GUI æ›´æ–°ï¼Œè€Œåé¢çš„äº‹ä»¶å“åº”ä¹Ÿè¢«æ’åœ¨é˜Ÿåˆ—ä¸­å¾—ä¸åˆ°å¤„ç†ï¼Œä»è€Œé€ æˆäº†æµè§ˆå™¨è¢«é”å®šè¿›å…¥å‡æ­»çŠ¶æ€ã€‚</p><p>ç°åœ¨å¦‚æœé‡åˆ°äº†è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥åšçš„ä¸ä»…ä»…æ˜¯ä¼˜åŒ–ä»£ç â€”â€”â€”â€”html5 æä¾›äº†è§£å†³æ–¹æ¡ˆï¼Œwebworkerã€‚</p><p>webWorkers æä¾›äº† js çš„åå°å¤„ç†çº¿ç¨‹çš„ APIï¼Œå®ƒå…è®¸å°†å¤æ‚è€—æ—¶çš„å•çº¯ js é€»è¾‘å¤„ç†æ”¾åœ¨æµè§ˆå™¨åå°çº¿ç¨‹ä¸­è¿›è¡Œå¤„ç†ï¼Œè®© js çº¿ç¨‹ä¸é˜»å¡ UI çº¿ç¨‹çš„æ¸²æŸ“ã€‚ å¤šä¸ªçº¿ç¨‹é—´ä¹Ÿæ˜¯å¯ä»¥é€šè¿‡ç›¸åŒçš„æ–¹æ³•è¿›è¡Œæ•°æ®ä¼ é€’ã€‚</p><p>å®ƒçš„ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//new Worker(scriptURL: string | URL, options?: WorkerOptions)</span>
<span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token string">&#39;someWorker.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œéœ€è¦å•ç‹¬å†™ä¸€ä¸ª js è„šæœ¬ï¼Œç„¶åä½¿ç”¨ new Worker æ¥åˆ›å»ºä¸€ä¸ª Work çº¿ç¨‹å®ä¾‹ã€‚ è¿™æ„å‘³ç€å¹¶ä¸æ˜¯å°†è¿™ä¸ªè„šæœ¬å½“åšä¸€ä¸ªæ¨¡å—å¼•å…¥è¿›æ¥ï¼Œè€Œæ˜¯å•ç‹¬å¼€ä¸€ä¸ªçº¿ç¨‹å»æ‰§è¡Œè¿™ä¸ªè„šæœ¬ã€‚</p><p>æˆ‘ä»¬çŸ¥é“ï¼Œå¸¸è§„æ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬çš„ webpack å·¥ç¨‹åŒ–ç¯å¢ƒåªä¼šæ‰“åŒ…å‡ºä¸€ä¸ª bundle.jsï¼Œé‚£æˆ‘ä»¬çš„ worker è„šæœ¬æ€ä¹ˆåŠï¼Ÿ ä¹Ÿè®¸ä½ ä¼šæƒ³åˆ°è®¾ç½®å¤šå…¥å£(Entry)å¤šå‡ºå£(ouotput)çš„æ–¹å¼ã€‚ äº‹å®ä¸Šä¸éœ€è¦é‚£ä¹ˆéº»çƒ¦ï¼Œwebpack4 çš„æ—¶å€™å°±æä¾›äº† worker-loader ä¸“é—¨é…ç½® webWorkerã€‚ ä»¤äººå¼€å¿ƒçš„æ˜¯ï¼Œwebpack5 ä¹‹åå°±ä¸éœ€è¦ç”¨ loader å•¦ï¼Œå› ä¸º webpack5 å†…ç½®äº†è¿™ä¸ªåŠŸèƒ½ã€‚ æˆ‘ä»¬æ¥è¯•éªŒä¸€ä¸‹ï¼š</p><ul><li>ç¬¬ä¸€æ­¥ åˆ›å»ºä¸€ä¸ª work è„šæœ¬ work.js,æˆ‘ä»¬ç”šè‡³ä¸éœ€è¦å†™ä»»ä½•å†…å®¹ï¼Œæˆ‘ä»¬çš„é‡ç‚¹ä¸æ˜¯ webWorker çš„ä½¿ç”¨ï¼Œè€Œæ˜¯åœ¨ webpack ç¯å¢ƒä¸­ä½¿ç”¨è¿™ä¸ªç‰¹æ€§ã€‚ å½“ç„¶ï¼Œä¹Ÿå¯ä»¥å†™ç‚¹ä»€ä¹ˆï¼Œæ¯”å¦‚ï¼š</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>self<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span> question <span class="token punctuation">}</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	self<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">answer</span><span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>åœ¨ <code>index.js</code> ä¸­ä½¿ç”¨å®ƒ</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// ä¸‹é¢çš„ä»£ç å±äºä¸šåŠ¡é€»è¾‘</span>
<span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">&#39;./work.js&#39;</span><span class="token punctuation">,</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
worker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">question</span><span class="token operator">:</span> <span class="token string">&#39;hiï¼Œé‚£è¾¹çš„workderçº¿ç¨‹ï¼Œè¯·å‘Šè¯‰æˆ‘ä»Šå¤©çš„å¹¸è¿æ•°å­—æ˜¯å¤šå°‘ï¼Ÿ&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
worker<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span> answer <span class="token punctuation">}</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>answer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>(i<wbr>mport.meta.url è¿™ä¸ªå‚æ•°èƒ½å¤Ÿé”å®šæˆ‘ä»¬å½“å‰çš„è¿™ä¸ªæ¨¡å—â€”â€”æ³¨æ„ï¼Œå®ƒä¸èƒ½åœ¨ commonjs ä¸­ä½¿ç”¨ã€‚)</p><p>è¿™æ—¶å€™æˆ‘ä»¬æ‰§è¡Œæ‰“åŒ…å‘½ä»¤ï¼Œä¼šå‘ç°,dist ç›®å½•ä¸‹é™¤äº† bundle.js ä¹‹å¤–ï¼Œè¿˜æœ‰å¦å¤–ä¸€ä¸ª xxx.bundle.js! è¿™è¯´æ˜æˆ‘ä»¬çš„ webpack5 è‡ªåŠ¨çš„å°†è¢« new Work ä½¿ç”¨çš„è„šæœ¬å•ç‹¬æ‰“å‡ºäº†ä¸€ä¸ª bundleã€‚</p><p>æˆ‘ä»¬åŠ ä¸Šåˆšæ‰çš„é—®ç­”ä»£ç ï¼Œæ‰§è¡Œ npm run devï¼Œå‘ç°å®ƒæ˜¯èƒ½å¤Ÿæ­£å¸¸å·¥ä½œã€‚ å¹¶ä¸”åœ¨ network é‡Œä¹Ÿå¯ä»¥å‘ç°å¤šäº†ä¸€ä¸ª src_worker_js.bundle.jsã€‚</p><p>æ€»ç»“ï¼š webpack5 ä»¥æ¥å†…ç½®äº†å¾ˆå¤šåŠŸèƒ½ï¼Œè®©æˆ‘ä»¬ä¸éœ€è¦è¿‡å¤šçš„é…ç½®ï¼Œæ¯”å¦‚ä¹‹å‰è®²è¿‡çš„ hot æ¨¡å¼ï¼Œå’Œç°åœ¨çš„ web workderã€‚</p><h3 id="_2-3-3-typescript" tabindex="-1"><a class="header-anchor" href="#_2-3-3-typescript" aria-hidden="true">#</a> 2.3.3 TypeScript</h3><p>åœ¨å‰ç«¯ç”Ÿæ€é‡Œï¼ŒTS æ‰®æ¼”ç€è¶Šæ¥è¶Šé‡è¦çš„è§’è‰²ã€‚ æˆ‘ä»¬ç›´å…¥æ­£é¢˜ï¼Œè®²ä¸‹å¦‚ä½•åœ¨ webpack å·¥ç¨‹åŒ–ç¯å¢ƒä¸­é›†æˆ TSã€‚</p><p>é¦–å…ˆï¼Œå½“ç„¶æ˜¯å®‰è£…æˆ‘ä»¬çš„ ts å’Œå¯¹åº”çš„ loaderã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev typescript ts-loader
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ·»åŠ ä¸€ä¸ª ts çš„é…ç½®æ–‡ä»¶â€”â€”â€”â€”tsconfig.jsonï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ ts è‡ªå¸¦çš„å·¥å…·æ¥è‡ªåŠ¨åŒ–ç”Ÿæˆå®ƒã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>npx tsc <span class="token parameter variable">--init</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æˆ‘ä»¬å‘ç°ç”Ÿæˆäº†ä¸€ä¸ª tsconfig.jsonï¼Œé‡Œé¢æ³¨é‡Šæ‰äº†ç»å¤§å¤šæ•°é…ç½®ã€‚ ç°åœ¨ï¼Œæ ¹æ®æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœæ¥æ‰“å¼€å¯¹åº”çš„é…ç½®ã€‚</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;outDir&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./dist/&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;noImplicitAny&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token property">&quot;sourceMap&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;es6&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token string">&quot;es5&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;jsx&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;allowJs&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token property">&quot;moduleResolution&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node&quot;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¥½äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ–°å¢ä¸€ä¸ª src/index.tsï¼Œå†…ç½®ä¸€äº›å†…å®¹ã€‚ ç„¶åæˆ‘ä»¬åˆ«å¿˜äº†æ›´æ”¹æˆ‘ä»¬çš„ entry åŠé…ç½®å¯¹åº”çš„ loderã€‚ å½“ç„¶ï¼Œè¿˜æœ‰ resolve.extensionsï¼Œå°†.ts æ”¾åœ¨.js ä¹‹å‰ï¼Œè¿™æ ·å®ƒä¼šå…ˆæ‰¾.tsã€‚ æ³¨æ„ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨äº† sourceMapï¼Œä¸€å®šè®°å¾—å’Œä¸Šé¢çš„ ts é…ç½®ä¸€æ ·ï¼Œè®¾ç½® sourcemap ä¸º trueã€‚ ä¹Ÿåˆ«å¿˜è®°åœ¨æˆ‘ä»¬çš„ webpack.config.js é‡Œï¼Œæ·»åŠ  sourcemap,å°±åƒæˆ‘ä»¬ä¹‹å‰è¯¾ç¨‹é‡Œè®²çš„é‚£æ ·ã€‚ æ›´æ”¹å¦‚ä¸‹ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&#39;./src/index.ts&#39;</span><span class="token punctuation">,</span>
	<span class="token literal-property property">devtool</span><span class="token operator">:</span> <span class="token string">&#39;inline-source-map&#39;</span><span class="token punctuation">,</span>
	<span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(ts|tsx)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token string">&#39;ts-loader&#39;</span><span class="token punctuation">,</span>
				<span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token literal-property property">resolve</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">extensions</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;.tsx&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;.ts&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;bundle.js&#39;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;dist&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡Œæˆ‘ä»¬çš„é¡¹ç›®ï¼Œæˆ‘ä»¬å‘ç°å®Œå…¨æ²¡æœ‰é—®é¢˜å‘¢ï¼</p><ul><li>ä½¿ç”¨ç¬¬ä¸‰æ–¹ç±»åº“</li></ul><p>åœ¨ä» npm ä¸Šå®‰è£…ç¬¬ä¸‰æ–¹åº“æ—¶ï¼Œä¸€å®šè¦è®°å¾—åŒæ—¶å®‰è£…è¿™ä¸ªåº“çš„ç±»å‹å£°æ˜æ–‡ä»¶(typing definition)ã€‚ æˆ‘ä»¬å¯ä»¥ä» TypeSearch ä¸­æ‰¾åˆ°å¹¶å®‰è£…è¿™äº›ç¬¬ä¸‰æ–¹åº“çš„ç±»å‹å£°æ˜æ–‡ä»¶(<a href="https://www.typescriptlang.org/dt/search?search=" target="_blank" rel="noopener noreferrer">https://www.typescriptlang.org/dt/search?search=<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>) ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœæƒ³å®‰è£… lodash ç±»å‹å£°æ˜æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥è¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev @types<span class="token operator">/</span>lodash
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>eslint &amp; ts</li></ul><p>æ³¨æ„ï¼Œå¦‚æœè¦ä½¿ç”¨ eslintï¼Œä½¿ç”¨åˆå§‹åŒ–å‘½ä»¤çš„æ—¶å€™ï¼Œè®°å¾—é€‰æ‹©â€œä½¿ç”¨äº† typesctiptâ€ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>npx eslint <span class="token parameter variable">--init</span>
<span class="token comment"># å¾€ä¸‹é€‰æ‹©çš„æ—¶å€™é€‰æ‹©ä½¿ç”¨äº†typesctipt</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœå·²ç»é…ç½®äº† eslintï¼Œä½†æ²¡æœ‰é…ç½® ts ç›¸å…³çš„é…ç½®ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦å…ˆå®‰è£…å¯¹åº”çš„ plugin</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> <span class="token parameter variable">-D</span>   @typescript-eslint/eslint-plugin@latest @typescript-eslint/parser@latest
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ³¨æ„å¦‚æœéœ€è¦ç”¨åˆ° react çš„è¯ï¼Œè®°å¾—ä¹Ÿè¦å®‰è£…</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> <span class="token parameter variable">-D</span>  eslint-plugin-react@latest
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>vue æˆ–è€…å…¶ä»–å¸¸ç”¨æ¡†æ¶åŒæ ·å¦‚æ­¤ï¼Œä¸€èˆ¬éƒ½ä¼šæœ‰ä¸“é—¨çš„ pluginã€‚</p><p>ç„¶åæˆ‘ä»¬é˜Ÿ.esilntrc è¿›è¡Œæ›´æ”¹~</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
    <span class="token string-property property">&quot;env&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;browser&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;es2021&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;extends&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;eslint:recommended&quot;</span><span class="token punctuation">,</span> <span class="token comment">// å¦‚æœéœ€è¦reactçš„è¯</span>
        <span class="token string">&quot;plugin:react/recommended&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;plugin:@typescript-eslint/recommended&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;parser&quot;</span><span class="token operator">:</span> <span class="token string">&quot;@typescript-eslint/parser&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;parserOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;ecmaFeatures&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string-property property">&quot;jsx&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// å¦‚æœéœ€è¦reactçš„è¯</span>
        <span class="token string-property property">&quot;ecmaVersion&quot;</span><span class="token operator">:</span> <span class="token number">13</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;sourceType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;react&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;@typescript-eslint&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;rules&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...ä¸€äº›è‡ªå®šä¹‰çš„rules</span>
        <span class="token string-property property">&quot;no-console&quot;</span><span class="token operator">:</span> <span class="token string">&quot;error&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰§è¡Œ npm run eslint è¯•ä¸€ä¸‹ï¼ å¤§åŠŸå‘Šæˆï¼</p><h2 id="_2-4-å¤šé¡µé¢åº”ç”¨" tabindex="-1"><a class="header-anchor" href="#_2-4-å¤šé¡µé¢åº”ç”¨" aria-hidden="true">#</a> 2.4 å¤šé¡µé¢åº”ç”¨</h2><h3 id="_2-4-1-entry-é…ç½®" tabindex="-1"><a class="header-anchor" href="#_2-4-1-entry-é…ç½®" aria-hidden="true">#</a> 2.4.1 entry é…ç½®</h3><ul><li><strong>å•ä¸ªå…¥å£ï¼ˆç®€å†™ï¼‰è¯­æ³•</strong></li></ul><p>ç”¨æ³•ï¼š<code>entry: string | [string]</code></p><p><strong>webpack.config.js</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&#39;./path/to/my/entry/file.js&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>entry</code> å±æ€§çš„å•ä¸ªå…¥å£è¯­æ³•ï¼Œå‚è€ƒä¸‹é¢çš„ç®€å†™ï¼š</p><p><strong>webpack.config.js</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">main</span><span class="token operator">:</span> <span class="token string">&#39;./path/to/my/entry/file.js&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†ä¸€ä¸ªæ–‡ä»¶è·¯å¾„æ•°ç»„ä¼ é€’ç»™ <code>entry</code> å±æ€§ï¼Œè¿™å°†åˆ›å»ºä¸€ä¸ªæ‰€è°“çš„ <strong>&quot;multi-main entry&quot;</strong>ã€‚åœ¨ä½ æƒ³è¦ä¸€æ¬¡æ³¨å…¥å¤šä¸ªä¾èµ–æ–‡ä»¶ï¼Œå¹¶ä¸”å°†å®ƒä»¬çš„ä¾èµ–å…³ç³»ç»˜åˆ¶åœ¨ä¸€ä¸ª &quot;chunk&quot; ä¸­æ—¶ï¼Œè¿™ç§æ–¹å¼å°±å¾ˆæœ‰ç”¨ã€‚</p><p><strong>webpack.config.js</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;./src/file_1.js&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;./src/file_2.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;bundle.js&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“ä½ å¸Œæœ›é€šè¿‡ä¸€ä¸ªå…¥å£ï¼ˆä¾‹å¦‚ä¸€ä¸ªåº“ï¼‰ä¸ºåº”ç”¨ç¨‹åºæˆ–å·¥å…·å¿«é€Ÿè®¾ç½® webpack é…ç½®æ—¶ï¼Œå•ä¸€å…¥å£çš„è¯­æ³•æ–¹å¼æ˜¯ä¸é”™çš„é€‰æ‹©ã€‚ç„¶è€Œï¼Œä½¿ç”¨è¿™ç§è¯­æ³•æ–¹å¼æ¥æ‰©å±•æˆ–è°ƒæ•´é…ç½®çš„çµæ´»æ€§ä¸å¤§ã€‚</p><ul><li><strong>å¯¹è±¡è¯­æ³•</strong></li></ul><p>ç”¨æ³•ï¼š<code>entry: { &lt;entryChunkName&gt; string | [string] } | {}</code></p><p><strong>webpack.config.js</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">app</span><span class="token operator">:</span> <span class="token string">&#39;./src/app.js&#39;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">adminApp</span><span class="token operator">:</span> <span class="token string">&#39;./src/adminApp.js&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¹è±¡è¯­æ³•ä¼šæ¯”è¾ƒç¹çã€‚ç„¶è€Œï¼Œè¿™æ˜¯åº”ç”¨ç¨‹åºä¸­å®šä¹‰å…¥å£çš„æœ€å¯æ‰©å±•çš„æ–¹å¼ã€‚</p><p><strong>æè¿°å…¥å£çš„å¯¹è±¡ï¼š</strong></p><p>ç”¨äºæè¿°å…¥å£çš„å¯¹è±¡ã€‚ä½ å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å±æ€§ï¼š</p><ul><li><code>dependOn</code>: å½“å‰å…¥å£æ‰€ä¾èµ–çš„å…¥å£ã€‚å®ƒä»¬å¿…é¡»åœ¨è¯¥å…¥å£è¢«åŠ è½½å‰è¢«åŠ è½½ã€‚</li><li><code>filename</code>: æŒ‡å®šè¦è¾“å‡ºçš„æ–‡ä»¶åç§°ã€‚</li><li><code>import</code>: å¯åŠ¨æ—¶éœ€åŠ è½½çš„æ¨¡å—ã€‚</li><li><code>library</code>: æŒ‡å®š library é€‰é¡¹ï¼Œä¸ºå½“å‰ entry æ„å»ºä¸€ä¸ª libraryã€‚</li><li><code>runtime</code>: è¿è¡Œæ—¶ chunk çš„åå­—ã€‚å¦‚æœè®¾ç½®äº†ï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„è¿è¡Œæ—¶ chunkã€‚åœ¨ webpack 5.43.0 ä¹‹åå¯å°†å…¶è®¾ä¸º <code>false</code> ä»¥é¿å…ä¸€ä¸ªæ–°çš„è¿è¡Œæ—¶ chunkã€‚</li><li><code>publicPath</code>: å½“è¯¥å…¥å£çš„è¾“å‡ºæ–‡ä»¶åœ¨æµè§ˆå™¨ä¸­è¢«å¼•ç”¨æ—¶ï¼Œä¸ºå®ƒä»¬æŒ‡å®šä¸€ä¸ªå…¬å…± URL åœ°å€ã€‚è¯·æŸ¥çœ‹ <a href="https://webpack.docschina.org/configuration/output/#outputpublicpath" target="_blank" rel="noopener noreferrer">output.publicPath<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚</li></ul><p><strong>webpack.config.js</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">a2</span><span class="token operator">:</span> <span class="token string">&#39;dependingfile.js&#39;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">b2</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">dependOn</span><span class="token operator">:</span> <span class="token string">&#39;a2&#39;</span><span class="token punctuation">,</span>
			<span class="token keyword">import</span><span class="token operator">:</span> <span class="token string">&#39;./src/app.js&#39;</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>runtime</code> å’Œ <code>dependOn</code> ä¸åº”åœ¨åŒä¸€ä¸ªå…¥å£ä¸ŠåŒæ—¶ä½¿ç”¨ï¼Œæ‰€ä»¥å¦‚ä¸‹é…ç½®æ— æ•ˆï¼Œå¹¶ä¸”ä¼šæŠ›å‡ºé”™è¯¯ï¼š</p><p><strong>webpack.config.js</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">a2</span><span class="token operator">:</span> <span class="token string">&#39;./a&#39;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">b2</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">runtime</span><span class="token operator">:</span> <span class="token string">&#39;x2&#39;</span><span class="token punctuation">,</span>
			<span class="token literal-property property">dependOn</span><span class="token operator">:</span> <span class="token string">&#39;a2&#39;</span><span class="token punctuation">,</span>
			<span class="token keyword">import</span><span class="token operator">:</span> <span class="token string">&#39;./b&#39;</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¡®ä¿ <code>runtime</code> ä¸èƒ½æŒ‡å‘å·²å­˜åœ¨çš„å…¥å£åç§°ï¼Œä¾‹å¦‚ä¸‹é¢é…ç½®ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">a1</span><span class="token operator">:</span> <span class="token string">&#39;./a&#39;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">b1</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">runtime</span><span class="token operator">:</span> <span class="token string">&#39;a1&#39;</span><span class="token punctuation">,</span>
			<span class="token keyword">import</span><span class="token operator">:</span> <span class="token string">&#39;./b&#39;</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦å¤– <code>dependOn</code> ä¸èƒ½æ˜¯å¾ªç¯å¼•ç”¨çš„ï¼Œä¸‹é¢çš„ä¾‹å­ä¹Ÿä¼šå‡ºç°é”™è¯¯ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">a3</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token keyword">import</span><span class="token operator">:</span> <span class="token string">&#39;./a&#39;</span><span class="token punctuation">,</span>
			<span class="token literal-property property">dependOn</span><span class="token operator">:</span> <span class="token string">&#39;b3&#39;</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token literal-property property">b3</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token keyword">import</span><span class="token operator">:</span> <span class="token string">&#39;./b&#39;</span><span class="token punctuation">,</span>
			<span class="token literal-property property">dependOn</span><span class="token operator">:</span> <span class="token string">&#39;a3&#39;</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-4-2-é…ç½®-index-html-æ¨¡æ¿" tabindex="-1"><a class="header-anchor" href="#_2-4-2-é…ç½®-index-html-æ¨¡æ¿" aria-hidden="true">#</a> 2.4.2 é…ç½® index.html æ¨¡æ¿</h3><ul><li>ç”Ÿæˆå¤šä¸ª HTML æ–‡ä»¶</li></ul><p>è¦ç”Ÿæˆå¤šä¸ª HTML æ–‡ä»¶ï¼Œè¯·åœ¨æ’ä»¶æ•°ç»„ä¸­å¤šæ¬¡å£°æ˜æ’ä»¶ã€‚</p><p><strong>webpack.config.js</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&#39;index.js&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> __dirname <span class="token operator">+</span> <span class="token string">&#39;/dist&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;index_bundle.js&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// Generates default index.html</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  <span class="token comment">// Also generate a test.html</span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;test.html&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">&#39;src/assets/test.html&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ç¼–å†™è‡ªå·±çš„æ¨¡æ¿</li></ul><p>å¦‚æœé»˜è®¤ç”Ÿæˆçš„ HTML ä¸èƒ½æ»¡è¶³æ‚¨çš„éœ€è¦ï¼Œæ‚¨å¯ä»¥æä¾›è‡ªå·±çš„æ¨¡æ¿ã€‚æœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨<code>template</code>é€‰é¡¹å¹¶ä¼ é€’è‡ªå®šä¹‰ HTML æ–‡ä»¶ã€‚html ç½‘é¡µåŒ…æ’ä»¶å°†è‡ªåŠ¨å°†æ‰€æœ‰å¿…è¦çš„ CSSã€JSã€manifest å’Œ favicon æ–‡ä»¶æ³¨å…¥æ ‡è®°ä¸­ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
	<span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;Custom template&#39;</span><span class="token punctuation">,</span>
		<span class="token comment">// Load a custom template (lodash by default)</span>
		<span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">&#39;index.html&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>index.html</strong></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>&lt;%= htmlWebpackPlugin.options.title %&gt;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-4-3-å¤šé¡µé¢åº”ç”¨" tabindex="-1"><a class="header-anchor" href="#_2-4-3-å¤šé¡µé¢åº”ç”¨" aria-hidden="true">#</a> 2.4.3 å¤šé¡µé¢åº”ç”¨</h3><p><strong>webpack.config.js</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">pageOne</span><span class="token operator">:</span> <span class="token string">&#39;./src/pageOne/index.js&#39;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">pageTwo</span><span class="token operator">:</span> <span class="token string">&#39;./src/pageTwo/index.js&#39;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">pageThree</span><span class="token operator">:</span> <span class="token string">&#39;./src/pageThree/index.js&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>è¿™æ˜¯ä»€ä¹ˆï¼Ÿ</strong> æˆ‘ä»¬å‘Šè¯‰ webpack éœ€è¦ä¸‰ä¸ªç‹¬ç«‹åˆ†ç¦»çš„ä¾èµ–å›¾ï¼ˆå¦‚ä¸Šé¢çš„ç¤ºä¾‹ï¼‰ã€‚</p><p><strong>ä¸ºä»€ä¹ˆï¼Ÿ</strong> åœ¨å¤šé¡µé¢åº”ç”¨ç¨‹åºä¸­ï¼Œserver ä¼šæ‹‰å–ä¸€ä¸ªæ–°çš„ HTML æ–‡æ¡£ç»™ä½ çš„å®¢æˆ·ç«¯ã€‚é¡µé¢é‡æ–°åŠ è½½æ­¤æ–°æ–‡æ¡£ï¼Œå¹¶ä¸”èµ„æºè¢«é‡æ–°ä¸‹è½½ã€‚ç„¶è€Œï¼Œè¿™ç»™äº†æˆ‘ä»¬ç‰¹æ®Šçš„æœºä¼šå»åšå¾ˆå¤šäº‹ï¼Œä¾‹å¦‚ä½¿ç”¨ <a href="https://webpack.docschina.org/configuration/optimization/#optimizationsplitchunks" target="_blank" rel="noopener noreferrer"><code>optimization.splitChunks</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ä¸ºé¡µé¢é—´å…±äº«çš„åº”ç”¨ç¨‹åºä»£ç åˆ›å»º bundleã€‚ç”±äºå…¥å£èµ·ç‚¹æ•°é‡çš„å¢å¤šï¼Œå¤šé¡µåº”ç”¨èƒ½å¤Ÿå¤ç”¨å¤šä¸ªå…¥å£èµ·ç‚¹ä¹‹é—´çš„å¤§é‡ä»£ç /æ¨¡å—ï¼Œä»è€Œå¯ä»¥æå¤§åœ°ä»è¿™äº›æŠ€æœ¯ä¸­å—ç›Šã€‚</p><h2 id="_2-5-tree-shaking" tabindex="-1"><a class="header-anchor" href="#_2-5-tree-shaking" aria-hidden="true">#</a> 2.5 Tree shaking</h2><p><em>tree shaking</em> æ˜¯ä¸€ä¸ªæœ¯è¯­ï¼Œé€šå¸¸ç”¨äºæè¿°ç§»é™¤ JavaScript ä¸Šä¸‹æ–‡ä¸­çš„æœªå¼•ç”¨ä»£ç (dead-code)ã€‚å®ƒä¾èµ–äº ES2015 æ¨¡å—è¯­æ³•çš„ <a href="http://exploringjs.com/es6/ch_modules.html#static-module-structure" target="_blank" rel="noopener noreferrer">é™æ€ç»“æ„<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ç‰¹æ€§ï¼Œä¾‹å¦‚ <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import" target="_blank" rel="noopener noreferrer"><code>import</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> å’Œ <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/export" target="_blank" rel="noopener noreferrer"><code>export</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚è¿™ä¸ªæœ¯è¯­å’Œæ¦‚å¿µå®é™…ä¸Šæ˜¯ç”± ES2015 æ¨¡å—æ‰“åŒ…å·¥å…· <a href="https://github.com/rollup/rollup" target="_blank" rel="noopener noreferrer">rollup<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> æ™®åŠèµ·æ¥çš„ã€‚</p><p>webpack 2 æ­£å¼ç‰ˆæœ¬å†…ç½®æ”¯æŒ ES2015 æ¨¡å—ï¼ˆä¹Ÿå«åš <em>harmony modules</em>ï¼‰å’Œæœªä½¿ç”¨æ¨¡å—æ£€æµ‹èƒ½åŠ›ã€‚æ–°çš„ webpack 4 æ­£å¼ç‰ˆæœ¬æ‰©å±•äº†æ­¤æ£€æµ‹èƒ½åŠ›ï¼Œé€šè¿‡ <code>package.json</code> çš„ <code>&quot;sideEffects&quot;</code> å±æ€§ä½œä¸ºæ ‡è®°ï¼Œå‘ compiler æä¾›æç¤ºï¼Œè¡¨æ˜é¡¹ç›®ä¸­çš„å“ªäº›æ–‡ä»¶æ˜¯ &quot;pure(çº¯æ­£ ES2015 æ¨¡å—)&quot;ï¼Œç”±æ­¤å¯ä»¥å®‰å…¨åœ°åˆ é™¤æ–‡ä»¶ä¸­æœªä½¿ç”¨çš„éƒ¨åˆ†ã€‚</p><h3 id="_2-5-1-tree-shaking-å®éªŒ" tabindex="-1"><a class="header-anchor" href="#_2-5-1-tree-shaking-å®éªŒ" aria-hidden="true">#</a> 2.5.1 tree-shaking å®éªŒ</h3><ul><li><strong>src/math.js</strong></li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">square</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> x <span class="token operator">*</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">cube</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> x <span class="token operator">*</span> x <span class="token operator">*</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>éœ€è¦å°† <code>mode</code> é…ç½®è®¾ç½®æˆ<a href="https://webpack.docschina.org/configuration/mode/#mode-development" target="_blank" rel="noopener noreferrer">development<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼Œä»¥ç¡®å®š bundle ä¸ä¼šè¢«å‹ç¼©ï¼š</p><ul><li><strong>webpack.config.js</strong></li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">,</span>
	<span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;bundle.js&#39;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;dist&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;development&#39;</span><span class="token punctuation">,</span>
	<span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">usedExports</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é…ç½®å®Œè¿™äº›åï¼Œæ›´æ–°å…¥å£è„šæœ¬ï¼Œä½¿ç”¨å…¶ä¸­ä¸€ä¸ªæ–°æ–¹æ³•ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> cube <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./math.js&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">component</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;pre&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;Hello webpack!&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;5 cubed is equal to &#39;</span> <span class="token operator">+</span> <span class="token function">cube</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;\n\n&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> element<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼Œæˆ‘ä»¬<strong>æ²¡æœ‰ä» <code>src/math.js</code> æ¨¡å—ä¸­ <code>import</code> å¦å¤–ä¸€ä¸ª <code>square</code> æ–¹æ³•</strong>ã€‚è¿™ä¸ªå‡½æ•°å°±æ˜¯æ‰€è°“çš„â€œæœªå¼•ç”¨ä»£ç (dead code)â€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåº”è¯¥åˆ é™¤æ‰æœªè¢«å¼•ç”¨çš„ <code>export</code>ã€‚</p><p>ç°åœ¨è¿è¡Œ npm script <code>npm run build</code>ï¼Œå¹¶æŸ¥çœ‹è¾“å‡ºçš„ bundleï¼š</p><ul><li>**dist/bundle.js **</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">/* 1 */</span>
<span class="token doc-comment comment">/***/ (function (module, __webpack_exports__, __webpack_require__) <span class="token punctuation">{</span>
	&#39;use strict&#39;;
	/* unused harmony export square */</span>
	<span class="token comment">/* harmony export (immutable) */</span> __webpack_exports__<span class="token punctuation">[</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> cube<span class="token punctuation">;</span>
	<span class="token keyword">function</span> <span class="token function">square</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> x <span class="token operator">*</span> x<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">function</span> <span class="token function">cube</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> x <span class="token operator">*</span> x <span class="token operator">*</span> x<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼Œä¸Šé¢çš„ <code>unused harmony export square</code> æ³¨é‡Šã€‚å¦‚æœä½ è§‚å¯Ÿå®ƒä¸‹é¢çš„ä»£ç ï¼Œä½ ä¼šæ³¨æ„åˆ°è™½ç„¶æˆ‘ä»¬æ²¡æœ‰å¼•ç”¨ <code>square</code>ï¼Œä½†å®ƒä»ç„¶è¢«åŒ…å«åœ¨ bundle ä¸­ã€‚</p><ul><li><strong>mode: production</strong></li></ul><p>å¦‚æœæ­¤æ—¶ä¿®æ”¹é…ç½®ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">,</span>
	<span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;bundle.js&#39;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;dist&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;production&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰“åŒ…åå‘ç°æ— ç”¨çš„ä»£ç å…¨éƒ¨éƒ½æ¶ˆå¤±äº†ã€‚</p><p>å¤„äºå¥½å¥‡ï¼Œwebpack æ˜¯å¦‚ä½•å®Œç¾çš„é¿å¼€æ²¡æœ‰ä½¿ç”¨çš„ä»£ç çš„å‘¢ï¼Ÿ</p><p>å¾ˆç®€å•ï¼šå°±æ˜¯ Webpack æ²¡çœ‹åˆ°ä½ ä½¿ç”¨çš„ä»£ç ã€‚Webpack è·Ÿè¸ªæ•´ä¸ªåº”ç”¨ç¨‹åºçš„ <code>import/export</code> è¯­å¥ï¼Œå› æ­¤ï¼Œå¦‚æœå®ƒçœ‹åˆ°å¯¼å…¥çš„ä¸œè¥¿æœ€ç»ˆæ²¡æœ‰è¢«ä½¿ç”¨ï¼Œå®ƒä¼šè®¤ä¸ºé‚£æ˜¯æœªå¼•ç”¨ä»£ç (æˆ–å«åšâ€œæ­»ä»£ç â€â€”â€”<code>dead-code</code>)ï¼Œå¹¶ä¼šå¯¹å…¶è¿›è¡Œ tree-shaking ã€‚</p><p>æ­»ä»£ç å¹¶ä¸æ€»æ˜¯é‚£ä¹ˆæ˜ç¡®çš„ã€‚ä¸‹é¢æ˜¯ä¸€äº›æ­»ä»£ç å’Œâ€œæ´»â€ä»£ç çš„ä¾‹å­ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// è¿™ä¼šè¢«çœ‹ä½œâ€œæ´»â€ä»£ç ï¼Œä¸ä¼šåš tree-shaking</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> add <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./math&#39;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// å¯¼å…¥å¹¶èµ‹å€¼ç»™ JavaScript å¯¹è±¡ï¼Œä½†åœ¨æ¥ä¸‹æ¥çš„ä»£ç é‡Œæ²¡æœ‰ç”¨åˆ°</span>
<span class="token comment">// è¿™å°±ä¼šè¢«å½“åšâ€œæ­»â€ä»£ç ï¼Œä¼šè¢« tree-shaking</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> add<span class="token punctuation">,</span> minus <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./math&#39;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// å¯¼å…¥ä½†æ²¡æœ‰èµ‹å€¼ç»™ JavaScript å¯¹è±¡ï¼Œä¹Ÿæ²¡æœ‰åœ¨ä»£ç é‡Œç”¨åˆ°</span>
<span class="token comment">// è¿™ä¼šè¢«å½“åšâ€œæ­»â€ä»£ç ï¼Œä¼šè¢« tree-shaking</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> add<span class="token punctuation">,</span> minus <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./math&#39;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;hello webpack&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// å¯¼å…¥æ•´ä¸ªåº“ï¼Œä½†æ˜¯æ²¡æœ‰èµ‹å€¼ç»™ JavaScript å¯¹è±¡ï¼Œä¹Ÿæ²¡æœ‰åœ¨ä»£ç é‡Œç”¨åˆ°</span>
<span class="token comment">// éå¸¸å¥‡æ€ªï¼Œè¿™ç«Ÿç„¶è¢«å½“åšâ€œæ´»â€ä»£ç ï¼Œå› ä¸º Webpack å¯¹åº“çš„å¯¼å…¥å’Œæœ¬åœ°ä»£ç å¯¼å…¥çš„å¤„ç†æ–¹å¼ä¸åŒã€‚</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> add<span class="token punctuation">,</span> minus <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./math&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&#39;lodash&#39;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;hello webpack&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-5-2-sideeffects" tabindex="-1"><a class="header-anchor" href="#_2-5-2-sideeffects" aria-hidden="true">#</a> 2.5.2 sideEffects</h3><p>æ³¨æ„ Webpack ä¸èƒ½ç™¾åˆ†ç™¾å®‰å…¨åœ°è¿›è¡Œ tree-shakingã€‚æœ‰äº›æ¨¡å—å¯¼å…¥ï¼Œåªè¦è¢«å¼•å…¥ï¼Œå°±ä¼šå¯¹åº”ç”¨ç¨‹åºäº§ç”Ÿé‡è¦çš„å½±å“ã€‚ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­å°±æ˜¯å…¨å±€æ ·å¼è¡¨ï¼Œæˆ–è€…è®¾ç½®å…¨å±€é…ç½®çš„ JavaScript æ–‡ä»¶ã€‚</p><p>Webpack è®¤ä¸ºè¿™æ ·çš„æ–‡ä»¶æœ‰â€œå‰¯ä½œç”¨â€ã€‚å…·æœ‰å‰¯ä½œç”¨çš„æ–‡ä»¶ä¸åº”è¯¥åš tree-shakingï¼Œå› ä¸ºè¿™å°†ç ´åæ•´ä¸ªåº”ç”¨ç¨‹åºã€‚</p><p>Webpack çš„è®¾è®¡è€…æ¸…æ¥šåœ°è®¤è¯†åˆ°ä¸çŸ¥é“å“ªäº›æ–‡ä»¶æœ‰å‰¯ä½œç”¨çš„æƒ…å†µä¸‹æ‰“åŒ…ä»£ç çš„é£é™©ï¼Œå› æ­¤ webpack4 é»˜è®¤åœ°å°†æ‰€æœ‰ä»£ç è§†ä¸ºæœ‰å‰¯ä½œç”¨ã€‚è¿™å¯ä»¥ä¿æŠ¤ä½ å…äºåˆ é™¤å¿…è¦çš„æ–‡ä»¶ï¼Œä½†è¿™æ„å‘³ç€ Webpack çš„é»˜è®¤è¡Œä¸ºå®é™…ä¸Šæ˜¯ä¸è¿›è¡Œ tree-shakingã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ webpack5 é»˜è®¤ä¼šè¿›è¡Œ tree-shakingã€‚</p><p>å¦‚ä½•å‘Šè¯‰ Webpack ä½ çš„ä»£ç æ— å‰¯ä½œç”¨ï¼Œå¯ä»¥é€šè¿‡ package.json æœ‰ä¸€ä¸ªç‰¹æ®Šçš„å±æ€§ sideEffectsï¼Œå°±æ˜¯ä¸ºæ­¤è€Œå­˜åœ¨çš„ã€‚</p><p>å®ƒæœ‰ä¸‰ä¸ªå¯èƒ½çš„å€¼ï¼š</p><ul><li><p>true</p><p>å¦‚æœä¸æŒ‡å®šå…¶ä»–å€¼çš„è¯ã€‚è¿™æ„å‘³ç€æ‰€æœ‰çš„æ–‡ä»¶éƒ½æœ‰å‰¯ä½œç”¨ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰ä¸€ä¸ªæ–‡ä»¶å¯ä»¥ tree-shakingã€‚</p></li><li><p>false</p><p>å‘Šè¯‰ Webpack æ²¡æœ‰æ–‡ä»¶æœ‰å‰¯ä½œç”¨ï¼Œæ‰€æœ‰æ–‡ä»¶éƒ½å¯ä»¥ tree-shakingã€‚</p></li><li><p>æ•°ç»„[â€¦]</p><p>æ˜¯æ–‡ä»¶è·¯å¾„æ•°ç»„ã€‚å®ƒå‘Šè¯‰ webpackï¼Œé™¤äº†æ•°ç»„ä¸­åŒ…å«çš„æ–‡ä»¶å¤–ï¼Œä½ çš„ä»»ä½•æ–‡ä»¶éƒ½æ²¡æœ‰å‰¯ä½œç”¨ã€‚å› æ­¤ï¼Œé™¤äº†æŒ‡å®šçš„æ–‡ä»¶ä¹‹å¤–ï¼Œå…¶ä»–æ–‡ä»¶éƒ½å¯ä»¥å®‰å…¨åœ°è¿›è¡Œ tree-shakingã€‚</p></li></ul><p>webpack4 æ›¾ç»ä¸è¿›è¡Œå¯¹ CommonJs å¯¼å‡ºå’Œ require() è°ƒç”¨æ—¶çš„å¯¼å‡ºä½¿ç”¨åˆ†æã€‚webpack 5 å¢åŠ äº†å¯¹ä¸€äº› CommonJs æ„é€ çš„æ”¯æŒï¼Œå…è®¸æ¶ˆé™¤æœªä½¿ç”¨çš„ CommonJs å¯¼å‡ºï¼Œå¹¶ä» require() è°ƒç”¨ä¸­è·Ÿè¸ªå¼•ç”¨çš„å¯¼å‡ºåç§°ã€‚</p><h2 id="_2-6-æ¸è¿›å¼ç½‘ç»œåº”ç”¨ç¨‹åº-pwa" tabindex="-1"><a class="header-anchor" href="#_2-6-æ¸è¿›å¼ç½‘ç»œåº”ç”¨ç¨‹åº-pwa" aria-hidden="true">#</a> 2.6 æ¸è¿›å¼ç½‘ç»œåº”ç”¨ç¨‹åº PWA</h2><p>æ¸è¿›å¼ç½‘ç»œåº”ç”¨ç¨‹åº(progressive web application - PWA)ï¼Œæ˜¯ä¸€ç§å¯ä»¥æä¾›ç±»ä¼¼äº native app(åŸç”Ÿåº”ç”¨ç¨‹åº) ä½“éªŒçš„ web app(ç½‘ç»œåº”ç”¨ç¨‹åº)ã€‚PWA å¯ä»¥ç”¨æ¥åšå¾ˆå¤šäº‹ã€‚å…¶ä¸­æœ€é‡è¦çš„æ˜¯ï¼Œåœ¨**ç¦»çº¿(offline)**æ—¶åº”ç”¨ç¨‹åºèƒ½å¤Ÿç»§ç»­è¿è¡ŒåŠŸèƒ½ã€‚è¿™æ˜¯é€šè¿‡ä½¿ç”¨åä¸º <a href="https://developers.google.com/web/fundamentals/primers/service-workers/" target="_blank" rel="noopener noreferrer">Service Workers<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> çš„ web æŠ€æœ¯æ¥å®ç°çš„ã€‚</p><h3 id="_2-6-1-éç¦»çº¿ç¯å¢ƒä¸‹è¿è¡Œ" tabindex="-1"><a class="header-anchor" href="#_2-6-1-éç¦»çº¿ç¯å¢ƒä¸‹è¿è¡Œ" aria-hidden="true">#</a> 2.6.1 éç¦»çº¿ç¯å¢ƒä¸‹è¿è¡Œ</h3><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä¸€ç›´æ˜¯ç›´æ¥æŸ¥çœ‹æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿçš„è¾“å‡ºç»“æœã€‚é€šå¸¸æƒ…å†µä¸‹ï¼ŒçœŸæ­£çš„ç”¨æˆ·æ˜¯é€šè¿‡ç½‘ç»œè®¿é—® web appï¼›ç”¨æˆ·çš„æµè§ˆå™¨ä¼šä¸ä¸€ä¸ªæä¾›æ‰€éœ€èµ„æºï¼ˆä¾‹å¦‚ï¼Œ<code>.html</code>, <code>.js</code> å’Œ <code>.css</code> æ–‡ä»¶ï¼‰çš„ <strong>server</strong> é€šè®¯ã€‚</p><p>æˆ‘ä»¬é€šè¿‡æ­å»ºä¸€ä¸ªæ‹¥æœ‰æ›´å¤šåŸºç¡€ç‰¹æ€§çš„ server æ¥æµ‹è¯•ä¸‹è¿™ç§ç¦»çº¿ä½“éªŒã€‚è¿™é‡Œä½¿ç”¨ <a href="https://www.npmjs.com/package/http-server" target="_blank" rel="noopener noreferrer">http-server<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> packageï¼š<code>npm install http-server --save-dev</code>ã€‚è¿˜è¦ä¿®æ”¹ <code>package.json</code> çš„ <code>scripts</code> éƒ¨åˆ†ï¼Œæ¥æ·»åŠ ä¸€ä¸ª <code>start</code> scriptï¼š</p><p><strong>package.json</strong></p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  ...
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http-server dist&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  ...
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œ<a href="https://webpack.docschina.org/configuration/dev-server/" target="_blank" rel="noopener noreferrer">webpack DevServer<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ä¼šå†™å…¥åˆ°å†…å­˜ã€‚æˆ‘ä»¬éœ€è¦å¯ç”¨ <a href="https://webpack.docschina.org/configuration/dev-server/#devserverdevmiddleware" target="_blank" rel="noopener noreferrer">devserverdevmiddleware.writeToDisk<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> é…ç½®é¡¹ï¼Œæ¥è®© http-server å¤„ç† <code>./dist</code> ç›®å½•ä¸­çš„æ–‡ä»¶ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">devMiddleware</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">index</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">writeToDisk</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœä½ ä¹‹å‰æ²¡æœ‰æ“ä½œè¿‡ï¼Œå…ˆå¾—è¿è¡Œå‘½ä»¤ <code>npm run build</code> æ¥æ„å»ºä½ çš„é¡¹ç›®ã€‚ç„¶åè¿è¡Œå‘½ä»¤ <code>npm start</code>ã€‚åº”è¯¥äº§ç”Ÿä»¥ä¸‹è¾“å‡ºï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token operator">&gt;</span> http-server dist

Starting up http-server, serving dist
Available on:
  http://xx.x.x.x:8080
  http://127.0.0.1:8080
  http://xxx.xxx.x.x:8080
Hit CTRL-C to stop the server
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœä½ æ‰“å¼€æµè§ˆå™¨è®¿é—® <code>http://localhost:8080</code> (å³ <code>http://127.0.0.1</code>)ï¼Œä½ åº”è¯¥ä¼šçœ‹åˆ° webpack åº”ç”¨ç¨‹åºè¢« serve åˆ° <code>dist</code> ç›®å½•ã€‚å¦‚æœåœæ­¢ server ç„¶ååˆ·æ–°ï¼Œåˆ™ webpack åº”ç”¨ç¨‹åºä¸å†å¯è®¿é—®ã€‚</p><p>è¿™å°±æ˜¯æˆ‘ä»¬ä¸ºå®ç°ç¦»çº¿ä½“éªŒæ‰€éœ€è¦çš„æ”¹å˜ã€‚åœ¨æœ¬ç« ç»“æŸæ—¶ï¼Œæˆ‘ä»¬åº”è¯¥è¦å®ç°çš„æ˜¯ï¼Œåœæ­¢ server ç„¶ååˆ·æ–°ï¼Œä»ç„¶å¯ä»¥çœ‹åˆ°åº”ç”¨ç¨‹åºæ­£å¸¸è¿è¡Œã€‚</p><h3 id="_2-6-2-æ·»åŠ -workbox" tabindex="-1"><a class="header-anchor" href="#_2-6-2-æ·»åŠ -workbox" aria-hidden="true">#</a> 2.6.2 æ·»åŠ  Workbox</h3><p>æ·»åŠ  workbox-webpack-plugin æ’ä»¶ï¼Œç„¶åè°ƒæ•´ <code>webpack.config.js</code> æ–‡ä»¶ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> workbox-webpack-plugin --save-dev
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>webpack.config.js</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;html-webpack-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> WorkboxPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;workbox-webpack-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">app</span><span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token keyword">new</span> <span class="token class-name">WorkboxPlugin<span class="token punctuation">.</span>GenerateSW</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token comment">// è¿™äº›é€‰é¡¹å¸®åŠ©å¿«é€Ÿå¯ç”¨ ServiceWorkers</span>
			<span class="token comment">// ä¸å…è®¸é—ç•™ä»»ä½•â€œæ—§çš„â€ ServiceWorkers</span>
			<span class="token literal-property property">clientsClaim</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token literal-property property">skipWaiting</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;[name].bundle.js&#39;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;dist&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token literal-property property">clean</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰§è¡Œï¼š<code>npx webpack</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> 06-pwa $ npx webpack
assets by status <span class="token number">121</span> KiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
  asset workbox-718aa5be.js <span class="token number">118</span> KiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
  asset service-worker.js <span class="token number">3.23</span> KiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
assets by status <span class="token number">1.44</span> KiB <span class="token punctuation">[</span>compared <span class="token keyword">for</span> emit<span class="token punctuation">]</span>
  asset app.bundle.js <span class="token number">1.21</span> KiB <span class="token punctuation">[</span>compared <span class="token keyword">for</span> emit<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: app<span class="token punctuation">)</span>
  asset index.html <span class="token number">237</span> bytes <span class="token punctuation">[</span>compared <span class="token keyword">for</span> emit<span class="token punctuation">]</span>
./src/index.js <span class="token number">29</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>

LOG from GenerateSW
<span class="token operator">&lt;</span>i<span class="token operator">&gt;</span> The <span class="token function">service</span> worker at service-worker.js will precache
<span class="token operator">&lt;</span>i<span class="token operator">&gt;</span>         <span class="token number">2</span> URLs, totaling <span class="token number">1.47</span> kB.

webpack <span class="token number">5.61</span>.0 compiled successfully <span class="token keyword">in</span> <span class="token number">1140</span> ms
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨ä½ å¯ä»¥çœ‹åˆ°ï¼Œç”Ÿæˆäº†ä¸¤ä¸ªé¢å¤–çš„æ–‡ä»¶ï¼š<code>service-worker.js</code> å’Œåç§°å†—é•¿çš„ <code>workbox-718aa5be.js</code>ã€‚<code>service-worker.js</code> æ˜¯ Service Worker æ–‡ä»¶ï¼Œ<code>workbox-718aa5be.js</code> æ˜¯ <code>service-worker.js</code> å¼•ç”¨çš„æ–‡ä»¶ï¼Œæ‰€ä»¥å®ƒä¹Ÿå¯ä»¥è¿è¡Œã€‚ä½ æœ¬åœ°ç”Ÿæˆçš„æ–‡ä»¶å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒï¼›ä½†æ˜¯åº”è¯¥ä¼šæœ‰ä¸€ä¸ª <code>service-worker.js</code> æ–‡ä»¶ã€‚</p><p>æ‰€ä»¥ï¼Œå€¼å¾—é«˜å…´çš„æ˜¯ï¼Œæˆ‘ä»¬ç°åœ¨å·²ç»åˆ›å»ºå‡ºä¸€ä¸ª Service Workerã€‚æ¥ä¸‹æ¥è¯¥åšä»€ä¹ˆï¼Ÿ</p><h3 id="_2-6-3-æ³¨å†Œ-service-worker" tabindex="-1"><a class="header-anchor" href="#_2-6-3-æ³¨å†Œ-service-worker" aria-hidden="true">#</a> 2.6.3 æ³¨å†Œ Service Worker</h3><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ³¨å†Œ Service Workerï¼Œä½¿å…¶å‡ºåœºå¹¶å¼€å§‹è¡¨æ¼”ã€‚é€šè¿‡æ·»åŠ ä»¥ä¸‹æ³¨å†Œä»£ç æ¥å®Œæˆæ­¤æ“ä½œï¼š</p><p><strong>index.js</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//...</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&#39;serviceWorker&#39;</span> <span class="token keyword">in</span> navigator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;load&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		navigator<span class="token punctuation">.</span>serviceWorker
			<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&#39;/service-worker.js&#39;</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">registration</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;SW registered: &#39;</span><span class="token punctuation">,</span> registration<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">registrationError</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;SW registration failed: &#39;</span><span class="token punctuation">,</span> registrationError<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å†æ¬¡è¿è¡Œ <code>npx webpack</code> æ¥æ„å»ºåŒ…å«æ³¨å†Œä»£ç ç‰ˆæœ¬çš„åº”ç”¨ç¨‹åºã€‚ç„¶åç”¨ <code>npm start</code> å¯åŠ¨æœåŠ¡ã€‚è®¿é—® <code>http://localhost:8080</code> å¹¶æŸ¥çœ‹ console æ§åˆ¶å°ã€‚åœ¨é‚£é‡Œä½ åº”è¯¥çœ‹åˆ°ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>SW registered
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç°åœ¨æ¥è¿›è¡Œæµ‹è¯•ã€‚åœæ­¢ server å¹¶åˆ·æ–°é¡µé¢ã€‚å¦‚æœæµè§ˆå™¨èƒ½å¤Ÿæ”¯æŒ Service Workerï¼Œåº”è¯¥å¯ä»¥çœ‹åˆ°ä½ çš„åº”ç”¨ç¨‹åºè¿˜åœ¨æ­£å¸¸è¿è¡Œã€‚ç„¶è€Œï¼Œserver å·²ç»<strong>åœæ­¢</strong> serve æ•´ä¸ª dist æ–‡ä»¶å¤¹ï¼Œæ­¤åˆ»æ˜¯ Service Worker åœ¨è¿›è¡Œ serveã€‚</p><img src="http://raink.net:8080/md-images/webpack5/img-02-07.png" alt="image-20211103084240494" style="zoom:50%;"><h2 id="_2-7-shimming-é¢„ç½®ä¾èµ–" tabindex="-1"><a class="header-anchor" href="#_2-7-shimming-é¢„ç½®ä¾èµ–" aria-hidden="true">#</a> 2.7 shimming é¢„ç½®ä¾èµ–</h2><p><code>webpack</code> compiler èƒ½å¤Ÿè¯†åˆ«éµå¾ª ES2015 æ¨¡å—è¯­æ³•ã€CommonJS æˆ– AMD è§„èŒƒç¼–å†™çš„æ¨¡å—ã€‚ç„¶è€Œï¼Œä¸€äº› third party(ç¬¬ä¸‰æ–¹åº“) å¯èƒ½ä¼šå¼•ç”¨ä¸€äº›å…¨å±€ä¾èµ–ï¼ˆä¾‹å¦‚ <code>jQuery</code> ä¸­çš„ <code>$</code>ï¼‰ã€‚å› æ­¤è¿™äº› library ä¹Ÿå¯èƒ½ä¼šåˆ›å»ºä¸€äº›éœ€è¦å¯¼å‡ºçš„å…¨å±€å˜é‡ã€‚è¿™äº› &quot;broken modules(ä¸ç¬¦åˆè§„èŒƒçš„æ¨¡å—)&quot; å°±æ˜¯ <em>shimming(é¢„ç½®ä¾èµ–)</em> å‘æŒ¥ä½œç”¨çš„åœ°æ–¹ã€‚</p><p><em>shim</em> å¦å¤–ä¸€ä¸ªæå…¶æœ‰ç”¨çš„ä½¿ç”¨åœºæ™¯å°±æ˜¯ï¼šå½“ä½ å¸Œæœ› <a href="https://en.wikipedia.org/wiki/Polyfill_(programming)" target="_blank" rel="noopener noreferrer">polyfill<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> æ‰©å±•æµè§ˆå™¨èƒ½åŠ›ï¼Œæ¥æ”¯æŒåˆ°æ›´å¤šç”¨æˆ·æ—¶ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½åªæ˜¯æƒ³è¦å°†è¿™äº› polyfills æä¾›ç»™éœ€è¦ä¿®è¡¥(patch)çš„æµè§ˆå™¨ï¼ˆä¹Ÿå°±æ˜¯å®ç°æŒ‰éœ€åŠ è½½ï¼‰ã€‚</p><h3 id="_2-7-1-shimming-é¢„ç½®å…¨å±€å˜é‡" tabindex="-1"><a class="header-anchor" href="#_2-7-1-shimming-é¢„ç½®å…¨å±€å˜é‡" aria-hidden="true">#</a> 2.7.1 Shimming é¢„ç½®å…¨å±€å˜é‡</h3><p>è®©æˆ‘ä»¬å¼€å§‹ç¬¬ä¸€ä¸ª shimming å…¨å±€å˜é‡çš„ç”¨ä¾‹ã€‚è¿˜è®°å¾—æˆ‘ä»¬ä¹‹å‰ç”¨è¿‡çš„ <code>lodash</code> å—ï¼Ÿå‡ºäºæ¼”ç¤ºç›®çš„ï¼Œä¾‹å¦‚æŠŠè¿™ä¸ªåº”ç”¨ç¨‹åºä¸­çš„æ¨¡å—ä¾èµ–ï¼Œæ”¹ä¸ºä¸€ä¸ªå…¨å±€å˜é‡ä¾èµ–ã€‚è¦å®ç°è¿™äº›ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ <code>ProvidePlugin</code> æ’ä»¶ã€‚</p><p>ä½¿ç”¨ <a href="https://webpack.docschina.org/plugins/provide-plugin" target="_blank" rel="noopener noreferrer"><code>ProvidePlugin</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> åï¼Œèƒ½å¤Ÿåœ¨ webpack ç¼–è¯‘çš„æ¯ä¸ªæ¨¡å—ä¸­ï¼Œé€šè¿‡è®¿é—®ä¸€ä¸ªå˜é‡æ¥è·å–ä¸€ä¸ª packageã€‚å¦‚æœ webpack çœ‹åˆ°æ¨¡å—ä¸­ç”¨åˆ°è¿™ä¸ªå˜é‡ï¼Œå®ƒå°†åœ¨æœ€ç»ˆ bundle ä¸­å¼•å…¥ç»™å®šçš„ packageã€‚è®©æˆ‘ä»¬å…ˆç§»é™¤ <code>lodash</code> çš„ <code>import</code> è¯­å¥ï¼Œæ”¹ä¸ºé€šè¿‡æ’ä»¶æä¾›å®ƒï¼š</p><ul><li><strong>src/index.js</strong></li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>_<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;webpack&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#39; &#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><strong>webpack.config.js</strong></li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;development&#39;</span><span class="token punctuation">,</span>
	<span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">,</span>

	<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProvidePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token literal-property property">_</span><span class="token operator">:</span> <span class="token string">&#39;lodash&#39;</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬æœ¬è´¨ä¸Šæ‰€åšçš„ï¼Œå°±æ˜¯å‘Šè¯‰ webpackâ€¦â€¦</p><blockquote><p>å¦‚æœä½ é‡åˆ°äº†è‡³å°‘ä¸€å¤„ç”¨åˆ° <code>_</code> å˜é‡çš„æ¨¡å—å®ä¾‹ï¼Œé‚£è¯·ä½ å°† <code>lodash</code> package å¼•å…¥è¿›æ¥ï¼Œå¹¶å°†å…¶æä¾›ç»™éœ€è¦ç”¨åˆ°å®ƒçš„æ¨¡å—ã€‚</p></blockquote><p>è¿è¡Œæˆ‘ä»¬çš„æ„å»ºè„šæœ¬ï¼Œå°†ä¼šçœ‹åˆ°åŒæ ·çš„è¾“å‡ºï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> <span class="token number">01</span><span class="token operator">-</span>third<span class="token operator">-</span>party<span class="token operator">-</span>shimming $ npx webpack
asset main<span class="token punctuation">.</span>js <span class="token number">549</span> KiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">(</span>name<span class="token operator">:</span> main<span class="token punctuation">)</span>
runtime modules <span class="token number">344</span> bytes <span class="token number">2</span> modules
cacheable modules <span class="token number">528</span> KiB
  <span class="token punctuation">.</span><span class="token operator">/</span>src<span class="token operator">/</span>index<span class="token punctuation">.</span>js <span class="token number">46</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>node_modules<span class="token operator">/</span>lodash<span class="token operator">/</span>lodash<span class="token punctuation">.</span>js <span class="token number">528</span> KiB <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
webpack <span class="token number">5.61</span><span class="token number">.0</span> compiled successfully <span class="token keyword">in</span> <span class="token number">275</span> ms
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿˜å¯ä»¥ä½¿ç”¨ <code>ProvidePlugin</code> æš´éœ²å‡ºæŸä¸ªæ¨¡å—ä¸­å•ä¸ªå¯¼å‡ºï¼Œé€šè¿‡é…ç½®ä¸€ä¸ªâ€œæ•°ç»„è·¯å¾„â€ï¼ˆä¾‹å¦‚ <code>[module, child, ...children?]</code>ï¼‰å®ç°æ­¤åŠŸèƒ½ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å‡æƒ³å¦‚ä¸‹ï¼Œæ— è®º <code>join</code> æ–¹æ³•åœ¨ä½•å¤„è°ƒç”¨ï¼Œæˆ‘ä»¬éƒ½åªä¼šè·å–åˆ° <code>lodash</code> ä¸­æä¾›çš„ <code>join</code> æ–¹æ³•ã€‚</p><ul><li><strong>src/index.js</strong></li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;webpack&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#39; &#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><strong>webpack.config.js</strong></li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;development&#39;</span><span class="token punctuation">,</span>
	<span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">,</span>

	<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProvidePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token comment">// _: &#39;lodash&#39;</span>
			<span class="token literal-property property">join</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;lodash&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;join&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ ·å°±èƒ½å¾ˆå¥½çš„ä¸ <a href="https://webpack.docschina.org/guides/tree-shaking" target="_blank" rel="noopener noreferrer">tree shaking<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> é…åˆï¼Œå°† <code>lodash</code> library ä¸­çš„å…¶ä½™æ²¡æœ‰ç”¨åˆ°çš„å¯¼å‡ºå»é™¤ã€‚</p><h3 id="_2-7-2-ç»†ç²’åº¦-shimming" tabindex="-1"><a class="header-anchor" href="#_2-7-2-ç»†ç²’åº¦-shimming" aria-hidden="true">#</a> 2.7.2 ç»†ç²’åº¦ Shimming</h3><p>ä¸€äº›é—ç•™æ¨¡å—ä¾èµ–çš„ <code>this</code> æŒ‡å‘çš„æ˜¯ <code>window</code> å¯¹è±¡ã€‚åœ¨æ¥ä¸‹æ¥çš„ç”¨ä¾‹ä¸­ï¼Œè°ƒæ•´æˆ‘ä»¬çš„ <code>index.js</code>ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;hello webpack&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å½“æ¨¡å—è¿è¡Œåœ¨ CommonJS ä¸Šä¸‹æ–‡ä¸­ï¼Œè¿™å°†ä¼šå˜æˆä¸€ä¸ªé—®é¢˜ï¼Œä¹Ÿå°±æ˜¯è¯´æ­¤æ—¶çš„ <code>this</code> æŒ‡å‘çš„æ˜¯ <code>module.exports</code>ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥é€šè¿‡ä½¿ç”¨ <a href="https://webpack.docschina.org/loaders/imports-loader/" target="_blank" rel="noopener noreferrer"><code>imports-loader</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> è¦†ç›– <code>this</code> æŒ‡å‘ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;html-webpack-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;production&#39;</span><span class="token punctuation">,</span>
	<span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">,</span>

	<span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token string">&#39;imports-loader?wrapper=window&#39;</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProvidePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token literal-property property">_</span><span class="token operator">:</span> <span class="token string">&#39;lodash&#39;</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-7-3-å…¨å±€-exports" tabindex="-1"><a class="header-anchor" href="#_2-7-3-å…¨å±€-exports" aria-hidden="true">#</a> 2.7.3 å…¨å±€ Exports</h3><p>è®©æˆ‘ä»¬å‡è®¾ï¼ŒæŸä¸ª library åˆ›å»ºå‡ºä¸€ä¸ªå…¨å±€å˜é‡ï¼Œå®ƒæœŸæœ› consumer(ä½¿ç”¨è€…) ä½¿ç”¨è¿™ä¸ªå˜é‡ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é¡¹ç›®é…ç½®ä¸­ï¼Œæ·»åŠ ä¸€ä¸ªå°æ¨¡å—æ¥æ¼”ç¤ºè¯´æ˜ï¼š</p><ul><li><strong>src/globals.js</strong></li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> file <span class="token operator">=</span> <span class="token string">&#39;example.txt&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> helpers <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token function-variable function">test</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;test something&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function-variable function">parse</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;parse something&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>webpack.config.js</strong></li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;html-webpack-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;production&#39;</span><span class="token punctuation">,</span>
	<span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">,</span>

	<span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token string">&#39;imports-loader?wrapper=window&#39;</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;./src/globals.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token string">&#39;exports-loader?type=commonjs&amp;exports=file,multiple|helpers.parse|parse&#39;</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProvidePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token literal-property property">_</span><span class="token operator">:</span> <span class="token string">&#39;lodash&#39;</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ­¤æ—¶ï¼Œåœ¨æˆ‘ä»¬çš„ entry å…¥å£æ–‡ä»¶ä¸­ï¼ˆå³ <code>src/index.js</code>ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ <code>const { file, parse } = require(&#39;./globals.js&#39;);</code>ï¼Œå¯ä»¥ä¿è¯ä¸€åˆ‡å°†é¡ºåˆ©è¿è¡Œã€‚</p><h3 id="_2-7-4-åŠ è½½-polyfills" tabindex="-1"><a class="header-anchor" href="#_2-7-4-åŠ è½½-polyfills" aria-hidden="true">#</a> 2.7.4 åŠ è½½ Polyfills</h3><p>ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬è®¨è®ºçš„æ‰€æœ‰å†…å®¹ éƒ½æ˜¯å¤„ç†é‚£äº›é—ç•™çš„ packageï¼Œè®©æˆ‘ä»¬è¿›å…¥åˆ°ç¬¬äºŒä¸ªè¯é¢˜ï¼š<strong>polyfill</strong>ã€‚</p><p>æœ‰å¾ˆå¤šæ–¹æ³•æ¥åŠ è½½ polyfillã€‚ä¾‹å¦‚ï¼Œæƒ³è¦å¼•å…¥ <a href="https://babel.docschina.org/docs/en/babel-polyfill/" target="_blank" rel="noopener noreferrer"><code>@babel/polyfill</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> æˆ‘ä»¬åªéœ€å¦‚ä¸‹æ“ä½œï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">--save</span> @babel/polyfill
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç„¶åï¼Œä½¿ç”¨ <code>import</code> å°†å…¶å¼•å…¥åˆ°æˆ‘ä»¬çš„ä¸» bundle æ–‡ä»¶ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token string">&#39;@babel/polyfill&#39;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x <span class="token operator">+</span> x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼Œè¿™ç§æ–¹å¼ä¼˜å…ˆè€ƒè™‘æ­£ç¡®æ€§ï¼Œè€Œä¸è€ƒè™‘ bundle ä½“ç§¯å¤§å°ã€‚ä¸ºäº†å®‰å…¨å’Œå¯é ï¼Œpolyfill/shim å¿…é¡»<strong>è¿è¡Œäºæ‰€æœ‰å…¶ä»–ä»£ç ä¹‹å‰</strong>ï¼Œè€Œä¸”éœ€è¦åŒæ­¥åŠ è½½ï¼Œæˆ–è€…è¯´ï¼Œéœ€è¦åœ¨æ‰€æœ‰ polyfill/shim åŠ è½½ä¹‹åï¼Œå†å»åŠ è½½æ‰€æœ‰åº”ç”¨ç¨‹åºä»£ç ã€‚ ç¤¾åŒºä¸­å­˜åœ¨è®¸å¤šè¯¯è§£ï¼Œå³ç°ä»£æµè§ˆå™¨â€œä¸éœ€è¦â€polyfillï¼Œæˆ–è€… polyfill/shim ä»…ç”¨äºæ·»åŠ ç¼ºå¤±åŠŸèƒ½ - å®é™…ä¸Šï¼Œå®ƒä»¬é€šå¸¸ç”¨äº<strong>ä¿®å¤æŸåå®ç°(repair broken implementation)</strong>ï¼Œå³ä½¿æ˜¯åœ¨æœ€ç°ä»£çš„æµè§ˆå™¨ä¸­ï¼Œä¹Ÿä¼šå‡ºç°è¿™ç§æƒ…å†µã€‚ å› æ­¤ï¼Œæœ€ä½³å®è·µä»ç„¶æ˜¯ï¼Œä¸åŠ é€‰æ‹©åœ°å’ŒåŒæ­¥åœ°åŠ è½½æ‰€æœ‰ polyfill/shimï¼Œå°½ç®¡è¿™ä¼šå¯¼è‡´é¢å¤–çš„ bundle ä½“ç§¯æˆæœ¬ã€‚</p><h3 id="_2-7-5-è¿›ä¸€æ­¥ä¼˜åŒ–-polyfills" tabindex="-1"><a class="header-anchor" href="#_2-7-5-è¿›ä¸€æ­¥ä¼˜åŒ–-polyfills" aria-hidden="true">#</a> 2.7.5 è¿›ä¸€æ­¥ä¼˜åŒ– Polyfills</h3><p>ä¸å»ºè®®ä½¿ç”¨ <code>import @babel/polyfilll</code> ã€‚å› ä¸ºè¿™æ ·åšçš„ç¼ºç‚¹æ˜¯ä¼šå…¨å±€å¼•å…¥æ•´ä¸ª polyfill åŒ…ï¼Œæ¯”å¦‚ Array.from ä¼šå…¨å±€å¼•å…¥ï¼Œä¸ä½†åŒ…çš„ä½“ç§¯å¤§ï¼Œè€Œä¸”è¿˜ä¼šæ±¡æŸ“å…¨å±€ç¯å¢ƒã€‚</p><p><code>babel-preset-env</code> package é€šè¿‡ <a href="https://github.com/browserslist/browserslist" target="_blank" rel="noopener noreferrer">browserslist<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> æ¥è½¬è¯‘é‚£äº›ä½ æµè§ˆå™¨ä¸­ä¸æ”¯æŒçš„ç‰¹æ€§ã€‚è¿™ä¸ª preset ä½¿ç”¨ <a href="https://babel.docschina.org/docs/en/babel-preset-env#usebuiltins" target="_blank" rel="noopener noreferrer"><code>useBuiltIns</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> é€‰é¡¹ï¼Œé»˜è®¤å€¼æ˜¯ <code>false</code>ï¼Œè¿™ç§æ–¹å¼å¯ä»¥å°†å…¨å±€ <code>babel-polyfill</code> å¯¼å…¥ï¼Œæ”¹è¿›ä¸ºæ›´ç»†ç²’åº¦çš„ <code>import</code> æ ¼å¼ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token string">&#39;core-js/modules/es7.string.pad-start&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&#39;core-js/modules/es7.string.pad-end&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&#39;core-js/modules/web.timers&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&#39;core-js/modules/web.immediate&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&#39;core-js/modules/web.dom.iterable&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>å®‰è£… @babel/preset-env åŠ ç›¸å…³çš„åŒ…</strong></li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> i babel-loader @babel/core @babel/preset-env <span class="token parameter variable">-D</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><strong>webpack.config.js</strong></li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;html-webpack-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;production&#39;</span><span class="token punctuation">,</span>
	<span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">,</span>
	<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;babel-loader&#39;</span><span class="token punctuation">,</span>
					<span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
						<span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span>
							<span class="token punctuation">[</span>
								<span class="token string">&#39;@babel/preset-env&#39;</span><span class="token punctuation">,</span>
								<span class="token punctuation">{</span>
									<span class="token literal-property property">targets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;last 1 version&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;&gt; 1%&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
									<span class="token literal-property property">useBuiltIns</span><span class="token operator">:</span> <span class="token string">&#39;usage&#39;</span><span class="token punctuation">,</span>
								<span class="token punctuation">}</span><span class="token punctuation">,</span>
							<span class="token punctuation">]</span><span class="token punctuation">,</span>
						<span class="token punctuation">]</span><span class="token punctuation">,</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>useBuiltIns: å‚æ•°æœ‰ â€œentryâ€ã€â€usageâ€ã€false ä¸‰ä¸ªå€¼</strong></p><p>é»˜è®¤å€¼æ˜¯ <code>false</code>ï¼Œæ­¤å‚æ•°å†³å®šäº† babel æ‰“åŒ…æ—¶å¦‚ä½•å¤„ç†@babel/polyfilll è¯­å¥ã€‚</p><p><strong>â€œentryâ€:</strong> ä¼šå°†æ–‡ä»¶ä¸­ <code>import @babel/polyfilll</code> è¯­å¥ ç»“åˆ targets ï¼Œè½¬æ¢ä¸ºä¸€ç³»åˆ—å¼•å…¥è¯­å¥ï¼Œå»æ‰ç›®æ ‡æµè§ˆå™¨å·²æ”¯æŒçš„ polyfilll æ¨¡å—ï¼Œä¸ç®¡ä»£ç é‡Œæœ‰æ²¡æœ‰ç”¨åˆ°ï¼Œåªè¦ç›®æ ‡æµè§ˆå™¨ä¸æ”¯æŒéƒ½ä¼šå¼•å…¥å¯¹åº”çš„ polyfilll æ¨¡å—ã€‚</p><p><strong>â€œusageâ€:</strong> ä¸éœ€è¦æ‰‹åŠ¨åœ¨ä»£ç é‡Œå†™ <code>import @babel/polyfilll</code>ï¼Œæ‰“åŒ…æ—¶ä¼šè‡ªåŠ¨æ ¹æ®å®é™…ä»£ç çš„ä½¿ç”¨æƒ…å†µï¼Œç»“åˆ targets å¼•å…¥ä»£ç é‡Œå®é™…ç”¨åˆ°éƒ¨åˆ† polyfilll æ¨¡å—</p><p><strong>false:</strong> å¯¹ importâ€˜@babel/polyfilllâ€™ä¸ä½œä»»ä½•å¤„ç†ï¼Œä¹Ÿä¸ä¼šè‡ªåŠ¨å¼•å…¥ polyfilll æ¨¡å—ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯åœ¨ webpack æ‰“åŒ…æ–‡ä»¶é…ç½®çš„ entry ä¸­å¼•å…¥çš„ @babel/polyfill ä¸ä¼šæ ¹æ® useBuiltIns é…ç½®ä»»ä½•è½¬æ¢å¤„ç†ã€‚</p><p>ç”±äº@babel/polyfill åœ¨ 7.4.0 ä¸­è¢«å¼ƒç”¨ï¼Œæˆ‘ä»¬å»ºè®®ç›´æ¥æ·»åŠ  corejs å¹¶é€šè¿‡ corejs é€‰é¡¹è®¾ç½®ç‰ˆæœ¬ã€‚</p><ul><li>æ‰§è¡Œç¼–è¯‘ npx webpack</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> 02-polyfill $ npx webpack

WARNING <span class="token punctuation">(</span>@babel/preset-env<span class="token punctuation">)</span>: We noticed you<span class="token string">&#39;re using the `useBuiltIns` option without declaring a core-js version. Currently, we assume version 2.x when no version is passed. Since this default version will likely change in future versions of Babel, we recommend explicitly setting the core-js version you are using via the `corejs` option.

You should also be sure that the version you pass to the `corejs` option matches the version specified in your `package.json`&#39;</span>s <span class="token variable"><span class="token variable">`</span>dependencies<span class="token variable">`</span></span> section. If it doesn&#39;t, you need to run one of the following commands:

  <span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">--save</span> core-js@2    <span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">--save</span> core-js@3
  <span class="token function">yarn</span> <span class="token function">add</span> core-js@2              <span class="token function">yarn</span> <span class="token function">add</span> core-js@3

More info about useBuiltIns: https://babeljs.io/docs/en/babel-preset-env<span class="token comment">#usebuiltins</span>
More info about core-js: https://babeljs.io/docs/en/babel-preset-env<span class="token comment">#corejs</span>
asset main.js <span class="token number">16.7</span> KiB <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token punctuation">[</span>minimized<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: main<span class="token punctuation">)</span>
asset index.html <span class="token number">214</span> bytes <span class="token punctuation">[</span>compared <span class="token keyword">for</span> emit<span class="token punctuation">]</span>
runtime modules <span class="token number">663</span> bytes <span class="token number">3</span> modules
modules by path ./node_modules/core-js/modules/*.js <span class="token number">38.9</span> KiB <span class="token number">68</span> modules
./src/index.js <span class="token number">374</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
webpack <span class="token number">5.61</span>.0 compiled successfully <span class="token keyword">in</span> <span class="token number">1613</span> ms
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æç¤ºæˆ‘ä»¬éœ€è¦å®‰è£… <code>core-js</code>ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>npm i core<span class="token operator">-</span>js@<span class="token number">3</span> <span class="token operator">-</span><span class="token constant">S</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ­¤æ—¶è¿˜éœ€è¦ æ·»åŠ ä¸€ä¸ªé…ç½®ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;html-webpack-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;production&#39;</span><span class="token punctuation">,</span>
	<span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">,</span>
	<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;babel-loader&#39;</span><span class="token punctuation">,</span>
					<span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
						<span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span>
							<span class="token punctuation">[</span>
								<span class="token string">&#39;@babel/preset-env&#39;</span><span class="token punctuation">,</span>
								<span class="token punctuation">{</span>
									<span class="token literal-property property">targets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;last 1 version&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;&gt; 1%&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
									<span class="token literal-property property">useBuiltIns</span><span class="token operator">:</span> <span class="token string">&#39;usage&#39;</span><span class="token punctuation">,</span>
									<span class="token comment">// æ·»åŠ corejsé…ç½®</span>
									<span class="token literal-property property">corejs</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
								<span class="token punctuation">}</span><span class="token punctuation">,</span>
							<span class="token punctuation">]</span><span class="token punctuation">,</span>
						<span class="token punctuation">]</span><span class="token punctuation">,</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆåŠŸä¼˜åŒ–ï¼</p><h2 id="_2-8-åˆ›å»º-library" tabindex="-1"><a class="header-anchor" href="#_2-8-åˆ›å»º-library" aria-hidden="true">#</a> 2.8 åˆ›å»º library</h2><p>é™¤äº†æ‰“åŒ…åº”ç”¨ç¨‹åºï¼Œwebpack è¿˜å¯ä»¥ç”¨äºæ‰“åŒ… JavaScript libraryã€‚</p><h3 id="_2-8-1-åˆ›å»ºä¸€ä¸ª-library" tabindex="-1"><a class="header-anchor" href="#_2-8-1-åˆ›å»ºä¸€ä¸ª-library" aria-hidden="true">#</a> 2.8.1 åˆ›å»ºä¸€ä¸ª library</h3><p>å‡è®¾æˆ‘ä»¬æ­£åœ¨ç¼–å†™ä¸€ä¸ªåä¸º <code>webpack-numbers</code> çš„å°çš„ libraryï¼Œå¯ä»¥å°†æ•°å­— 1 åˆ° 5 è½¬æ¢ä¸ºæ–‡æœ¬è¡¨ç¤ºï¼Œåä¹‹äº¦ç„¶ï¼Œä¾‹å¦‚å°† 2 è½¬æ¢ä¸º &#39;two&#39;ã€‚</p><p>ä½¿ç”¨ npm åˆå§‹åŒ–é¡¹ç›®ï¼Œç„¶åå®‰è£… <code>webpack</code>ï¼Œ<code>webpack-cli</code> å’Œ <code>lodash</code>ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> i webpack webpack-cli lodash <span class="token parameter variable">-D</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æˆ‘ä»¬å°† <code>lodash</code> å®‰è£…ä¸º <code>devDependencies</code> è€Œä¸æ˜¯ <code>dependencies</code>ï¼Œå› ä¸ºæˆ‘ä»¬ä¸éœ€è¦å°†å…¶æ‰“åŒ…åˆ°æˆ‘ä»¬çš„åº“ä¸­ï¼Œå¦åˆ™æˆ‘ä»¬çš„åº“ä½“ç§¯å¾ˆå®¹æ˜“å˜å¤§ã€‚</p><p><strong>src/ref.json</strong></p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">[</span>
	<span class="token punctuation">{</span>
		<span class="token property">&quot;num&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
		<span class="token property">&quot;word&quot;</span><span class="token operator">:</span> <span class="token string">&quot;One&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">{</span>
		<span class="token property">&quot;num&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
		<span class="token property">&quot;word&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Two&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">{</span>
		<span class="token property">&quot;num&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
		<span class="token property">&quot;word&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Three&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">{</span>
		<span class="token property">&quot;num&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
		<span class="token property">&quot;word&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Four&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">{</span>
		<span class="token property">&quot;num&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
		<span class="token property">&quot;word&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Five&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">{</span>
		<span class="token property">&quot;num&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
		<span class="token property">&quot;word&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Zero&quot;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>src/index.js</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">&#39;lodash&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> numRef <span class="token keyword">from</span> <span class="token string">&#39;./ref.json&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">numToWord</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> _<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>
		numRef<span class="token punctuation">,</span>
		<span class="token punctuation">(</span><span class="token parameter">accum<span class="token punctuation">,</span> ref</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> ref<span class="token punctuation">.</span>num <span class="token operator">===</span> num <span class="token operator">?</span> ref<span class="token punctuation">.</span>word <span class="token operator">:</span> accum<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token string">&#39;&#39;</span>
	<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">wordToNum</span><span class="token punctuation">(</span><span class="token parameter">word</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> _<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>
		numRef<span class="token punctuation">,</span>
		<span class="token punctuation">(</span><span class="token parameter">accum<span class="token punctuation">,</span> ref</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> ref<span class="token punctuation">.</span>word <span class="token operator">===</span> word <span class="token operator">&amp;&amp;</span> word<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> ref<span class="token punctuation">.</span>num <span class="token operator">:</span> accum<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token operator">-</span><span class="token number">1</span>
	<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-8-2-webpack-é…ç½®" tabindex="-1"><a class="header-anchor" href="#_2-8-2-webpack-é…ç½®" aria-hidden="true">#</a> 2.8.2 Webpack é…ç½®</h3><p>æˆ‘ä»¬å¯ä»¥ä»å¦‚ä¸‹ webpack åŸºæœ¬é…ç½®å¼€å§‹ï¼š</p><p><strong>webpack.config.js</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">,</span>
	<span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;dist&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;webpack-numbers.js&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†é€šçŸ¥ webpack å°† <code>src/index.js</code> æ‰“åŒ…åˆ° <code>dist/webpack-numbers.js</code> ä¸­ã€‚</p><h3 id="_2-8-3-å¯¼å‡º-library" tabindex="-1"><a class="header-anchor" href="#_2-8-3-å¯¼å‡º-library" aria-hidden="true">#</a> 2.8.3 å¯¼å‡º Library</h3><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä¸€åˆ‡éƒ½åº”è¯¥ä¸æ‰“åŒ…åº”ç”¨ç¨‹åºä¸€æ ·ï¼Œè¿™é‡Œæ˜¯ä¸åŒçš„éƒ¨åˆ† - æˆ‘ä»¬éœ€è¦é€šè¿‡ <a href="https://webpack.docschina.org/configuration/output/#outputlibrary" target="_blank" rel="noopener noreferrer"><code>output.library</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> é…ç½®é¡¹æš´éœ²ä»å…¥å£å¯¼å‡ºçš„å†…å®¹ã€‚</p><p><strong>webpack.config.js</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">,</span>
	<span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;dist&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;webpack-numbers.js&#39;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">library</span><span class="token operator">:</span> <span class="token string">&#39;webpackNumbers&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬æš´éœ²äº†<code>webpackNumbers</code> ï¼Œä»¥ä¾¿ç”¨æˆ·å¯ä»¥é€šè¿‡ <code>script</code>æ ‡ç­¾ä½¿ç”¨ã€‚</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://example.org/webpack-numbers.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	window<span class="token punctuation">.</span>webpackNumbers<span class="token punctuation">.</span><span class="token function">wordToNum</span><span class="token punctuation">(</span><span class="token string">&#39;Five&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶è€Œå®ƒåªèƒ½é€šè¿‡è¢« script æ ‡ç­¾å¼•ç”¨è€Œå‘æŒ¥ä½œç”¨ï¼Œå®ƒä¸èƒ½è¿è¡Œåœ¨ CommonJSã€AMDã€Node.js ç­‰ç¯å¢ƒä¸­ã€‚</p><p>ä½œä¸ºä¸€ä¸ªåº“ä½œè€…ï¼Œæˆ‘ä»¬å¸Œæœ›å®ƒèƒ½å¤Ÿå…¼å®¹ä¸åŒçš„ç¯å¢ƒï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç”¨æˆ·åº”è¯¥èƒ½å¤Ÿé€šè¿‡ä»¥ä¸‹æ–¹å¼ä½¿ç”¨æ‰“åŒ…åçš„åº“ï¼š</p><ul><li><p><strong>CommonJS module require</strong>:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> webpackNumbers <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack-numbers&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ...</span>
webpackNumbers<span class="token punctuation">.</span><span class="token function">wordToNum</span><span class="token punctuation">(</span><span class="token string">&#39;Two&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>AMD module require</strong>:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;webpackNumbers&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">webpackNumbers</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// ...</span>
	webpackNumbers<span class="token punctuation">.</span><span class="token function">wordToNum</span><span class="token punctuation">(</span><span class="token string">&#39;Two&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>script tag</strong>:</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
	...
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://example.org/webpack-numbers.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
		<span class="token comment">// ...</span>
		<span class="token comment">// Global variable</span>
		webpackNumbers<span class="token punctuation">.</span><span class="token function">wordToNum</span><span class="token punctuation">(</span><span class="token string">&#39;Five&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// Property in the window object</span>
		window<span class="token punctuation">.</span>webpackNumbers<span class="token punctuation">.</span><span class="token function">wordToNum</span><span class="token punctuation">(</span><span class="token string">&#39;Five&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// ...</span>
	</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p>æˆ‘ä»¬æ›´æ–° <code>output.library</code> é…ç½®é¡¹ï¼Œå°†å…¶ <code>type</code> è®¾ç½®ä¸º <a href="https://webpack.docschina.org/configuration/output/#type-umd" target="_blank" rel="noopener noreferrer"><code>&#39;umd&#39;</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">,</span>
	<span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;dist&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;webpack-numbers.js&#39;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">library</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;webpackNumbers&#39;</span><span class="token punctuation">,</span>
			<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;umd&#39;</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨ webpack å°†æ‰“åŒ…ä¸€ä¸ªåº“ï¼Œå…¶å¯ä»¥ä¸ CommonJSã€AMD ä»¥åŠ script æ ‡ç­¾ä½¿ç”¨ã€‚</p><h3 id="_2-8-4-å¤–éƒ¨åŒ–-lodash" tabindex="-1"><a class="header-anchor" href="#_2-8-4-å¤–éƒ¨åŒ–-lodash" aria-hidden="true">#</a> 2.8.4 å¤–éƒ¨åŒ– lodash</h3><p>ç°åœ¨ï¼Œå¦‚æœæ‰§è¡Œ <code>webpack</code>ï¼Œä½ ä¼šå‘ç°åˆ›å»ºäº†ä¸€ä¸ªä½“ç§¯ç›¸å½“å¤§çš„æ–‡ä»¶ã€‚å¦‚æœä½ æŸ¥çœ‹è¿™ä¸ªæ–‡ä»¶ï¼Œä¼šçœ‹åˆ° lodash ä¹Ÿè¢«æ‰“åŒ…åˆ°ä»£ç ä¸­ã€‚åœ¨è¿™ç§åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬æ›´å€¾å‘äºæŠŠ <code>lodash</code> å½“ä½œ <code>peerDependency</code>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œconsumer(ä½¿ç”¨è€…) åº”è¯¥å·²ç»å®‰è£…è¿‡ <code>lodash</code> ã€‚å› æ­¤ï¼Œä½ å°±å¯ä»¥æ”¾å¼ƒæ§åˆ¶æ­¤å¤–éƒ¨ library ï¼Œè€Œæ˜¯å°†æ§åˆ¶æƒè®©ç»™ä½¿ç”¨ library çš„ consumerã€‚</p><p>è¿™å¯ä»¥ä½¿ç”¨ <code>externals</code> é…ç½®æ¥å®Œæˆï¼š</p><p><strong>webpack.config.js</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">,</span>
	<span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;dist&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;webpack-numbers.js&#39;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">library</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;webpackNumbers&#39;</span><span class="token punctuation">,</span>
			<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;umd&#39;</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token comment">// ä¿®è¡¥bug</span>
		<span class="token literal-property property">globalObject</span><span class="token operator">:</span> <span class="token string">&#39;globalThis&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token literal-property property">externals</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">lodash</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">commonjs</span><span class="token operator">:</span> <span class="token string">&#39;lodash&#39;</span><span class="token punctuation">,</span>
			<span class="token literal-property property">commonjs2</span><span class="token operator">:</span> <span class="token string">&#39;lodash&#39;</span><span class="token punctuation">,</span>
			<span class="token literal-property property">amd</span><span class="token operator">:</span> <span class="token string">&#39;lodash&#39;</span><span class="token punctuation">,</span>
			<span class="token literal-property property">root</span><span class="token operator">:</span> <span class="token string">&#39;_&#39;</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ„å‘³ç€ä½ çš„ library éœ€è¦ä¸€ä¸ªåä¸º <code>lodash</code> çš„ä¾èµ–ï¼Œè¿™ä¸ªä¾èµ–åœ¨ consumer ç¯å¢ƒä¸­å¿…é¡»å­˜åœ¨ä¸”å¯ç”¨ã€‚</p><h3 id="_2-8-5-å¤–éƒ¨åŒ–é™åˆ¶" tabindex="-1"><a class="header-anchor" href="#_2-8-5-å¤–éƒ¨åŒ–é™åˆ¶" aria-hidden="true">#</a> 2.8.5 å¤–éƒ¨åŒ–é™åˆ¶</h3><p>å¯¹äºæƒ³è¦å®ç°ä»ä¸€ä¸ªä¾èµ–ä¸­è°ƒç”¨å¤šä¸ªæ–‡ä»¶çš„é‚£äº› libraryï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token constant">A</span> <span class="token keyword">from</span> <span class="token string">&#39;library/one&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token constant">B</span> <span class="token keyword">from</span> <span class="token string">&#39;library/two&#39;</span><span class="token punctuation">;</span>

<span class="token comment">// ...</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ— æ³•é€šè¿‡åœ¨ externals ä¸­æŒ‡å®šæ•´ä¸ª <code>library</code> çš„æ–¹å¼ï¼Œå°†å®ƒä»¬ä» bundle ä¸­æ’é™¤ã€‚è€Œæ˜¯éœ€è¦é€ä¸ªæˆ–è€…ä½¿ç”¨ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œæ¥æ’é™¤å®ƒä»¬ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">//...</span>
	<span class="token literal-property property">externals</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token string">&#39;library/one&#39;</span><span class="token punctuation">,</span>
		<span class="token string">&#39;library/two&#39;</span><span class="token punctuation">,</span>
		<span class="token comment">// åŒ¹é…ä»¥ &quot;library/&quot; å¼€å§‹çš„æ‰€æœ‰ä¾èµ–</span>
		<span class="token operator">/</span><span class="token operator">^</span>library\<span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.+$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-8-6-ä¼˜åŒ–è¾“å‡º" tabindex="-1"><a class="header-anchor" href="#_2-8-6-ä¼˜åŒ–è¾“å‡º" aria-hidden="true">#</a> 2.8.6 ä¼˜åŒ–è¾“å‡º</h3><p>ä¸ºä¼˜åŒ–ç”Ÿäº§ç¯å¢ƒä¸‹çš„è¾“å‡ºç»“æœï¼Œæˆ‘ä»¬è¿˜éœ€è¦å°†ç”Ÿæˆ bundle çš„æ–‡ä»¶è·¯å¾„ï¼Œæ·»åŠ åˆ° <code>package.json</code> ä¸­çš„ <code>main</code> å­—æ®µä¸­ã€‚</p><p><strong>package.json</strong></p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  ...
  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dist/webpack-numbers.js&quot;</span><span class="token punctuation">,</span>
  ...
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ–è€…ï¼ŒæŒ‰ç…§è¿™ä¸ª <a href="https://github.com/dherman/defense-of-dot-js/blob/master/proposal.md#typical-usage" target="_blank" rel="noopener noreferrer">æŒ‡å—<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼Œå°†å…¶æ·»åŠ ä¸ºæ ‡å‡†æ¨¡å—ï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  ...
  <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;src/index.js&quot;</span><span class="token punctuation">,</span>
  ...
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œçš„ key(é”®) <code>main</code> æ˜¯å‚ç…§ <a href="https://docs.npmjs.com/files/package.json#main" target="_blank" rel="noopener noreferrer"><code>package.json</code> æ ‡å‡†<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼Œè€Œ <code>module</code> æ˜¯å‚ç…§ <a href="https://github.com/dherman/defense-of-dot-js/blob/master/proposal.md" target="_blank" rel="noopener noreferrer">ä¸€ä¸ª<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://github.com/rollup/rollup/wiki/pkg.module" target="_blank" rel="noopener noreferrer">ææ¡ˆ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼Œæ­¤ææ¡ˆå…è®¸ JavaScript ç”Ÿæ€ç³»ç»Ÿå‡çº§ä½¿ç”¨ ES2015 æ¨¡å—ï¼Œè€Œä¸ä¼šç ´åå‘åå…¼å®¹æ€§ã€‚</p><h3 id="_2-8-7-å‘å¸ƒä¸º-npm-package" tabindex="-1"><a class="header-anchor" href="#_2-8-7-å‘å¸ƒä¸º-npm-package" aria-hidden="true">#</a> 2.8.7 å‘å¸ƒä¸º npm package</h3><p>ç°åœ¨ï¼Œä½ å¯ä»¥ <a href="https://docs.npmjs.com/getting-started/publishing-npm-packages" target="_blank" rel="noopener noreferrer">å°†å…¶å‘å¸ƒä¸ºä¸€ä¸ª npm package<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼Œå¹¶ä¸”åœ¨ <a href="https://unpkg.com/#/" target="_blank" rel="noopener noreferrer">unpkg.com<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> æ‰¾åˆ°å®ƒï¼Œå¹¶åˆ†å‘ç»™ä½ çš„ç”¨æˆ·ã€‚</p><h2 id="_2-9-æ¨¡å—è”é‚¦" tabindex="-1"><a class="header-anchor" href="#_2-9-æ¨¡å—è”é‚¦" aria-hidden="true">#</a> 2.9 æ¨¡å—è”é‚¦</h2><h3 id="_2-9-1-ä»€ä¹ˆæ˜¯æ¨¡å—è”é‚¦" tabindex="-1"><a class="header-anchor" href="#_2-9-1-ä»€ä¹ˆæ˜¯æ¨¡å—è”é‚¦" aria-hidden="true">#</a> 2.9.1 ä»€ä¹ˆæ˜¯æ¨¡å—è”é‚¦</h3><p>å¤šä¸ªç‹¬ç«‹çš„æ„å»ºå¯ä»¥ç»„æˆä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œè¿™äº›ç‹¬ç«‹çš„æ„å»ºä¹‹é—´ä¸åº”è¯¥å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œå› æ­¤å¯ä»¥å•ç‹¬å¼€å‘å’Œéƒ¨ç½²å®ƒä»¬ã€‚</p><p>è¿™é€šå¸¸è¢«ç§°ä½œå¾®å‰ç«¯ï¼Œä½†å¹¶ä¸ä»…é™äºæ­¤ã€‚</p><p>Webpack5 æ¨¡å—è”é‚¦è®© Webpack è¾¾åˆ°äº†çº¿ä¸Š Runtime çš„æ•ˆæœï¼Œè®©ä»£ç ç›´æ¥åœ¨é¡¹ç›®é—´åˆ©ç”¨ CDN ç›´æ¥å…±äº«ï¼Œä¸å†éœ€è¦æœ¬åœ°å®‰è£… Npm åŒ…ã€æ„å»ºå†å‘å¸ƒäº†ï¼</p><p>æˆ‘ä»¬çŸ¥é“ Webpack å¯ä»¥é€šè¿‡ DLL æˆ–è€… Externals åšä»£ç å…±äº«æ—¶ Common Chunkï¼Œä½†ä¸åŒåº”ç”¨å’Œé¡¹ç›®é—´è¿™ä¸ªä»»åŠ¡å°±å˜å¾—å›°éš¾äº†ï¼Œæˆ‘ä»¬å‡ ä¹æ— æ³•åœ¨é¡¹ç›®ä¹‹é—´åšåˆ°æŒ‰éœ€çƒ­æ’æ‹”ã€‚</p><ul><li><strong>NPM æ–¹å¼å…±äº«æ¨¡å—</strong></li></ul><p>æƒ³è±¡ä¸€ä¸‹æ­£å¸¸çš„å…±äº«æ¨¡å—æ–¹å¼ï¼Œå¯¹ï¼Œå°±æ˜¯ NPMã€‚</p><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ­£å¸¸çš„ä»£ç å…±äº«éœ€è¦å°†ä¾èµ–ä½œä¸º Lib å®‰è£…åˆ°é¡¹ç›®ï¼Œè¿›è¡Œ Webpack æ‰“åŒ…æ„å»ºå†ä¸Šçº¿ï¼Œå¦‚ä¸‹å›¾ï¼š</p><figure><img src="http://raink.net:8080/md-images/webpack5/npm.jpg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>å¯¹äºé¡¹ç›® Home ä¸ Searchï¼Œéœ€è¦å…±äº«ä¸€ä¸ªæ¨¡å—æ—¶ï¼Œæœ€å¸¸è§çš„åŠæ³•å°±æ˜¯å°†å…¶æŠ½æˆé€šç”¨ä¾èµ–å¹¶åˆ†åˆ«å®‰è£…åœ¨å„è‡ªé¡¹ç›®ä¸­ã€‚</p><p>è™½ç„¶ Monorepo å¯ä»¥ä¸€å®šç¨‹åº¦è§£å†³é‡å¤å®‰è£…å’Œä¿®æ”¹å›°éš¾çš„é—®é¢˜ï¼Œä½†ä¾ç„¶éœ€è¦èµ°æœ¬åœ°ç¼–è¯‘ã€‚</p><ul><li><strong>UMD æ–¹å¼å…±äº«æ¨¡å—</strong></li></ul><p>çœŸæ­£ Runtime çš„æ–¹å¼å¯èƒ½æ˜¯ UMD æ–¹å¼å…±äº«ä»£ç æ¨¡å—ï¼Œå³å°†æ¨¡å—ç”¨ Webpack UMD æ¨¡å¼æ‰“åŒ…ï¼Œå¹¶è¾“å‡ºåˆ°å…¶ä»–é¡¹ç›®ä¸­ã€‚è¿™æ˜¯éå¸¸æ™®éçš„æ¨¡å—å…±äº«æ–¹å¼ï¼š</p><figure><img src="http://raink.net:8080/md-images/webpack5/esi.jpg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>å¯¹äºé¡¹ç›® Home ä¸ Searchï¼Œç›´æ¥åˆ©ç”¨ UMD åŒ…å¤ç”¨ä¸€ä¸ªæ¨¡å—ã€‚ä½†è¿™ç§æŠ€æœ¯æ–¹æ¡ˆé—®é¢˜ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œå°±æ˜¯åŒ…ä½“ç§¯æ— æ³•è¾¾åˆ°æœ¬åœ°ç¼–è¯‘æ—¶çš„ä¼˜åŒ–æ•ˆæœï¼Œä¸”åº“ä¹‹é—´å®¹æ˜“å†²çªã€‚</p><ul><li><strong>å¾®å‰ç«¯æ–¹å¼å…±äº«æ¨¡å—</strong></li></ul><p>å¾®å‰ç«¯ï¼šmicro-frontends (MFE) ä¹Ÿæ˜¯æœ€è¿‘æ¯”è¾ƒç«çš„æ¨¡å—å…±äº«ç®¡ç†æ–¹å¼ï¼Œå¾®å‰ç«¯å°±æ˜¯è¦è§£å†³å¤šé¡¹ç›®å¹¶å­˜é—®é¢˜ï¼Œå¤šé¡¹ç›®å¹¶å­˜çš„æœ€å¤§é—®é¢˜å°±æ˜¯æ¨¡å—å…±äº«ï¼Œä¸èƒ½æœ‰å†²çªã€‚</p><figure><img src="http://raink.net:8080/md-images/webpack5/mfe.jpg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>ç”±äºå¾®å‰ç«¯è¿˜è¦è€ƒè™‘æ ·å¼å†²çªã€ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œæ‰€ä»¥æœ¬æ–‡åªèšç„¦åœ¨èµ„æºåŠ è½½æ–¹å¼ä¸Šã€‚å¾®å‰ç«¯ä¸€èˆ¬æœ‰ä¸¤ç§æ‰“åŒ…æ–¹å¼ï¼š</p><ol><li>å­åº”ç”¨ç‹¬ç«‹æ‰“åŒ…ï¼Œæ¨¡å—æ›´è§£è€¦ï¼Œä½†æ— æ³•æŠ½å–å…¬å…±ä¾èµ–ç­‰ã€‚</li><li>æ•´ä½“åº”ç”¨ä¸€èµ·æ‰“åŒ…ï¼Œå¾ˆå¥½è§£å†³ä¸Šé¢çš„é—®é¢˜ï¼Œä½†æ‰“åŒ…é€Ÿåº¦å®åœ¨æ˜¯å¤ªæ…¢äº†ï¼Œä¸å…·å¤‡æ°´å¹³æ‰©å±•èƒ½åŠ›ã€‚</li></ol><ul><li><strong>æ¨¡å—è”é‚¦æ–¹å¼</strong></li></ul><p>ç»ˆäºæåˆ°æœ¬æ–‡çš„ä¸»è§’äº†ï¼Œä½œä¸º Webpack5 å†…ç½®æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€çš„ Federated Moduleï¼š</p><figure><img src="http://raink.net:8080/md-images/webpack5/fed.jpg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªæ–¹æ¡ˆæ˜¯ç›´æ¥å°†ä¸€ä¸ªåº”ç”¨çš„åŒ…åº”ç”¨äºå¦ä¸€ä¸ªåº”ç”¨ï¼ŒåŒæ—¶å…·å¤‡æ•´ä½“åº”ç”¨ä¸€èµ·æ‰“åŒ…çš„å…¬å…±ä¾èµ–æŠ½å–èƒ½åŠ›ã€‚</p><h3 id="_2-9-2-åº”ç”¨æ¡ˆä¾‹" tabindex="-1"><a class="header-anchor" href="#_2-9-2-åº”ç”¨æ¡ˆä¾‹" aria-hidden="true">#</a> 2.9.2 åº”ç”¨æ¡ˆä¾‹</h3><p>æœ¬æ¡ˆä¾‹æ¨¡æ‹Ÿä¸‰ä¸ªåº”ç”¨ï¼š<code>Nav</code>ã€<code>Search</code> åŠ <code>Home</code>ã€‚æ¯ä¸ªåº”ç”¨éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œåˆé€šè¿‡æ¨¡å—è”é‚¦è”ç³»åˆ°äº†ä¸€èµ·ã€‚</p><img src="http://raink.net:8080/md-images/webpack5/img-02-08.png" alt="image-20211104185841036" style="zoom:33%;" align="left"><p><strong>1ã€Nav å¯¼èˆª</strong></p><p><strong>src/header.js</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">Header</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> header <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;h1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	header<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">&#39;å…¬å…±å¤´éƒ¨å†…å®¹&#39;</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> header<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Header<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>src/index.js</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> Header <span class="token keyword">from</span> <span class="token string">&#39;./Header&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;div&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token function">Header</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>webpack.config.js</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;html-webpack-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> ModuleFederationPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>container<span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;production&#39;</span><span class="token punctuation">,</span>
	<span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">,</span>
	<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token keyword">new</span> <span class="token class-name">ModuleFederationPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token comment">// æ¨¡å—è”é‚¦åå­—</span>
			<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;nav&#39;</span><span class="token punctuation">,</span>
			<span class="token comment">// å¤–éƒ¨è®¿é—®çš„èµ„æºåå­—</span>
			<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;remoteEntry.js&#39;</span><span class="token punctuation">,</span>
			<span class="token comment">// å¼•ç”¨çš„å¤–éƒ¨èµ„æºåˆ—è¡¨</span>
			<span class="token literal-property property">remotes</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token comment">// æš´éœ²ç»™å¤–éƒ¨èµ„æºåˆ—è¡¨</span>
			<span class="token literal-property property">exposes</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token string-property property">&#39;./Header&#39;</span><span class="token operator">:</span> <span class="token string">&#39;./src/Header.js&#39;</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token comment">// å…±äº«æ¨¡å—ï¼Œå¦‚lodash</span>
			<span class="token literal-property property">shared</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åº”ç”¨ webpack è¿è¡ŒæœåŠ¡ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> nav $ npx webpack serve <span class="token parameter variable">--port</span> <span class="token number">3003</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><img src="http://raink.net:8080/md-images/webpack5/img-02-09.png" alt="image-20211104190822620" style="zoom:33%;"><p><strong>2ã€Home é¦–é¡µ</strong></p><p><strong>src/HomeList</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">HomeList</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&#39;&lt;ul&gt;&#39;</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> num<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		str <span class="token operator">+=</span> <span class="token string">&#39;&lt;li&gt;item &#39;</span> <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token string">&#39;&lt;/li&gt;&#39;</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	str <span class="token operator">+=</span> <span class="token string">&#39;&lt;/ul&gt;&#39;</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> str<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> HomeList<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>src/index.js</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> HomeList <span class="token keyword">from</span> <span class="token string">&#39;./HomeList&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;nav/Header&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">Header</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> body <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;div&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>Header<span class="token punctuation">.</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
	document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>innerHTML <span class="token operator">+=</span> <span class="token function">HomeList</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>webpack.config.js</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;html-webpack-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> ModuleFederationPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>container<span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;production&#39;</span><span class="token punctuation">,</span>
	<span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">,</span>
	<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token keyword">new</span> <span class="token class-name">ModuleFederationPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;home&#39;</span><span class="token punctuation">,</span>
			<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;remoteEntry.js&#39;</span><span class="token punctuation">,</span>
			<span class="token literal-property property">remotes</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">nav</span><span class="token operator">:</span> <span class="token string">&#39;nav@http://localhost:3003/remoteEntry.js&#39;</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token literal-property property">exposes</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token string-property property">&#39;./HomeList&#39;</span><span class="token operator">:</span> <span class="token string">&#39;./src/HomeList.js&#39;</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token literal-property property">shared</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åº”ç”¨ webpack è¿è¡ŒæœåŠ¡ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> nav $ npx webpack serve <span class="token parameter variable">--port</span> <span class="token number">3001</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><img src="http://raink.net:8080/md-images/webpack5/img-02-10.png" alt="image-20211104190822620" style="zoom:33%;"><p><strong>3ã€search æœç´¢</strong></p><p><strong>src/index</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;nav/Header&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;home/HomeList&#39;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
	<span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token operator">:</span> Header <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token operator">:</span> HomeList <span class="token punctuation">}</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token function">Header</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>innerHTML <span class="token operator">+=</span> <span class="token function">HomeList</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>webpack.config.js</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;html-webpack-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> ModuleFederationPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>container<span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;production&#39;</span><span class="token punctuation">,</span>
	<span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">,</span>
	<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token keyword">new</span> <span class="token class-name">ModuleFederationPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;search&#39;</span><span class="token punctuation">,</span>
			<span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;remoteEntry.js&#39;</span><span class="token punctuation">,</span>
			<span class="token literal-property property">remotes</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">nav</span><span class="token operator">:</span> <span class="token string">&#39;nav@http://localhost:3003/remoteEntry.js&#39;</span><span class="token punctuation">,</span>
				<span class="token literal-property property">home</span><span class="token operator">:</span> <span class="token string">&#39;home@http://localhost:3001/remoteEntry.js&#39;</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token literal-property property">exposes</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token literal-property property">shared</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åº”ç”¨ webpack è¿è¡ŒæœåŠ¡ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>felix<span class="token punctuation">]</span> nav $ npx webpack serve <span class="token parameter variable">--port</span> <span class="token number">3002</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><img src="http://raink.net:8080/md-images/webpack5/img-02-11.png" alt="image-20211104192925671" style="zoom:33%;"><h2 id="_2-10-æå‡æ„å»ºæ€§èƒ½" tabindex="-1"><a class="header-anchor" href="#_2-10-æå‡æ„å»ºæ€§èƒ½" aria-hidden="true">#</a> 2.10 æå‡æ„å»ºæ€§èƒ½</h2><h3 id="_2-10-1-é€šç”¨ç¯å¢ƒ" tabindex="-1"><a class="header-anchor" href="#_2-10-1-é€šç”¨ç¯å¢ƒ" aria-hidden="true">#</a> 2.10.1 é€šç”¨ç¯å¢ƒ</h3><p>æ— è®ºä½ æ˜¯åœ¨ <a href="https://webpack.docschina.org/guides/development" target="_blank" rel="noopener noreferrer">å¼€å‘ç¯å¢ƒ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> è¿˜æ˜¯åœ¨ <a href="https://webpack.docschina.org/guides/production" target="_blank" rel="noopener noreferrer">ç”Ÿäº§ç¯å¢ƒ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ä¸‹è¿è¡Œæ„å»ºè„šæœ¬ï¼Œä»¥ä¸‹æœ€ä½³å®è·µéƒ½ä¼šæœ‰æ‰€å¸®åŠ©ã€‚</p><p><strong>1ã€æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬</strong></p><p>ä½¿ç”¨æœ€æ–°çš„ webpack ç‰ˆæœ¬ã€‚æˆ‘ä»¬ä¼šç»å¸¸è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ã€‚webpack çš„æœ€æ–°ç¨³å®šç‰ˆæœ¬æ˜¯ï¼š</p><figure><a href="https://github.com/webpack/webpack/releases" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/github/package-json/v/webpack/webpack.svg?label=webpack&amp;style=flat-square&amp;maxAge=3600" alt="latest webpack version" tabindex="0" loading="lazy"><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><figcaption>latest webpack version</figcaption></figure><p>å°† <strong>Node.js</strong> æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œä¹Ÿæœ‰åŠ©äºæé«˜æ€§èƒ½ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå°†ä½ çš„ package ç®¡ç†å·¥å…·ï¼ˆä¾‹å¦‚ <code>npm</code> æˆ–è€… <code>yarn</code>ï¼‰æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œä¹Ÿæœ‰åŠ©äºæé«˜æ€§èƒ½ã€‚è¾ƒæ–°çš„ç‰ˆæœ¬èƒ½å¤Ÿå»ºç«‹æ›´é«˜æ•ˆçš„æ¨¡å—æ ‘ä»¥åŠæé«˜è§£æé€Ÿåº¦ã€‚</p><p><strong>2ã€loader</strong></p><p>å°† loader åº”ç”¨äºæœ€å°‘æ•°é‡çš„å¿…è¦æ¨¡å—ã€‚è€Œéå¦‚ä¸‹:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">//...</span>
	<span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;babel-loader&#39;</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡ä½¿ç”¨ <code>include</code> å­—æ®µï¼Œä»…å°† loader åº”ç”¨åœ¨å®é™…éœ€è¦å°†å…¶è½¬æ¢çš„æ¨¡å—ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">//...</span>
	<span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
			<span class="token punctuation">{</span>
				<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">include</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;src&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;babel-loader&#39;</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>3ã€å¼•å¯¼(bootstrap)</strong></p><p>æ¯ä¸ªé¢å¤–çš„ loader/plugin éƒ½æœ‰å…¶å¯åŠ¨æ—¶é—´ã€‚å°½é‡å°‘åœ°ä½¿ç”¨å·¥å…·ã€‚</p><p><strong>4ã€è§£æ</strong></p><p>ä»¥ä¸‹æ­¥éª¤å¯ä»¥æé«˜è§£æé€Ÿåº¦ï¼š</p><ul><li>å‡å°‘ <code>resolve.modules</code>, <code>resolve.extensions</code>, <code>resolve.mainFiles</code>, <code>resolve.descriptionFiles</code> ä¸­æ¡ç›®æ•°é‡ï¼Œå› ä¸ºä»–ä»¬ä¼šå¢åŠ æ–‡ä»¶ç³»ç»Ÿè°ƒç”¨çš„æ¬¡æ•°ã€‚</li><li>å¦‚æœä½ ä¸ä½¿ç”¨ symlinksï¼ˆä¾‹å¦‚ <code>npm link</code> æˆ–è€… <code>yarn link</code>ï¼‰ï¼Œå¯ä»¥è®¾ç½® <code>resolve.symlinks: false</code>ã€‚</li><li>å¦‚æœä½ ä½¿ç”¨è‡ªå®šä¹‰ resolve plugin è§„åˆ™ï¼Œå¹¶ä¸”æ²¡æœ‰æŒ‡å®š context ä¸Šä¸‹æ–‡ï¼Œå¯ä»¥è®¾ç½® <code>resolve.cacheWithContext: false</code>ã€‚</li></ul><p><strong>5ã€å°å³æ˜¯å¿«(smaller = faster)</strong></p><p>å‡å°‘ç¼–è¯‘ç»“æœçš„æ•´ä½“å¤§å°ï¼Œä»¥æé«˜æ„å»ºæ€§èƒ½ã€‚å°½é‡ä¿æŒ chunk ä½“ç§¯å°ã€‚</p><ul><li>ä½¿ç”¨æ•°é‡æ›´å°‘/ä½“ç§¯æ›´å°çš„ libraryã€‚</li><li>åœ¨å¤šé¡µé¢åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ <code>SplitChunksPlugin</code>ã€‚</li><li>åœ¨å¤šé¡µé¢åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ <code>SplitChunksPlugin </code>ï¼Œå¹¶å¼€å¯ <code>async</code> æ¨¡å¼ã€‚</li><li>ç§»é™¤æœªå¼•ç”¨ä»£ç ã€‚</li><li>åªç¼–è¯‘ä½ å½“å‰æ­£åœ¨å¼€å‘çš„é‚£äº›ä»£ç ã€‚</li></ul><p><strong>6ã€æŒä¹…åŒ–ç¼“å­˜</strong></p><p>åœ¨ webpack é…ç½®ä¸­ä½¿ç”¨ <a href="https://webpack.docschina.org/configuration/cache" target="_blank" rel="noopener noreferrer"><code>cache</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> é€‰é¡¹ã€‚ä½¿ç”¨ <code>package.json</code> ä¸­çš„ <code>&quot;postinstall&quot;</code> æ¸…é™¤ç¼“å­˜ç›®å½•ã€‚</p><p>å°† <code>cache</code> ç±»å‹è®¾ç½®ä¸ºå†…å­˜æˆ–è€…æ–‡ä»¶ç³»ç»Ÿã€‚<code>memory</code> é€‰é¡¹å¾ˆç®€å•ï¼Œå®ƒå‘Šè¯‰ webpack åœ¨å†…å­˜ä¸­å­˜å‚¨ç¼“å­˜ï¼Œä¸å…è®¸é¢å¤–çš„é…ç½®ï¼š</p><p><strong>webpack.config.js</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">//...</span>
	<span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;memory&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>7ã€è‡ªå®šä¹‰ plugin/loader</strong></p><p>å¯¹å®ƒä»¬è¿›è¡Œæ¦‚è¦åˆ†æï¼Œä»¥å…åœ¨æ­¤å¤„å¼•å…¥æ€§èƒ½é—®é¢˜ã€‚</p><p><strong>8ã€dll</strong></p><p>ä½¿ç”¨ <code>DllPlugin</code> ä¸ºæ›´æ”¹ä¸é¢‘ç¹çš„ä»£ç ç”Ÿæˆå•ç‹¬çš„ç¼–è¯‘ç»“æœã€‚è¿™å¯ä»¥æé«˜åº”ç”¨ç¨‹åºçš„ç¼–è¯‘é€Ÿåº¦ï¼Œå°½ç®¡å®ƒå¢åŠ äº†æ„å»ºè¿‡ç¨‹çš„å¤æ‚åº¦ã€‚</p><p><strong>9ã€worker æ± (worker pool)</strong></p><p><code>thread-loader</code> å¯ä»¥å°†éå¸¸æ¶ˆè€—èµ„æºçš„ loader åˆ†æµç»™ä¸€ä¸ª worker poolã€‚</p><blockquote><p>ä¸è¦ä½¿ç”¨å¤ªå¤šçš„ workerï¼Œå› ä¸º Node.js çš„ runtime å’Œ loader éƒ½æœ‰å¯åŠ¨å¼€é”€ã€‚æœ€å°åŒ– worker å’Œ main process(ä¸»è¿›ç¨‹) ä¹‹é—´çš„æ¨¡å—ä¼ è¾“ã€‚è¿›ç¨‹é—´é€šè®¯(IPC, inter process communication)æ˜¯éå¸¸æ¶ˆè€—èµ„æºçš„ã€‚</p></blockquote><p><strong>10ã€Progress plugin</strong></p><p>å°† <code>ProgressPlugin</code> ä» webpack ä¸­åˆ é™¤ï¼Œå¯ä»¥ç¼©çŸ­æ„å»ºæ—¶é—´ã€‚è¯·æ³¨æ„ï¼Œ<code>ProgressPlugin</code> å¯èƒ½ä¸ä¼šä¸ºå¿«é€Ÿæ„å»ºæä¾›å¤ªå¤šä»·å€¼ï¼Œå› æ­¤ï¼Œè¯·æƒè¡¡åˆ©å¼Šå†ä½¿ç”¨ã€‚</p><h3 id="_2-10-2-å¼€å‘ç¯å¢ƒ" tabindex="-1"><a class="header-anchor" href="#_2-10-2-å¼€å‘ç¯å¢ƒ" aria-hidden="true">#</a> 2.10.2 å¼€å‘ç¯å¢ƒ</h3><p>ä»¥ä¸‹æ­¥éª¤å¯¹äº <em>å¼€å‘ç¯å¢ƒ</em> ç‰¹åˆ«æœ‰å¸®åŠ©ã€‚</p><p><strong>1ã€å¢é‡ç¼–è¯‘</strong></p><p>ä½¿ç”¨ webpack çš„ watch mode(ç›‘å¬æ¨¡å¼)ã€‚è€Œä¸ä½¿ç”¨å…¶ä»–å·¥å…·æ¥ watch æ–‡ä»¶å’Œè°ƒç”¨ webpack ã€‚å†…ç½®çš„ watch mode ä¼šè®°å½•æ—¶é—´æˆ³å¹¶å°†æ­¤ä¿¡æ¯ä¼ é€’ç»™ compilation ä»¥ä½¿ç¼“å­˜å¤±æ•ˆã€‚</p><p>åœ¨æŸäº›é…ç½®ç¯å¢ƒä¸­ï¼Œwatch mode ä¼šå›é€€åˆ° poll mode(è½®è¯¢æ¨¡å¼)ã€‚ç›‘å¬è®¸å¤šæ–‡ä»¶ä¼šå¯¼è‡´ CPU å¤§é‡è´Ÿè½½ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨ <code>watchOptions.poll</code> æ¥å¢åŠ è½®è¯¢çš„é—´éš”æ—¶é—´ã€‚</p><p><strong>2ã€åœ¨å†…å­˜ä¸­ç¼–è¯‘</strong></p><p>ä¸‹é¢å‡ ä¸ªå·¥å…·é€šè¿‡åœ¨å†…å­˜ä¸­ï¼ˆè€Œä¸æ˜¯å†™å…¥ç£ç›˜ï¼‰ç¼–è¯‘å’Œ serve èµ„æºæ¥æé«˜æ€§èƒ½ï¼š</p><ul><li><code>webpack-dev-server</code></li><li><code>webpack-hot-middleware</code></li><li><code>webpack-dev-middleware</code></li></ul><p><strong>3ã€stats.toJson åŠ é€Ÿ</strong></p><p>webpack 4 é»˜è®¤ä½¿ç”¨ <code>stats.toJson()</code> è¾“å‡ºå¤§é‡æ•°æ®ã€‚é™¤éåœ¨å¢é‡æ­¥éª¤ä¸­åšå¿…è¦çš„ç»Ÿè®¡ï¼Œå¦åˆ™è¯·é¿å…è·å– <code>stats</code> å¯¹è±¡çš„éƒ¨åˆ†å†…å®¹ã€‚<code>webpack-dev-server</code> åœ¨ v3.1.3 ä»¥åçš„ç‰ˆæœ¬ï¼ŒåŒ…å«ä¸€ä¸ªé‡è¦çš„æ€§èƒ½ä¿®å¤ï¼Œå³æœ€å°åŒ–æ¯ä¸ªå¢é‡æ„å»ºæ­¥éª¤ä¸­ï¼Œä» <code>stats</code> å¯¹è±¡è·å–çš„æ•°æ®é‡ã€‚</p><p><strong>4ã€Devtool</strong></p><p>éœ€è¦æ³¨æ„çš„æ˜¯ä¸åŒçš„ <code>devtool</code> è®¾ç½®ï¼Œä¼šå¯¼è‡´æ€§èƒ½å·®å¼‚ã€‚</p><ul><li><code>&quot;eval&quot;</code> å…·æœ‰æœ€å¥½çš„æ€§èƒ½ï¼Œä½†å¹¶ä¸èƒ½å¸®åŠ©ä½ è½¬è¯‘ä»£ç ã€‚</li><li>å¦‚æœä½ èƒ½æ¥å—ç¨å·®ä¸€äº›çš„ map è´¨é‡ï¼Œå¯ä»¥ä½¿ç”¨ <code>cheap-source-map</code> å˜ä½“é…ç½®æ¥æé«˜æ€§èƒ½</li><li>ä½¿ç”¨ <code>eval-source-map</code> å˜ä½“é…ç½®è¿›è¡Œå¢é‡ç¼–è¯‘ã€‚</li></ul><blockquote><p>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæœ€ä½³é€‰æ‹©æ˜¯ <code>eval-cheap-module-source-map</code>ã€‚</p></blockquote><p><strong>5ã€é¿å…åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹æ‰ä¼šç”¨åˆ°çš„å·¥å…·</strong></p><p>æŸäº› utility, plugin å’Œ loader éƒ½åªç”¨äºç”Ÿäº§ç¯å¢ƒã€‚ä¾‹å¦‚ï¼Œåœ¨å¼€å‘ç¯å¢ƒä¸‹ä½¿ç”¨ <code>TerserPlugin</code> æ¥ minify(å‹ç¼©) å’Œ mangle(æ··æ·†ç ´å) ä»£ç æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚é€šå¸¸åœ¨å¼€å‘ç¯å¢ƒä¸‹ï¼Œåº”è¯¥æ’é™¤ä»¥ä¸‹è¿™äº›å·¥å…·ï¼š</p><ul><li><code>TerserPlugin</code></li><li><code>[fullhash]</code>/<code>[chunkhash]</code>/<code>[contenthash]</code></li><li><code>AggressiveSplittingPlugin</code></li><li><code>AggressiveMergingPlugin</code></li><li><code>ModuleConcatenationPlugin</code></li></ul><p><strong>6ã€æœ€å°åŒ– entry chunk</strong></p><p>Webpack åªä¼šåœ¨æ–‡ä»¶ç³»ç»Ÿä¸­è¾“å‡ºå·²ç»æ›´æ–°çš„ chunkã€‚æŸäº›é…ç½®é€‰é¡¹ï¼ˆHMR, <code>output.chunkFilename</code> çš„ <code>[name]</code>/<code>[chunkhash]/[contenthash]</code>ï¼Œ<code>[fullhash]</code>ï¼‰æ¥è¯´ï¼Œé™¤äº†å¯¹å·²ç»æ›´æ–°çš„ chunk æ— æ•ˆä¹‹å¤–ï¼Œå¯¹äº entry chunk ä¹Ÿä¸ä¼šç”Ÿæ•ˆã€‚</p><p>ç¡®ä¿åœ¨ç”Ÿæˆ entry chunk æ—¶ï¼Œå°½é‡å‡å°‘å…¶ä½“ç§¯ä»¥æé«˜æ€§èƒ½ã€‚ä¸‹é¢çš„é…ç½®ä¸ºè¿è¡Œæ—¶ä»£ç åˆ›å»ºäº†ä¸€ä¸ªé¢å¤–çš„ chunkï¼Œæ‰€ä»¥å®ƒçš„ç”Ÿæˆä»£ä»·è¾ƒä½ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">// ...</span>
	<span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">runtimeChunk</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>7ã€é¿å…é¢å¤–çš„ä¼˜åŒ–æ­¥éª¤</strong></p><p>Webpack é€šè¿‡æ‰§è¡Œé¢å¤–çš„ç®—æ³•ä»»åŠ¡ï¼Œæ¥ä¼˜åŒ–è¾“å‡ºç»“æœçš„ä½“ç§¯å’ŒåŠ è½½æ€§èƒ½ã€‚è¿™äº›ä¼˜åŒ–é€‚ç”¨äºå°å‹ä»£ç åº“ï¼Œä½†æ˜¯åœ¨å¤§å‹ä»£ç åº“ä¸­å´éå¸¸è€—è´¹æ€§èƒ½ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">// ...</span>
	<span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">removeAvailableModules</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
		<span class="token literal-property property">removeEmptyChunks</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
		<span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>8ã€è¾“å‡ºç»“æœä¸æºå¸¦è·¯å¾„ä¿¡æ¯</strong></p><p>Webpack ä¼šåœ¨è¾“å‡ºçš„ bundle ä¸­ç”Ÿæˆè·¯å¾„ä¿¡æ¯ã€‚ç„¶è€Œï¼Œåœ¨æ‰“åŒ…æ•°åƒä¸ªæ¨¡å—çš„é¡¹ç›®ä¸­ï¼Œè¿™ä¼šå¯¼è‡´é€ æˆåƒåœ¾å›æ”¶æ€§èƒ½å‹åŠ›ã€‚åœ¨ <code>options.output.pathinfo</code> è®¾ç½®ä¸­å…³é—­ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">// ...</span>
	<span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">pathinfo</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>9ã€Node.js ç‰ˆæœ¬ 8.9.10-9.11.1</strong></p><p>Node.js v8.9.10 - v9.11.1 ä¸­çš„ ES2015 <code>Map</code> å’Œ <code>Set</code> å®ç°ï¼Œå­˜åœ¨ <a href="https://github.com/nodejs/node/issues/19769" target="_blank" rel="noopener noreferrer">æ€§èƒ½å›é€€<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚Webpack å¤§é‡åœ°ä½¿ç”¨è¿™äº›æ•°æ®ç»“æ„ï¼Œå› æ­¤è¿™æ¬¡å›é€€ä¹Ÿä¼šå½±å“ç¼–è¯‘æ—¶é—´ã€‚</p><p>ä¹‹å‰å’Œä¹‹åçš„ Node.js ç‰ˆæœ¬ä¸å—å½±å“ã€‚</p><p><strong>10ã€TypeScript loader</strong></p><p>ä½ å¯ä»¥ä¸º loader ä¼ å…¥ <code>transpileOnly</code> é€‰é¡¹ï¼Œä»¥ç¼©çŸ­ä½¿ç”¨ <code>ts-loader</code> æ—¶çš„æ„å»ºæ—¶é—´ã€‚ä½¿ç”¨æ­¤é€‰é¡¹ï¼Œä¼šå…³é—­ç±»å‹æ£€æŸ¥ã€‚å¦‚æœè¦å†æ¬¡å¼€å¯ç±»å‹æ£€æŸ¥ï¼Œè¯·ä½¿ç”¨ <a href="https://www.npmjs.com/package/fork-ts-checker-webpack-plugin" target="_blank" rel="noopener noreferrer"><code>ForkTsCheckerWebpackPlugin</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚ä½¿ç”¨æ­¤æ’ä»¶ä¼šå°†æ£€æŸ¥è¿‡ç¨‹ç§»è‡³å•ç‹¬çš„è¿›ç¨‹ï¼Œå¯ä»¥åŠ å¿« TypeScript çš„ç±»å‹æ£€æŸ¥å’Œ ESLint æ’å…¥çš„é€Ÿåº¦ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token comment">// ...</span>
	<span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.tsx?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
	<span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token punctuation">{</span>
			<span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;ts-loader&#39;</span><span class="token punctuation">,</span>
			<span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">transpileOnly</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-10-3-ç”Ÿäº§ç¯å¢ƒ" tabindex="-1"><a class="header-anchor" href="#_2-10-3-ç”Ÿäº§ç¯å¢ƒ" aria-hidden="true">#</a> 2.10.3 ç”Ÿäº§ç¯å¢ƒ</h3><p>ä»¥ä¸‹æ­¥éª¤å¯¹äº <em>ç”Ÿäº§ç¯å¢ƒ</em> ç‰¹åˆ«æœ‰å¸®åŠ©ã€‚</p><p><strong>Source Maps</strong></p><p>source map ç›¸å½“æ¶ˆè€—èµ„æºã€‚ä½ çœŸçš„éœ€è¦å®ƒä»¬ï¼Ÿ</p><p>--æœ¬ç¯‡å®Œ--</p><p>#ä¸‰ã€é¡¹ç›®å®æˆ˜ç¯‡</p><ul><li>Webpack ä¸ React</li><li>Webpack ä¸ Vue</li><li>Webpack ä¸ jQuery</li><li>Webpck ä¸ Node/Express</li></ul><p>#å››ã€å†…éƒ¨åŸç†ç¯‡</p><p>webpack åŸç†</p><p>å¼€å‘ loader plugin</p></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/Wj0028/TuziNotes.git/edit/main/tool/webpack/webpack5å­¦ä¹ æŒ‡å—-V1.0.md" rel="noopener noreferrer" target="_blank" aria-label="åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><div class="update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: wj612712@outlook.com">V_wangjun</span><!--]--><!--]--></div></div></footer><!----><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer"> </div><div class="copyright">Copyright Â© 2023 Tuzi</div></footer></div><!--]--><!--]--><!----><!--]--></div>
    <script type="module" src="/TuziNotes/assets/app-351592dd.js" defer></script>
  </body>
</html>
